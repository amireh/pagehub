<% content_for :scripts do %>
<script src="/js/jqModal.js"></script>
<link rel="stylesheet" href="/css/jqModal.css">

<script>
  $(function() {

    function confirm(msg,callback) {
      $('#confirm')
        .jqmShow()
        .find('p.jqmConfirmMsg')
        .html(msg)
        .end()
        .find(':submit:visible')
          .click(function(){
            $('#confirm').jqmHide();

            if($(this).attr("id") == 'confirm_accepted') {
              return (typeof callback == 'string') ?
                window.location.href = callback :
                callback();
            }

            return false;
          });

      $("#confirm").find(':submit#confirm_accepted').focus()
    }

    $('#confirm').jqm({overlay: 88, modal: true, trigger: false});
    
    $('a.confirm').click(function(e) { 
      log("intercepting confirmation")

      var a = $(this);
      confirm(a.attr("data-confirmation"), function() {
        return ui[a.attr("data-confirmation-cb")](a);
      });

      return false;
    });

  });
</script>
<% end %>

<!-- Confirm Dialog -->
<div class="jqmConfirm" id="confirm">
  <div id="ex3b" class="jqmConfirmWindow">
      <div class="jqmConfirmTitle clearfix">
      <h1>Confirm your action</h1><a href="#" class="jqmClose"><em>X</em></a>
    </div>
    
    <div class="jqmConfirmContent">
    <p class="jqmConfirmMsg"></p>
    <!-- <p>Continue?</p> -->
    </div>
    
    <input type="submit" id="confirm_rejected" value="Cancel" />
    <input type="submit" id="confirm_accepted" value="Yes" />
    
  </div>
</div>