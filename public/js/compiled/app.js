function r(e,t){var n=e[0],r=e[1],i=e[2],f=e[3];n=s(n,r,i,f,t[0],7,-680876936),f=s(f,n,r,i,t[1],12,-389564586),i=s(i,f,n,r,t[2],17,606105819),r=s(r,i,f,n,t[3],22,-1044525330),n=s(n,r,i,f,t[4],7,-176418897),f=s(f,n,r,i,t[5],12,1200080426),i=s(i,f,n,r,t[6],17,-1473231341),r=s(r,i,f,n,t[7],22,-45705983),n=s(n,r,i,f,t[8],7,1770035416),f=s(f,n,r,i,t[9],12,-1958414417),i=s(i,f,n,r,t[10],17,-42063),r=s(r,i,f,n,t[11],22,-1990404162),n=s(n,r,i,f,t[12],7,1804603682),f=s(f,n,r,i,t[13],12,-40341101),i=s(i,f,n,r,t[14],17,-1502002290),r=s(r,i,f,n,t[15],22,1236535329),n=o(n,r,i,f,t[1],5,-165796510),f=o(f,n,r,i,t[6],9,-1069501632),i=o(i,f,n,r,t[11],14,643717713),r=o(r,i,f,n,t[0],20,-373897302),n=o(n,r,i,f,t[5],5,-701558691),f=o(f,n,r,i,t[10],9,38016083),i=o(i,f,n,r,t[15],14,-660478335),r=o(r,i,f,n,t[4],20,-405537848),n=o(n,r,i,f,t[9],5,568446438),f=o(f,n,r,i,t[14],9,-1019803690),i=o(i,f,n,r,t[3],14,-187363961),r=o(r,i,f,n,t[8],20,1163531501),n=o(n,r,i,f,t[13],5,-1444681467),f=o(f,n,r,i,t[2],9,-51403784
),i=o(i,f,n,r,t[7],14,1735328473),r=o(r,i,f,n,t[12],20,-1926607734),n=u(n,r,i,f,t[5],4,-378558),f=u(f,n,r,i,t[8],11,-2022574463),i=u(i,f,n,r,t[11],16,1839030562),r=u(r,i,f,n,t[14],23,-35309556),n=u(n,r,i,f,t[1],4,-1530992060),f=u(f,n,r,i,t[4],11,1272893353),i=u(i,f,n,r,t[7],16,-155497632),r=u(r,i,f,n,t[10],23,-1094730640),n=u(n,r,i,f,t[13],4,681279174),f=u(f,n,r,i,t[0],11,-358537222),i=u(i,f,n,r,t[3],16,-722521979),r=u(r,i,f,n,t[6],23,76029189),n=u(n,r,i,f,t[9],4,-640364487),f=u(f,n,r,i,t[12],11,-421815835),i=u(i,f,n,r,t[15],16,530742520),r=u(r,i,f,n,t[2],23,-995338651),n=a(n,r,i,f,t[0],6,-198630844),f=a(f,n,r,i,t[7],10,1126891415),i=a(i,f,n,r,t[14],15,-1416354905),r=a(r,i,f,n,t[5],21,-57434055),n=a(n,r,i,f,t[12],6,1700485571),f=a(f,n,r,i,t[3],10,-1894986606),i=a(i,f,n,r,t[10],15,-1051523),r=a(r,i,f,n,t[1],21,-2054922799),n=a(n,r,i,f,t[8],6,1873313359),f=a(f,n,r,i,t[15],10,-30611744),i=a(i,f,n,r,t[6],15,-1560198380),r=a(r,i,f,n,t[13],21,1309151649),n=a(n,r,i,f,t[4],6,-145523070),f=a(f,n
,r,i,t[11],10,-1120210379),i=a(i,f,n,r,t[2],15,718787259),r=a(r,i,f,n,t[9],21,-343485551),e[0]=v(n,e[0]),e[1]=v(r,e[1]),e[2]=v(i,e[2]),e[3]=v(f,e[3])}function i(e,t,n,r,i,s){return t=v(v(t,e),v(r,s)),v(t<<i|t>>>32-i,n)}function s(e,t,n,r,s,o,u){return i(t&n|~t&r,e,t,s,o,u)}function o(e,t,n,r,s,o,u){return i(t&r|n&~r,e,t,s,o,u)}function u(e,t,n,r,s,o,u){return i(t^n^r,e,t,s,o,u)}function a(e,t,n,r,s,o,u){return i(n^(t|~r),e,t,s,o,u)}function f(e){txt="";var t=e.length,n=[1732584193,-271733879,-1732584194,271733878],i;for(i=64;i<=e.length;i+=64)r(n,l(e.substring(i-64,i)));e=e.substring(i-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(i=0;i<e.length;i++)s[i>>2]|=e.charCodeAt(i)<<(i%4<<3);s[i>>2]|=128<<(i%4<<3);if(i>55){r(n,s);for(i=0;i<16;i++)s[i]=0}return s[14]=t*8,r(n,s),n}function l(e){var t=[],n;for(n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}function h(e){var t="",n=0;for(;n<4;n++)t+=c[e>>n*8+4&15]+c[e>>n*8&15]
;return t}function p(e){for(var t=0;t<e.length;t++)e[t]=h(e[t]);return e.join("")}function d(e){return p(f(e))}function v(e,t){return e+t&4294967295}(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.3";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n)
:(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(
e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?
t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=
function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call
(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)
if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0==t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has
(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t
){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=
function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=M(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&M(e[c],t[c],n,r
))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),x.isFunction=function(e){return"function"==typeof e},x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return l
.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=""+ ++P;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g
,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){n=x.defaults({},n,x.templateSettings);var r=RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),i=u+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,x);var a=function(e){return o.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},x.chain=function(e){return x(e).chain()};var F=function(
e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(b.acceptData(e)){var s,o,u=b.expando,a="string"==typeof n,f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if(h&&c[h]&&
(i||c[h].data)||!a||r!==t)return h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n)),s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],null==o&&(o=s[b.camelCase(n)])):o=s,o}}function q(e,t,n){if(b.acceptData(e)){var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(u[a]){if(t&&(s=n?u[a]:u[a].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t=t in s?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}(n||(delete u[a].data,U(u[a])))&&(o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null)}}}function R(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(F,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s
){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ht(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute
("type"),e}function Pt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;i>r;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}}function Bt(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(_t(t).text=e.text,Dt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function jt(e,n){var r
,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;null!=(s=r[o]);o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=
t?s[o]||"":"none"));return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=b.css(e,n+Zt[s],!0,i)),r?("content"===n&&(o-=b.css(e,"padding"+Zt[s],!0,i)),"margin"!==n&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),"padding"!==n&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=Rt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];return n||(n=fn(e,t),"none"!==n&&n||(It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement
),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach()),Qt[e]=n),n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)vn(e+"["+i+"]",t[i],n,r)}function _n(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,n,r,i){function u(a){var f;return s[a]=!0,b.each(e[a]||[],function(e,a){var l=a(n,r,i);return"string"!=typeof l||o||s[l]?o?!(f=l):t:(n.dataTypes.unshift(l),u(l),!1)}),f}var s={},o=e===An;return u(n.dataTypes[0])||!s["*"]&&u("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n
[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while("*"===f[0])f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}return o?(o!==f[0]&&f.unshift(o),r[o]):t}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if("*"!==r){if("*"!==f&&f!==r){if(i=o[f+" "+r]||o["* "+r],!i)for(n in o)if(s=n.split(" "),s[1]===r&&(i=o[f+" "+s[0]]||o["* "+s[0]])){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success"
,data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;s>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this
;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(tr(l,f.opts.specialEasing);o>s;s++)if(r=Qn[s].call(f,e,l,f.opts))return r;return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e)if(r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r],o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in 
t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==an(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],$n.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(m?"hide":"show"))continue;v.push(i)}if(s=v.length){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;s>i;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-
t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){(s.addEventListener||"load"===e.type||"complete"===s.readyState)&&(D(),b.ready())},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_
),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:x.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0)),T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=s.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+
e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;for("boolean"==typeof u&&(l=u,u=arguments[1]||{},a=2),"object"==typeof u||b.isFunction(u)||(u={}),f===a&&(u=this,--a);f>a;a++)if(null!=(s=arguments[a]))for(i in s)e=u[i],r=s[i],u!==r&&(l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1
,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r));return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!s.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1
}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&N.test(n.replace(k,"@").replace(L,"]").replace(C,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.
execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:y&&!y.call("\ufeff\u00a0")?function(e){return null==e?"":y.call(e)}:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(P(Object(e))?b.merge(n,"string"==typeof e?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if("number"==typeof r)for(;r>s;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++
];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return"string"==typeof n&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=null==r;if("object"===b.type(r)){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t&&(s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)})),n))for(;f>a;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)));return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===s.readyState
)setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=null==e.frameElement&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e="string"==typeof e?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){for(r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;a&&s>o;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==
r&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(s>=r&&s--,o>=r&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!a||i&&!f||(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(
n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,s=1===i?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject
).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==p.className,leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==s.createElement("nav").cloneNode(!0).outerHTML,boxModel
:"CSS1Compat"===s.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=""===o.getAttribute("value"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===p.style
.backgroundClip,b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];a&&(n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===p.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==a.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(p,null)||{}).top,t.boxSizingReliable="4px"===
(e.getComputedStyle(p,null)||{width:"4px"}).width,r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==p.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null)}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:
function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length&&(u=b.data(s),1===s.nodeType&&!b._data(s,"parsedAttrs"))){for(r=s.attributes;r.length>o;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}return u}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?s?R(s,e,b.data(s,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(
e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),s.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this
,u=this.length,a=function(){--i||s.resolveWith(o,[o])};"string"!=typeof e&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className
))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(E)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else(n===i||"boolean"===
n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(arguments.length)return i=b.isFunction(e),this.each(function(n){var s,o=b(this);1===this.nodeType&&(s=i?e.call(this,n,o.val()):e,null==s?s="":"number"==typeof s?s+="":b.isArray(s)&&(s=b.map(s,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,s,"value")!==t||(this.value=s))});if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,"string"==typeof n?n.replace(V,""):null==n?"":n)}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get
:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===i?b.prop(e,n,r):(o=1!==a||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z)),r===t?s&&o&&"get"in s&&null!==(u=s.get(e,n))?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),null==u?t:u):null!==r?s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&1===e.nodeType)while(n=
s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(e&&3!==u&&8!==u&&2!==u)return o=1!==u||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&null!==(i=s.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=
b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),s="boolean"==typeof r?Y&&G?null!=i:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},Y&&G||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):z&&z.set(e,n,r)}}),G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,""===t?!1:t,n)}},b.each(["width","height"
],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[
this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(y){r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--)u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l),(d=a[v])||(d=a[v]=[],d.delegateCount=0,c.setup&&c.setup.call(e,s,m,h)!==!1||(e.addEventListener?e.addEventListener
(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0;e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(m&&(l=m.events)){t=(t||"").match(E)||[""],f=t.length;while(f--)if(u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],!i&&v!==o.origType||n&&n.guid!==o.guid||u&&!u.test(o.namespace)||r&&r!==o.selector&&("**"!==r||!o.selector)||(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||b.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)b.event.remove(e,p+t[f],n,r,!0);b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,o){var u,a,f,l
,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];if(f=h=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!nt.test(v+b.event.triggered)&&(v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=0>v.indexOf(":")&&"on"+v,n=n[b.expando]?n:new b.Event(v,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{},o||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!o&&!c.noBubble&&!b.isWindow(i)){for(l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();if(n.type=v,!(o||n.
isDefaultPrevented()||c._default&&c._default.apply(i.ownerDocument,r)!==!1||"click"===v&&b.nodeName(i,"a")||!b.acceptData(i)||!a||!i[v]||b.isWindow(i))){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount
,f=e.target;if(a&&f.nodeType&&(!e.button||"click"!==e.type))for(;f!=this;f=f.parentNode||this)if(1===f.nodeType&&(f.disabled!==!0||"click"!==e.type)){for(s=[],o=0;a>o;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return n.length>a&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split
(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||u===t||(e.which=1&u?1:2&u?3:4&u?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===s.activeElement&&
this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){
var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!b.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0)
)}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==
n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&s.addEventListener(e,r,!0)},teardown:function(){0===--n&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=st;else if(!i)return this;return 1===s&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&
e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(s in e)this.off(s,n,e[s]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=
null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;if((t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){if(h=!0,v=w,m=t,y=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at
(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){(!n||(r=U.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(s=[])),n=!1,(r=z.exec(u))&&(n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length));for(o in i.filter)!(r=V[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e
[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&"parentNode"===i,o=T++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[i])if(1===t.nodeType||s)if(l=t[w]||(t[w]={}),(f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else if(f=l[i]=[c],f[1]=e(t,n,u)||r,f[1]===!0)return!0}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:mt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e
){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;s>a;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{if(n=i.filter[e[a].type].apply(null,e[a].matches),n[w]){for(r=++a;s>r;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,r>a&&yt(e.slice(a,r)),s>r&&yt(e=e.slice(r)),s>r&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=null!=p,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=null==S?1:Math.random()||.1;for(E&&(f=a!==c&&a,r=n);
null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&!p&&i.relative[o[1].type]){if(t=i.find.ID(a.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){if(a=o[s],i.relative[f=a.type])break;if((l=i.find[f])&&(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t))){if(o.splice(s,1),e=r.length&&pt(o),!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v
,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=RegExp("^"+H+"*,"+H+"*"),z=RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=RegExp(q),X=RegExp("^"+j+"$"),V={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),NAME:RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:RegExp("^("+B.replace("w","w*")+")"),ATTR:RegExp("^"+I),PSEUDO:RegExp("^"+q),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+
H+"*\\)|)","i"),needsContext:RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;return n!==c&&9===n.nodeType&&n.documentElement?(c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.
attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==
L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==L?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,n){return typeof n.getElementsByName!==L?n.getElementsByName(name):t},i.find.CLASS=S.getByClassName&&function(e,n){return typeof n.getElementsByClassName===L||p?t:n.getElementsByClassName(e)},v=[],d=[":focus"],(S.qsa=rt
(n.querySelectorAll))&&(ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")})),(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=RegExp(d.join("|")),v=RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&
e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;return e===t?(a=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c):c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']"),!(!S.matchesSelector||p||v&&v.test(t)||d.test(t)))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&11!==e.document.nodeType
)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;if(a=!S.detectDuplicates,e.sort(y),a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir
:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(
r){var i=ut.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName
.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[w]||(c[w]={}))[e]=[x,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||
t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===
t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[0>n?n+t:n]}),even:ct(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut
.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||"string"!=typeof e?b(e,t||this.context
):0;for(;i>r;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&11!==n.nodeType){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling"
)},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!b(s).is(r)))1===s.nodeType&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video"
,vt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===
t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this
.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(
e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(vt,""):t;if(!("string"!=typeof e||St.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&gt.test(e)||Lt[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(yt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(1>=c||"string"!=typeof v||b.support.checkClone)&&Tt.test(v))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():
t)),s.domManip(e,n,r)});if(c&&(f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,1===f.childNodes.length&&(f=i),i)){for(n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;c>l;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o)for(a=u[u.length-1].ownerDocument,b.map(u,Dt),l=0;o>l;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")));f=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;o>=r;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.
ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=jt(s),u=jt(e),o=0;null!=(i=u[o]);++o)r[o]&&Bt(i,r[o]);if(t)if(n)for(u=u||jt(e),r=r||jt(s),o=0;null!=(i=u[o]);o++)Ht(i,r[o]);else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;c>d;d++)if(s=e[d],s||0===s)if("object"===b.type(s))b.merge(p,s.nodeType?[s]:s);else if(Et.test(s)){u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;if(!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0])),!b.support.tbody){s="table"!==a||wt.test(s)?"<table>"!==l[1]||wt.test
(s)?0:u:u.firstChild,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}else p.push(t.createTextNode(s));u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++])if((!r||-1===b.inArray(s,r))&&(o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u),n)){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;null!=(n=e[u]);u++)if((t||b.acceptData(n))&&(s=n[a],o=s&&f[s])){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/
,Vt=/^margin/,$t=RegExp("^("+w+")(.*)$","i"),Jt=RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){for(s=qt(e),i=n.length;i>u;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"
},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,o,u,a=b.camelCase(n),f=e.style;if(n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a],r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];if(o=typeof r,"string"===o&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||b.cssNumber[a]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(f[n]="inherit"),u&&"set"in u&&(r=u.set(e,r,i))===t)))try{f[n]=r}catch(l){}}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),"normal"===o&&n in Yt&&(o=Yt[n]),""===r||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(
t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(""!==a||b.contains(e.ownerDocument,e)||(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return null==a&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left="fontSize"===n?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),""===a?"auto":a}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,n,i)}):un(e,n,i):t},set:function(e,t,r){var i=r&&qt(e);return sn(e,t,r?on(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}
}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(s.replace(Ut,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Rt(e,n),Jt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"
))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(
e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(
Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if("string"!=typeof e&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8"
,accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;2!==w&&(w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r)),e>=200&&300>e||304===e?(c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),204===e?(l=!0,T="nocontent"):304===e?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y)):(y=T,(e||!T)&&(T="error",0>e&&(e=0))),x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode
(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};if(d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.
url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],null==c.crossDomain&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x),2===w)return x;a=c.global,a&&0===b.active++&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType
),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&2!==w){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);if(f=Dn(An,c,n,x)){x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(2>w))throw T;N(-1,T)}}else N(-1,"No Transport");return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET"
,e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");return a||"jsonp"===n.dataTypes[0]?(s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a
]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"):t});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();if(n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async),n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"
);try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||4===a.readyState))if(r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]),i)4!==a.readyState&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),"string"==typeof a.responseText&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}u||!n.isLocal||n.crossDomain?1223===u&&(u=204):u=c.text?200:404}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?4===a.readyState?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){if(n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&1!==a&&--f)}i.
unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(
e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue
,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(
e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200
,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(u)return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=("absolute"===r||"fixed"===r)&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+c),null!=t.left&&(f.left=t.left-s.left+h),"using"in 
t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position"))e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);return s===t?o?n in o?o[n]:o.document.documentElement[i]:e[i]:(o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s,t)},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n
){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||"boolean"!=typeof i),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;o="undefined"!=typeof exports?exports:e.Backbone={},o.VERSION="0.9.10";var u=e._;!u&&"undefined"!=typeof require&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if("object"==typeof n)for(var i in n)e[
t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;n=n.split(a),i=0;for(var s=n.length;i<s;i++)e[t].apply(e,[n[i]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);break;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0]);break;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1]);break;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);break;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}},n=o.Events={on:function(e,t,n){return!f(this,"on",e,[t,n])||!t?this:(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this)},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]
:u.keys(this._events),a=0;for(l=o.length;a<l;a++)if(e=o[a],r=this._events[e]){s=[];if(t||n){c=0;for(h=r.length;c<h;c++)i=r[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&s.push(i)}this._events[e]=s}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,"object"==typeof t?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(r){if(e)e.off(t,"object"==typeof t?this:n,this),!t&&!n&&delete r[e._listenerId];else{"object"==typeof t&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}}};n.bind=n.on,n.unbind=n.off,u.extend(o,n);var c=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=
t.collection),t&&t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(c.prototype,n,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,i,s,o,a,f,l;if(null==e)return this;"object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,o=n.silent,e=[],a=this._changing,this._changing=!0,a||(this._previousAttributes=u.clone(this.attributes),this.changed={}),l=this.attributes,f=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(l[r],t)||e.push(r),u.isEqual(f[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete l[r]:l[r]=t;if(!o){e.length&&
(this._pending=!0),t=0;for(r=e.length;t<r;t++)this.trigger("change:"+e[t],this,l[e[t]],n)}if(a)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._changing=this._pending=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={},n;for(n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes,i;for(i in e)u.isEqual(r[i],t=e[i])||((n||(n={}))[i]=t);return n},previous:function(e){return null==e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r)
{if(!e.set(e.parse(n,r),r))return!1;t&&t(e,n,r)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s=this.attributes;return null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,r&&(!n||!n.wait)&&!this.set(r,n)?!1:(n=u.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=u.extend({},s,r)),void 0===n.parse&&(n.parse=!0),i=n.success,n.success=function(e,t,n){e.attributes=s;var o=e.parse(t,n);n.wait&&(o=u.extend(r||{},o));if(u.isObject(o)&&!e.set(o,n))return!1;i&&i(e,t,n)},e=this.isNew()?"create":n.patch?"patch":"update","patch"===e&&(n.attrs=r),e=this.sync(e,this,n),r&&n.wait&&(this.attributes=s),e):!1)},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(e,t,i){(i.wait||e.isNew())&&r(),n&&n(e,t,i)};if(this.isNew())return e.success(this,null,e),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||k();return this
.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var h=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(h.prototype,n,{model:c,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,i,o,a,f,l,c,h,p,d;c=[],h=t.at,p=this
.comparator&&null==h&&0!=t.sort,d=u.isString(this.comparator)?this.comparator:null,n=0;for(i=e.length;n<i;n++)(o=this._prepareModel(a=e[n],t))?(f=this.get(o))?t.merge&&(f.set(a===o?o.attributes:a,t),p&&!l&&f.hasChanged(d)&&(l=!0)):(c.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)):this.trigger("invalid",this,a,t);c.length&&(p&&(l=!0),this.length+=c.length,null!=h?s.apply(this.models,[h,0].concat(c)):r.apply(this.models,c)),l&&this.sort({silent:!0});if(t.silent)return this;n=0;for(i=c.length;n<i;n++)(o=c[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;n=0;for(r=e.length;n<r;n++)if(s=this.get(e[n]))delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s);return this},push:function(e,t){return e=this._prepareModel(e,t),this.
add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){if(null!=e)return this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e]},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){t=u.extend(
{add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,i,s,o=[],a=[],f={};u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);r=0;for(i=e.length;r<i;r++)n=e[r],s=this.get(n),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove){r=0;for(i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n)}return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){e[r.update?"update":"reset"](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t
.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof c)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"===e||"remove"===e)&&n!==this||("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)}}),u.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain"
.split(" "),function(e){h.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}}),u.each(["groupBy","countBy","sortBy"],function(e){h.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var p=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},d=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,m=/\*\w+/g,g=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(p.prototype,n,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){r=this._extractParameters(e,r),n&&n.apply(this,r),this.trigger.apply(this,["route:"+t].concat(r)),this.trigger("route",t,r),o.history.trigger("route",this,t,r)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(this.routes)for(var e,t=u.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes
[e])},_routeToRegExp:function(e){return e=e.replace(g,"\\$&").replace(d,"(?:$1)?").replace(v,function(e,t){return t?e:"([^/]+)"}).replace(m,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var y=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},b=/^[#\/]|\s+$/g,w=/^\/+|\/+$/g,E=/msie [\w.]+/,S=/\/$/;y.started=!1,u.extend(y.prototype,n,{interval:50,getHash:function(e){return(e=(e||this).location.href.match(/#(.*)$/))?e[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(S,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(b,"")},start:function(e){if(y.started)throw Error("Backbone.history has already been started");y.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==
this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState),e=this.getFragment();var t=document.documentMode,t=E.exec(navigator.userAgent.toLowerCase())&&(!t||7>=t);this.root=("/"+this.root+"/").replace(w,"/"),t&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!t?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e,e=this.location,t=e.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!t)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&
t&&e.hash&&(this.fragment=this.getHash().replace(b,""),this.history.replaceState({},document.title,this.root+this.fragment+e.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),y.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe)));if(e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){if(!y.started)return!1;if(!t||!0===t)t={trigger:t};e=this.getFragment(e||"");if(this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document
.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){n?(n=e.href.replace(/(javascript:|#).*$/,""),e.replace(n+"#"+t)):e.hash="#"+t}}),o.history=new y;var x=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},T=/^(\S+)\s*(.*)$/,N="model collection el id attributes className tagName events".split(" ");u.extend(x.prototype,n,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el
[0],!1!==t&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=u.result(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw Error('Method "'+e[t]+'" does not exist');var r=t.match(T),i=r[1],r=r[2],n=u.bind(n,this),i=i+(".delegateEvents"+this.cid);""===r?this.$el.on(i,n):this.$el.on(i,r,n)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,N)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"),!1);else{var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className")),e=o.$("<"+u.result(this,"tagName")+">").attr(e),this.setElement(e,!1)}}});var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=C[e];u.defaults(n||(n={}),{emulateHTTP:
o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||k()),null==n.data&&t&&("create"===e||"update"===e||"patch"===e)&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}"GET"!==i.type&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e){a&&a(t,e,n),t.trigger("sync",t,e,n)};var f=n.error;return n.error=function(e){f&&f(t,e,n),t.trigger("error",t,e,n)},e=n.xhr=o.ajax(u.extend(i,n)),t.trigger("request",t,e,n),e},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)},c.extend=h.extend=p.extend=x.extend=y.extend=function(e,t){var n=this,r;r=e&&u.has(e,"constructor"
)?e.constructor:function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};var k=function(){throw Error('A "url" property or function must be specified')}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),function(){var e,t,n,r,i,s,o=[].slice;n=function(e){var t,r;return _.isObject(e||_.isFunction(e))?_.isDate(e)?new Date(e.getTime()):_.isRegExp(e)?new RegExp(e.source,e.toString().replace(/.*\//,"")):(r=_.isArray(e||_.isArguments(e)),t=function(e,t,i){return r?e.push(n(t)):e[i]=n(t),e},_.reduce(e,t,r?[]:{})):e},s=function(e){return e==null?!1:(e.prototype==={}.prototype||e.prototype===Object.prototype)&&_.isObject(e)&&!_.isArray(e)&&!_.isFunction(e)&&!_.isDate(e)&&!_.isRegExp(e)&&!_.isArguments(e)},t=function(e){return _.filter(_.keys(e),function(t){return s(e[t])})},e=function(
e){return _.filter(_.keys(e),function(t){return _.isArray(e[t])})},i=function(n,r,s){var o,u,a,f,l,c,h,p,d,v;s==null&&(s=20);if(s<=0)return console.warn("_.deepExtend(): Maximum depth of recursion hit."),_.extend(n,r);c=_.intersection(t(n),t(r)),u=function(e){return r[e]=i(n[e],r[e],s-1)};for(h=0,d=c.length;h<d;h++)l=c[h],u(l);f=_.intersection(e(n),e(r)),o=function(e){return r[e]=_.union(n[e],r[e])};for(p=0,v=f.length;p<v;p++)a=f[p],o(a);return _.extend(n,r)},r=function(){var e,t,r,s;r=2<=arguments.length?o.call(arguments,0,s=arguments.length-1):(s=0,[]),t=arguments[s++],_.isNumber(t)||(r.push(t),t=20);if(r.length<=1)return r[0];if(t<=0)return _.extend.apply(this,r);e=r.shift();while(r.length>0)e=i(e,n(r.shift()),t);return e},_.mixin({deepClone:n,isBasicObject:s,basicObjects:t,arrays:e,deepExtend:r})}.call(this),function(e){typeof define=="function"&&define.amd?define("backbone.nested",["underscore","backbone"],e):e(_,Backbone)}(function(e,t){function n(t){var r={},i=o.keyPathSeparator;
for(var s in t){var u=t[s];if(u&&u.constructor===Object&&!e.isEmpty(u)){var a=n(u);for(var f in a){var l=a[f];r[s+i+f]=l}}else r[s]=u}return r}function r(t,n,r){var i=o.keyPathSeparator,s=n.split(i),u=t;r||r===!1;for(var a=0,f=s.length;a<f;a++){if(r&&!e.has(u,s[a]))return!1;u=u[s[a]],u==null&&a<f-1&&(u={});if(typeof u=="undefined")return r?!0:u}return r?!0:u}function i(t,n,r,i){i=i||{};var s=o.keyPathSeparator,u=n.split(s),a=t;for(var f=0,l=u.length;f<l&&a!==undefined;f++){var c=u[f];if(f===l-1)i.unset?delete a[c]:a[c]=r;else{if(typeof a[c]=="undefined"||!e.isObject(a[c]))a[c]={};a=a[c]}}}function s(e,t){i(e,t,null,{unset:!0})}var o=t.Model.extend({constructor:function(t,n){var r,i=t||{};this.cid=e.uniqueId("c"),this.attributes={},n&&n.collection&&(this.collection=n.collection),n&&n.parse&&(i=this.parse(i,n)||{});if(r=e.result(this,"defaults"))i=e.deepExtend({},r,i);this.set(i,n),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(t){return e.deepClone(this.attributes
)},get:function(e){return r(this.attributes,e)},set:function(t,u,a){var f,l,c,h,p,d,v,m;if(t==null)return this;typeof t=="object"?(l=t,a=u||{}):(l={})[t]=u,a||(a={});if(!this._validate(l,a))return!1;c=a.unset,p=a.silent,h=[],d=this._changing,this._changing=!0,d||(this._previousAttributes=e.deepClone(this.attributes),this.changed={}),m=this.attributes,v=this._previousAttributes,this.idAttribute in l&&(this.id=l[this.idAttribute]),l=n(l);for(f in l)u=l[f],e.isEqual(r(m,f),u)||h.push(f),e.isEqual(r(v,f),u)?s(this.changed,f):i(this.changed,f,u),c?s(m,f):i(m,f,u);if(!p){h.length&&(this._pending=!0);var g=o.keyPathSeparator;for(var y=0,b=h.length;y<b;y++){var t=h[y];this.trigger("change:"+t,this,r(m,t),a);var w=t.split(g);for(var E=w.length-1;E>0;E--){var S=e.first(w,E).join(g),x=S+g+"*";this.trigger("change:"+x,this,r(m,S),a)}}}if(d)return this;if(!p)while(this._pending)this._pending=!1,this.trigger("change",this,a);return this._pending=!1,this._changing=!1,this},clear:function(t){var r={},i=
n(this.attributes);for(var s in i)r[s]=void 0;return this.set(r,e.extend({},t,{unset:!0}))},hasChanged:function(t){return t==null?!e.isEmpty(this.changed):r(this.changed,t)!==undefined},changedAttributes:function(t){if(!t)return this.hasChanged()?n(this.changed):!1;var r=this._changing?this._previousAttributes:this.attributes;t=n(t),r=n(r);var i,s=!1;for(var o in t){if(e.isEqual(r[o],i=t[o]))continue;(s||(s={}))[o]=i}return s},previous:function(e){return e==null||!this._previousAttributes?null:r(this._previousAttributes,e)},previousAttributes:function(){return e.deepClone(this._previousAttributes)}});return o.keyPathSeparator=".",t.DeepModel=o,typeof module!="undefined"&&(module.exports=o),t}),define("pagehub.state",["backbone","backbone.nested"],function(e){var t=e.DeepModel.extend({initialize:function(e){return _.implode(this,e||{})}});return t}),this.Handlebars={},function(e){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=2,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"},e.helpers=
{},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(r,i){var s=i.inverse||function(){},o=i.fn,u="",a=t.call(r);return a===n&&(r=r.call(this)),r===!0?o(this):r===!1||r==null?s(this):a==="[object Array]"?r.length>0?e.helpers.each(r,i):s(this):o(r)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(e.logger.level<=t){var r=e.logger.methodMap[t];typeof console!="undefined"&&console[r]&&console[r].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){
var r=n.fn,i=n.inverse,s=0,o="",u;n.data&&(u=e.createFrame(n.data));if(t&&typeof t=="object")if(t instanceof Array)for(var a=t.length;s<a;s++)u&&(u.index=s),o+=r(t[s],{data:u});else for(var f in t)t.hasOwnProperty(f)&&(u&&(u.key=f),o+=r(t[f],{data:u}),s++);return s===0&&(o=i(this)),o}),e.registerHelper("if",function(r,i){var s=t.call(r);return s===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t,n){var r=n.data&&n.data.level!=null?parseInt(n.data.level,10):1;e.log(r,t)})}(this.Handlebars);var e=function(){function n(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE
:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode([],o[a]);break;case 3
:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 4:this.$=new i.ProgramNode(o[a-1],[]);break;case 5:this.$=new i.ProgramNode(o[a]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[o[a]];break;case 9:o[a-1].push(o[a]),this.$=o[a-1];break;case 10:this.$=new i.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a]);break;case 11:this.$=new i.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a]);break;case 12:this.$=o[a];break;case 13:this.$=o[a];break;case 14:this.$=new i.ContentNode(o[a]);break;case 15:this.$=new i.CommentNode(o[a]);break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 18:this.$=o[a-1];break;case 19:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 20:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 21:this.$=new i.PartialNode(o[a-1]);break;case 22:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 23:break;case 24:this.$=[[o[a-2]].concat
(o[a-1]),o[a]];break;case 25:this.$=[[o[a-1]].concat(o[a]),null];break;case 26:this.$=[[o[a-1]],o[a]];break;case 27:this.$=[[o[a]],null];break;case 28:this.$=[[new i.DataNode(o[a])],null];break;case 29:o[a-1].push(o[a]),this.$=o[a-1];break;case 30:this.$=[o[a]];break;case 31:this.$=o[a];break;case 32:this.$=new i.StringNode(o[a]);break;case 33:this.$=new i.IntegerNode(o[a]);break;case 34:this.$=new i.BooleanNode(o[a]);break;case 35:this.$=new i.DataNode(o[a]);break;case 36:this.$=new i.HashNode(o[a]);break;case 37:o[a-1].push(o[a]),this.$=o[a-1];break;case 38:this.$=[o[a]];break;case 39:this.$=[o[a-2],o[a]];break;case 40:this.$=[o[a-2],new i.StringNode(o[a])];break;case 41:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 42:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 43:this.$=[o[a-2],new i.DataNode(o[a])];break;case 44:this.$=new i.PartialNameNode(o[a]);break;case 45:this.$=new i.IdNode(o[a]);break;case 46:o[a-2].push(o[a]),this.$=o[a-2];break;case 47:this.$=[o[a]]}},table:[{3
:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24
:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},
{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10
]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18]
,22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(t,n){throw new Error(t)},parse:function(t){function v(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function m(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p);var d=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var g,y,b,w,E,S,x={},T,N,C,k;for(;;){b=r[r.length-1];if(this.defaultActions[b])w=this.defaultActions[b];else{if(g===null||typeof g=="undefined")g=m();w=o[b]&&o[b][g]}if(typeof w=="undefined"||!w.length||!w[0]){var L="";if(!l){k=[];for(T in o[b])this.terminals_[T]&&T>2&&k.push("'"+this.terminals_[T]+"'"
);this.lexer.showPosition?L="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[g]||g)+"'":L="Parse error on line "+(a+1)+": Unexpected "+(g==1?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(L,{text:this.lexer.match,token:this.terminals_[g]||g,line:this.lexer.yylineno,loc:p,expected:k})}}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+b+", token: "+g);switch(w[0]){case 1:r.push(g),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(w[1]),g=null,y?(g=y,y=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:N=this.productions_[w[1]][1],x.$=i[i.length-N],x._$={first_line:s[s.length-(N||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(N||1)].first_column,last_column:s[s.length-1].last_column},d&&(x._$.range=[s[s.length-(N||1)].range[0],s[s.length-1].range[1]]),S=this
.performAction.call(x,u,f,a,this.yy,w[1],i,s);if(typeof S!="undefined")return S;N&&(r=r.slice(0,-1*N*2),i=i.slice(0,-1*N),s=s.slice(0,-1*N)),r.push(this.productions_[w[1]][0]),i.push(x.$),s.push(x._$),C=o[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice
(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&
(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i,s;this._more||(this.yytext="",this.match="");var o=this._currentRules();for(var u=0;u<o.length;u++){n=this._input.match(this.rules[o[u]]);if(n&&(!t||n[0].length>t[0].length)){t=n,r=u;if(!this.options.flex)break}}if(t){s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this
._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1);if(e)return e;return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.options={},e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext
)return 14;break;case 1:return 14;case 2:return n.yytext.slice(-1)!=="\\"&&this.popState(),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1)),14;case 3:return n.yytext=n.yytext.substr(0,n.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState(),this.begin("com");break;case 12:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 18:break;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),30;case 22:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\'/g,"'"),30;case 23:return n.yytext=n.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return n.yytext=n.yytext.substr(1,n.yyleng-2),35;case 29
:return"INVALID";case 30:break;case 31:return this.popState(),37;case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return e.lexer=t,n.prototype=e,e.Parser=n,new n}();Handlebars.Parser=e,Handlebars
.parse=function(e){return e.constructor===Handlebars.AST.ProgramNode?e:(Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(e))},Handlebars.print=function(e){return(new Handlebars.PrintVisitor).accept(e)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(e,t){this.type="program",this.statements=e,t&&(this.inverse=new Handlebars.AST.ProgramNode(t))},Handlebars.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var r=this.id=e[0],i=this.params=e.slice(1),s=this.eligibleHelper=r.isSimple;this.isHelper=s&&(i.length||t)},Handlebars.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t};var e=function(e,t){if(e.original!==t.original)throw new Handlebars.Exception(e.original+" doesn't match "+t.original)};Handlebars.AST.BlockNode=function(t,n,r,i){e(t.id,i),this.type="block",this.mustache=t,this.program=n,this.inverse=r,this.inverse&&!this.program&&(this.isInverse=!0)},Handlebars.AST.ContentNode=function(e){this
.type="content",this.string=e},Handlebars.AST.HashNode=function(e){this.type="hash",this.pairs=e},Handlebars.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];if(s===".."||s==="."||s==="this"){if(t.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);s===".."?n++:this.isScoped=!0}else t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=e.length===1&&!this.isScoped&&n===0,this.stringModeValue=this.string},Handlebars.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},Handlebars.AST.DataNode=function(e){this.type="DATA",this.id=e},Handlebars.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},Handlebars.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)},Handlebars.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue=e==="true"},Handlebars.AST.CommentNode=function(
e){this.type="comment",this.comment=e}}();var t=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(e){var n=Error.prototype.constructor.apply(this,arguments);for(var r=0;r<t.length;r++)this[t[r]]=n[t[r]]},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(e){this.string=e},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=/[&<>"'`]/g,n=/[&<>"'`]/,r=function(t){return e[t]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){return e instanceof Handlebars.SafeString?e.toString():e==null||e===!1?"":n.test(e)?e.replace(t,r):e},isEmpty:function(e){return!e&&e!==0?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(e,t){e.prototype={compiler:e,disassemble:function(){var e=this.opcodes
,t,n=[],r,i;for(var s=0,o=e.length;s<o;s++){t=e[s];if(t.opcode==="DECLARE")n.push("DECLARE "+t.name+"="+t.value);else{r=[];for(var u=0;u<t.args.length;u++)i=t.args[u],typeof i=="string"&&(i='"'+i.replace("\n","\\n")+'"'),r.push(i);n.push(t.opcode+" "+r.join(" "))}}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||r.args.length!==i.args.length)return!1;for(var s=0;s<r.args.length;s++)if(r.args[s]!==i.args[s])return!1}return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r]
,this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++,r;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var i=0,s=t.depths.list.length;i<s;i++){r=t.depths.list[i];if(r<2)continue;this.addDepth(r-1)}return n},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=this.classifyMustache(t);i==="helper"?this.helperMustache(t,n,r):i==="simple"?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,r),this.opcode("pushProgram",n),this.opcode("pushProgram",r),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("pushHash");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.
options.stringParams?this.opcode("pushStringParam",r.stringModeValue,r.type):this.accept(r),this.opcode("assignToHash",n[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);n==="simple"?this.simpleMustache(e):n==="helper"?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var r=e.id,i=r.parts[0],s=t!=null||n!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",i,s)},simpleMustache:function(e){var t=e.id;t.type==="DATA"?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext"
)),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",r.length,i);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+i);this.opcode("invokeHelper",r.length,i)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,r=e.parts.length;n<r;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value
:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this[n.type](n)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),r}};var n=function(e){this.value=e};t.prototype={nameLookup:function(e,n){return/^[0-9]+$/.test(n)?e+"["+n+"]":t.isValidJavaScriptVariableName
(n)?e+"."+n:e+"['"+n+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(o=i.length;this.i<o;this.i++)s=i[this.i],s.opcode==="DECLARE"?this[s.name]=s.value:this[s.opcode].apply(this,s.args);return this.createFunctionContext(r)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(!this.isChild){var t=this.
namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", "));if(!this.isChild)for(var n in this.context.aliases)this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var r=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,s=this.environment.depths.list.length;i<s;i++)r.push("depth"+this.environment.depths.list[i]);var o=this.mergeSource
();if(!this.isChild){var u=Handlebars.COMPILER_REVISION,a=Handlebars.REVISION_CHANGES[u];o="this.compilerInfo = ["+u+",'"+a+"'];\n"+o}if(e)return r.push(o),Function.apply(this,r);var f="function "+(this.name||"")+"("+r.join(",")+") {\n  "+o+"}";return Handlebars.log(Handlebars.logger.DEBUG,f+"\n\n"),f},mergeSource:function(){var e="",t;for(var n=0,r=this.source.length;n<r;n++){var i=this.source[n];i.appendToBuffer?t?t=t+"\n    + "+i.content:t=i.content:(t&&(e+="buffer += "+t+";\n  ",t=undefined),e+=i+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+
t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+
t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),typeof e=="string"?this.pushString(e):this.pushStackLiteral(e)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var e=this.hash;this.hash=undefined,this.options.stringParams&&this.register("hashTypes","{"+e.types.join(",")+"}"),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing"
;var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+r+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash
:function(e){var t=this.popStack(),n;this.options.stringParams&&(n=this.popStack(),this.popStack());var r=this.hash;n&&r.types.push("'"+e+"': "+n),r.values.push("'"+e+"': ("+t+")")},compiler:t,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler;var u=this.matchExistingProgram(r);u==null?(this.context.programs.push(""),u=this.context.programs.length,r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context),this.context.environments[u]=r):(r.index=u,r.name="program"+u)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){this.context.aliases.self="this";if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r,i=[t.index,t.name,"data"];for(var s=0,o=n.length;s<o;s++)r=n[s],r===1?i.push("depth0"):i.push("depth"+(r-1));return n.length===0?"self.program("+i.
join(", ")+")":(i.shift(),"self.programWithDepth("+i.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new n(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t="",r=this.isInline(),i;if(r){var s=this.popStack(!0);if(s instanceof n)i=s.value;else{var o=this.stackSlot?this.topStackName():this.incrStack();t="("+this.push(o)+" = "+s+"),",i=this.topStack()}}else i=this.topStack();var u=e.call(this,i);return r?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+t+u+")")):(/^stack/.test(i)||(i=this.nextStack()),this.source.push(i+" = ("+t+u+");")),i},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars
.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var i=e[t];i instanceof n?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();return!e&&r instanceof n?r.value:(t||this.stackSlot--,r)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,r=t[t.length-1];return!e&&r instanceof n?r.value:r},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t,n){var r=[];this.setupParams(e,r,n);var i=this.nameLookup("helpers",t,"helper");return{params:r,name:i,callParams:["depth0"].concat(r).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(
r).join(", ")}},setupParams:function(e,t,n){var r=[],i=[],s=[],o,u,a;r.push("hash:"+this.popStack()),u=this.popStack(),a=this.popStack();if(a||u)a||(this.context.aliases.self="this",a="self.noop"),u||(this.context.aliases.self="this",u="self.noop"),r.push("inverse:"+u),r.push("fn:"+a);for(var f=0;f<e;f++)o=this.popStack(),t.push(o),this.options.stringParams&&(s.push(this.popStack()),i.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+i.join(",")+"]"),r.push("types:["+s.join(",")+"]"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")}};var r="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield"
.split(" "),i=t.RESERVED_WORDS={};for(var s=0,o=r.length;s<o;s++)i[r[s]]=!0;t.isValidJavaScriptVariableName=function(e){return!t.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(e,t){if(!e||typeof e!="string"&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t);return(new Handlebars.JavaScriptCompiler).compile(r,t)},Handlebars.compile=function(e,t){function r(){var n=Handlebars.parse(e),r=(new Handlebars.Compiler).compile(n,t),i=(new Handlebars.JavaScriptCompiler).compile(r,t,undefined,!0);return Handlebars.template(i)}if(!e||typeof e!="string"&&e.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+
e);t=t||{},"data"in t||(t.data=!0);var n;return function(e,t){return n||(n=r()),n.call(this,e,t)}},Handlebars.VM={template:function(e){var t={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(e,t,n){var r=this.programs[e];return n?Handlebars.VM.program(t,n):r?r:(r=this.programs[e]=Handlebars.VM.program(t),r)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(n,r){r=r||{};var i=e.call(t,Handlebars,n,r.helpers,r.partials,r.data),s=t.compilerInfo||[],o=s[0]||1,u=Handlebars.COMPILER_REVISION;if(o!==u){if(o<u){var a=Handlebars.REVISION_CHANGES[u],f=Handlebars.REVISION_CHANGES[o];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+f+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+
s[1]+")."}return i}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(e,t,n,r,i,s){var o={helpers:r,partials:i,data:s};if(e===undefined)throw new Handlebars.Exception("The partial "+t+" could not be found");if(e instanceof Function)return e(n,o);if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+t+" could not be compiled when running in runtime-only mode");return i[t]=Handlebars.compile(e,{data:s!==undefined}),i[t](n,o)}},Handlebars.template=Handlebars.VM.template,define("Handlebars",function(e){return function(){var t,n;return t||e.Handlebars}}(this)),define("hbs",[],function(){return{get:function(){return Handlebars},write:function(e,t,n){if(t+customNameExtension in buildMap){var r=buildMap[t+customNameExtension];n.asModule(e+"!"+t,r)}},version
:"0.4.0",load:function(e,t,n,r){}}}),define("hbs!templates/dialogs/connectivity_issue",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i;return r+="\n    <li><strong>Exception:</strong> ",(i=n.exception)?i=i.call(e,{hash:{}}):(i=e.exception,i=typeof i===u?i.apply(e):i),r+=a(i)+"</li>\n    ",r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression,f=this;s+='<div title="Connectivity Error">\n  <p>Unable to contact the server, please make sure you\'re connected to the Internet.</p>\n  <hr />\n  <p>Technical error information:</p>\n  <ul>\n    <li><strong>Status code:</strong> ',(o=n.status)?o=o.call(t,{hash:{}}):(o=t.status,o=typeof o===u?o.apply(t):o),s+=a(o)+"</li>\n    <li><strong>Message:</strong> ",(o=n.statusText)?o=o.call(t,{hash:{}}):(o=t.statusText,o=typeof o===u?o.apply(t):o),s+=a(o)+"</li>\n    ",o=n["if"].call(t,t.exception,{hash:{},inverse:f.noop,fn:f.program(1,l,i)});if(o||o===0)s+=
o;return s+="\n  </ul>\n</div>",s});return t.registerPartial("templates_dialogs_connectivity_issue",n),n}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s,o,u,a;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,o=this.options.trigger.split(" ");for(a=o.length;a--;)u=o[a],u=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):u!="manual"&&(i=u=="hover"?"mouseenter":"focus",s=u=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+
this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var t,n,r,i,s,o,u=e.Event("show");if(this.hasContent()&&this.enabled){this.$element
.trigger(u);if(u.isDefaultPrevented())return;t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),r=t[0].offsetWidth,i=t[0].offsetHeight;switch(s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}this.applyPlacement(o,s),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,s,o,u,a;n.offset(e).addClass(t).addClass("in"),s=n[0].offsetWidth,o=n[0].offsetHeight,t=="top"&&o!=i&&(e.top=e.top+i-o,a=!0),t=="bottom"||t=="top"?(u=0,e.left<0&&(u=
e.left*-2,e.left=0,n.offset(e),s=n[0].offsetWidth,o=n[0].offsetHeight),this.replaceArrow(u-r+s,s,"left")):this.replaceArrow(o-i,o,"top"),a&&n.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function i(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var t=this,n=this.tip(),r=e.Event("hide");this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i():n.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this
.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(
n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=
(typeof n.content=="function"?n.content.call(t[0]):n.content)||t.attr("data-content"),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){
setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load"
,function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults=
{loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")});var r=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};r.prototype={constructor:r,select:function(){var e=this.$menu.find(".active"),t=e.attr("data-value");return this.$element.val(this.updater(t,e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top
:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this.options.on_hide&&this.options.on_hide(),this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return this.options.label_extractor&&(e=this.options.label_extractor(e)),~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift()){var s=i;this.options.label_extractor&&(s=this.options.label_extractor(i)),s.toLowerCase().indexOf(this.query.toLowerCase())?~s.indexOf(this.query)?n.push(i):r.push(i):t.push(i)}return t
.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){var i=r,s=e(n.options.item);return n.options.formatter&&n.options.formatter(r,s),n.options.label_extractor&&(i=n.options.label_extractor(r)),t=s.attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.
eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t=typeof this.$element[e]=="function"),t},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown){this.options.on_escape&&this.options.on_escape();return}this.hide();break;default:
this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(e){this.focused=!0},blur:function(e){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(t){return this.each(function(){var n=e(this),i=n.data("typeahead"),s=typeof t=="object"&&t;i||n.data("typeahead",i=new r(this,s)),typeof t=="string"&&i[t]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=r,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e
(this);if(n.data("typeahead"))return;n.typeahead(n.data())})}(window.jQuery),define("bootstrap",["jquery"],function(){}),shortcut={all_shortcuts:{},add:function(e,t,n){var r={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(!n)n=r;else for(var i in r)typeof n[i]=="undefined"&&(n[i]=r[i]);var s=n.target;typeof n.target=="string"&&(s=document.getElementById(n.target));var o=this,u=n.context;e=e.toLowerCase();var a=function(r){r=r||window.event;if(n.disable_in_input){var i;r.target?i=r.target:r.srcElement&&(i=r.srcElement),i.nodeType==3&&(i=i.parentNode);if(i.tagName=="INPUT"||i.tagName=="TEXTAREA")return}r.keyCode?code=r.keyCode:r.which&&(code=r.which);var s=String.fromCharCode(code).toLowerCase();code==188&&(s=","),code==190&&(s=".");var o=e.split("+"),a=0,f={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},l={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,
scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},c={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};r.ctrlKey&&(c.ctrl.pressed=!0),r.shiftKey&&(c.shift.pressed=!0),r.altKey&&(c.alt.pressed=!0),r.metaKey&&(c.meta.pressed=!0);for(var h=0;k=o[h],h<o.length;h++)k=="ctrl"||k=="control"?(a++,c.ctrl.wanted=!0):k=="shift"?(a++,c.shift.wanted=!0):k=="alt"?(a++,c.alt.wanted=!0):k=="meta"?(a++,c.meta.wanted=!0):k.length>1?l[k]==code&&a++:n.keycode?n["keycode"]==code&&a++:s==k?a++:f[s]&&r.shiftKey&&(s=f[s],s==k&&a++);if(a==o.length&&c.ctrl.pressed==c.ctrl.wanted&&c.shift.pressed==c.shift.wanted&&c.alt.pressed==c.alt.wanted&&c.meta.pressed==c.meta.
wanted){u?t.apply(u,arguments):t(r);if(!n.propagate)return r.cancelBubble=!0,r.returnValue=!1,r.stopPropagation&&(r.stopPropagation(),r.preventDefault()),!1}};this.all_shortcuts[e]=this.all_shortcuts[e]||[],this.all_shortcuts[e].push({callback:a,implicit_callback:t,target:s,event:n.type}),s.addEventListener?s.addEventListener(n.type,a,!1):s.attachEvent?s.attachEvent("on"+n.type,a):s["on"+n.type]=a},remove:function(e,t){e=e.toLowerCase();var n=this.all_shortcuts[e];if(!t)while(this.all_shortcuts[e].length>0)this.remove(e,this.all_shortcuts[e][0].implicit_callback);else{var r=null,i=-1;for(var s=0;s<n.length;++s)if(n[s].implicit_callback==t){r=n[s],i=s;break}if(!r)return console.log("[shortcut.js]: error, no such callback to unbind from key combination: "+e),!1;delete this.all_shortcuts[e][i],this.all_shortcuts[e].splice(i,1)}if(!r)return;var o=r.event,u=r.target,t=r.callback;u.detachEvent?u.detachEvent("on"+o,t):u.removeEventListener?u.removeEventListener(o,t,!1):u["on"+o]=!1}},define("shortcut"
,function(e){return function(){var t,n;return t||e.shortcut}}(this)),function(e,t){function n(t,n){var i,s,o,u=t.nodeName.toLowerCase();return"area"===u?(i=t.parentNode,s=i.name,!t.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+s+"]")[0],!!o&&r(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&r(t)}function r(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var i=0,s=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.10.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus
(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++i)})},removeUniqueId:function(){return this.each(
function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),i&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?u["outer"+
r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;
for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype
[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r
,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this
.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options
[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof 
o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=
n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"
))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"
),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math
.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function n(e,t,n){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?n/100:1)]}function r(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,o=Math.max,u=Math.abs,a=Math.round,f=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,d=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t
)return s;var n,r,i=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return e("body").append(i),n=o.offsetWidth,i.css("overflow","scroll"),r=o.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),s=n-r},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return d.apply(this,arguments);t=e.extend({},t);var s,p,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo
(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=i(b),b[0].preventDefault&&(t.at="left top"),p=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=f.test(e[0])?e.concat(["center"]):l.test(e[0])?["center"].concat(e):["center","center"]),e[0]=f.test(e[0])?e[0]:"center",e[1]=l.test(e[1])?e[1]:"center",n=c.exec(e[0]),r=c.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[h.exec(e[0])[0],h.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=p:t.at[0]==="center"&&(g.left+=p/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),s=n(x.at,p,v),g.left+=s[0],g.top+=s[1],this.each(function(){var i,f,l=e(this),c=l.outerWidth(),h=l.outerHeight(),d=r(this,"marginLeft"),y=r(this,"marginTop"),T=c+d+r(this,"marginRight")+E.width,N=h+y+r(this,"marginBottom")+E.height,C=e.extend({},g),k=n(x.my,l.outerWidth(),l.outerHeight());t.my[0]==="right"?C.left-=c:t.my[0]==="center"&&
(C.left-=c/2),t.my[1]==="bottom"?C.top-=h:t.my[1]==="center"&&(C.top-=h/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=a(C.left),C.top=a(C.top)),i={marginLeft:d,marginTop:y},e.each(["left","top"],function(n,r){e.ui.position[S[n]]&&e.ui.position[S[n]][r](C,{targetWidth:p,targetHeight:v,elemWidth:c,elemHeight:h,collisionPosition:i,collisionWidth:T,collisionHeight:N,offset:[s[0]+k[0],s[1]+k[1]],my:t.my,at:t.at,within:w,elem:l})}),t.using&&(f=function(e){var n=m.left-C.left,r=n+p-c,i=m.top-C.top,s=i+v-h,a={target:{element:b,left:m.left,top:m.top,width:p,height:v},element:{element:l,left:C.left,top:C.top,width:c,height:h},horizontal:r<0?"left":n>0?"right":"center",vertical:s<0?"top":i>0?"bottom":"middle"};p<c&&u(n+r)<p&&(a.horizontal="center"),v<h&&u(i+s)<v&&(a.vertical="middle"),o(u(n),u(r))>o(u(i),u(s))?a.important="horizontal":a.important="vertical",t.using.call(this,e,a)}),l.offset(e.extend(C,{using:f}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,r=n.isWindow?
n.scrollLeft:n.offset.left,i=n.width,s=e.left-t.collisionPosition.marginLeft,u=r-s,a=s+t.collisionWidth-i-r,f;t.collisionWidth>i?u>0&&a<=0?(f=e.left+u+t.collisionWidth-i-r,e.left+=u-f):a>0&&u<=0?e.left=r:u>a?e.left=r+i-t.collisionWidth:e.left=r:u>0?e.left+=u:a>0?e.left-=a:e.left=o(e.left-s,e.left)},top:function(e,t){var n=t.within,r=n.isWindow?n.scrollTop:n.offset.top,i=t.within.height,s=e.top-t.collisionPosition.marginTop,u=r-s,a=s+t.collisionHeight-i-r,f;t.collisionHeight>i?u>0&&a<=0?(f=e.top+u+t.collisionHeight-i-r,e.top+=u-f):a>0&&u<=0?e.top=r:u>a?e.top=r+i-t.collisionHeight:e.top=r:u>0?e.top+=u:a>0?e.top-=a:e.top=o(e.top-s,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,i=n.width,s=n.isWindow?n.scrollLeft:n.offset.left,o=e.left-t.collisionPosition.marginLeft,a=o-s,f=o+t.collisionWidth-i-s,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+
l+c+h+t.collisionWidth-i-r;if(p<0||p<u(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-s;if(d>0||u(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,i=n.height,s=n.isWindow?n.scrollTop:n.offset.top,o=e.top-t.collisionPosition.marginTop,a=o-s,f=o+t.collisionHeight-i-s,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-i-r,e.top+c+h+p>a&&(v<0||v<u(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-s,e.top+c+h+p>f&&(d>0||u(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=
document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css
("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager
.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash
();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];while(n&&(n=n.parentNode))n===document&&(i=!0);return!i&&this.options.helper==="original"?!1:(this.options.revert==="invalid"&&!s||this.options.revert==="valid"&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e
("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&
(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:
e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[i.containment==="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment==="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment==="document"?0:e(window).scrollLeft
())+e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?0:e(window).scrollTop())+(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(i.containment)&&i.containment.constructor!==Array){n=e(i.containment),r=n[0];if(!r)return;t=e(r).css("overflow")!=="hidden",this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"
),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else i.containment.constructor===Array&&(this.containment=i.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName)
,f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s))
,{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element
});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click
,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset
.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this
).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent
[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(
function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(!(u-v<m&&m<a+v&&f-v<y&&y<l+v||u-v<m&&m<a+v&&f-v<b&&b<l+v||u-v<g&&g<a+v&&f-v<y&&y<l+v||u-v<g&&g<a+v&&f-v<b&&b<l+v)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0})
.top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements
[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+r.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(
){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options
.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect
(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||
e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(
t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.
data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass
("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this
.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this
.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass
("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left"
)}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t)
{var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0
],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t
),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/
.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy
:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},
ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition
.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f
.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.
left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(
this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(
e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition
,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element
[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each
(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===
r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){
var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect"
,zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static"
)return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this
.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this
.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent
[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px"
;for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent
[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition
.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"
]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&
(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.
push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(
t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder
,r.placeholder={element:function(){var r=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(r.style.visibility="hidden"),r},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c=null,h=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(c&&e.contains(this
.containers[n].element[0],c.element[0]))continue;c=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{i=1e4,s=null,o=this.containers[h].floating?"left":"top",u=this.containers[h].floating?"width":"height",a=this.positionAbs[o]+this.offset.click[o];for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[h].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;f=this.items[r].item.offset()[o],l=!1,Math.abs(f-a)>Math.abs(f+this.items[r][u]-a)&&(l=!0,f+=this.items[r][u]),Math.abs(f-a)<i&&(i=Math.abs(f-a),s=this.items[r],this.direction=l?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],s?this._rearrange(t,s,null,!0):this._rearrange(t,null
,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper
:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}}
,_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document
:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this
.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment
[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop
()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)if(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static")this._storedCSS[r]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this
.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity"
,this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{version
:"1.10.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r,i=this.element[0].nodeName.toLowerCase(),s=i==="textarea",o=i==="input";this.isMultiLine=s?!0:o?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this
.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault
(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this
.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof 
this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!
this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(
e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults
:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.1",defaultElement:"<button>",options:{disabled:
null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation
())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled
)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']"
,this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled"
);t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+
r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right"
:"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.1",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart
:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this
.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){var t=this;if(this._isOpen
){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this
._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=
e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)||e.isArray(n)&&!n.length){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i
,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,i){e(this).addClass("ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",r,t(i))},drag:function(e,r){n._trigger("drag",e,t(r))},stop:function(i,s){r.position=[s.position.left-n.document.scrollLeft(),s.position.top-n.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",i,t(s))}})},_makeResizable:function(){function t(e){return{
originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,r=this.options,i=r.resizable,s=this.uiDialog.css("position"),o=typeof i=="string"?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:r.maxWidth,maxHeight:r.maxHeight,minWidth:r.minWidth,minHeight:this._minHeight(),handles:o,start:function(r,i){e(this).addClass("ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",r,t(i))},resize:function(e,r){n._trigger("resize",e,t(r))},stop:function(i,s){r.height=e(this).height(),r.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",i,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this
.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this
.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_createOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog"
,function(t){!e(t.target).closest(".ui-dialog").length&&!e(t.target).closest(".ui-datepicker").length&&(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1])
,at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})}(jQuery),function(e,t){e.widget("ui.menu",{version:"1.10.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a"
:function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})
},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var r,i,s,o,u,a=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage
(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:a=!1,i=this.previousFilter||"",s=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),s===i?o=!0:s=i+s,u=new RegExp("^"+n(s),"i"),r=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(e(this).children("a").text())}),r=o&&r.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):r,r.length||(s=String.fromCharCode(t.keyCode),u=new RegExp("^"+n(s),"i"),r=this.activeMenu.children(".ui-menu-item").filter(function(){return u.test(e(this).children("a").text())})),r.length?(
this.focus(t,r),r.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}a&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex
:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.
length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu"
)).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last"
,e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this
.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.1",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all"
).removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate"
,this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),jQuery.effects||function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function n(e,t,n){var r=l[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function r(t){var n=a(),r=n._rgba=[];return t=t.toLowerCase(),d(u,function(e,i){var s,o=i.re.exec(t),u=o&&i.parse(o),a=i.space||"rgba";if(u)return s=n[a](u),n[f[a].cache]=s[f[a].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,p.transparent),n):p[t]}function i(e,t,n){return n=(
n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",o=/^([\-+])=\s*(\d+\.?\d*)/,u=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100
,e[4]]}}],a=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},f={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},c=a.support={},h=e("<p>")[0],p,d=e.each;h.style.cssText="background-color:rgba(1,1,1,.5)",c.rgba=h.style.backgroundColor.indexOf("rgba")>-1,d(f,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),a.fn=e.extend(a.prototype,{parse:function(i,s,o,u){if(i===t)return this._rgba=[null,null,null,null],this;if(i.jquery||i.nodeType)i=e(i).css(s),s=t;var l=this,c=e.type(i),h=this._rgba=[];s!==t&&(i=[i,s,o,u],c="array");if(c==="string")return this.parse(r(i)||p._default);if(c==="array")return d(f.rgba.props,function(e,t){h[t.idx]=n(i[t.idx],t)}),this;if(c==="object")return i instanceof a?d(f,function(e,t){i[t.cache]&&(l[t.cache]=i[
t.cache].slice())}):d(f,function(t,r){var s=r.cache;d(r.props,function(e,t){if(!l[s]&&r.to){if(e==="alpha"||i[e]==null)return;l[s]=r.to(l._rgba)}l[s][t.idx]=n(i[e],t,!0)}),l[s]&&e.inArray(null,l[s].slice(0,3))<0&&(l[s][3]=1,r.from&&(l._rgba=r.from(l[s])))}),this},is:function(e){var t=a(e),n=!0,r=this;return d(f,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],d(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return d(f,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var r=a(e),i=r._space(),s=f[i],o=this.alpha()===0?a("transparent"):this,u=o[s.cache]||s.to(o._rgba),c=u.slice();return r=r[s.cache],d(s.props,function(e,i){var s=i.idx,o=u[s],a=r[s],f=l[i.type]||{};if(a===null)return;o===null?c[s]=a:(f.mod&&(a-o>f.mod/2?o+=f.mod:o-a>f.mod/2&&(o-=f.mod)),c[s]=n((a-o)*t+o,i))}),this[i](c)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop
(),i=a(t)._rgba;return a(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),a.fn.parse.prototype=a.fn,f.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math
.round(l)%360,c,f,i==null?1:i]},f.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],s=e[3],o=r<=.5?r*(1+n):r+n-r*n,u=2*r-o;return[Math.round(i(u,o,t+1/3)*255),Math.round(i(u,o,t)*255),Math.round(i(u,o,t-1/3)*255),s]},d(f,function(r,i){var s=i.props,u=i.cache,f=i.to,l=i.from;a.fn[r]=function(r){f&&!this[u]&&(this[u]=f(this._rgba));if(r===t)return this[u].slice();var i,o=e.type(r),c=o==="array"||o==="object"?r:arguments,h=this[u].slice();return d(s,function(e,t){var r=c[o==="object"?e:t.idx];r==null&&(r=h[t.idx]),h[t.idx]=n(r,t)}),l?(i=a(l(h)),i[u]=h,i):a(h)},d(s,function(t,n){if(a.fn[t])return;a.fn[t]=function(i){var s=e.type(i),u=t==="alpha"?this._hsla?"hsla":"rgba":r,a=this[u](),f=a[n.idx],l;return s==="undefined"?f:(s==="function"&&(i=i.call(this,f),s=e.type(i)),i==null&&n.empty?this:(s==="string"&&(l=o.exec(i),l&&(i=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[n.idx]=i,this[u](a)))}})}),a.hook=function(t){var n=t.split(" "
);d(n,function(t,n){e.cssHooks[n]={set:function(t,i){var s,o,u="";if(i!=="transparent"&&(e.type(i)!=="string"||(s=r(i)))){i=a(s||i);if(!c.rgba&&i._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}i=i.blend(u&&u!=="transparent"?u:"_default")}i=i.toRgbaString()}try{t.style[n]=i}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=a(t.elem,n),t.end=a(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},a.hook(s),e.cssHooks.borderColor={expand:function(e){var t={};return d(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},p=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default
:"#ffffff"}}(jQuery),function(){function n(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function r(t,n){var r={},i,o;for(i in n)o=n[i],t[i]!==o&&!s[i]&&(e.fx.step[i]||!isNaN(parseFloat(o)))&&(r[i]=o);return r}var i=["add","remove","toggle"],s={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,s,o,u){var a=e.speed(s,o,u);return this.queue(function(
){var s=e(this),o=s.attr("class")||"",u,f=a.children?s.find("*").addBack():s;f=f.map(function(){var t=e(this);return{el:t,start:n(this)}}),u=function(){e.each(i,function(e,n){t[n]&&s[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=n(this.el[0]),this.diff=r(this.start,this.end),this}),s.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(s[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return arguments.length>1?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass.apply(this,arguments)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r
,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.1",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i)
)},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],
function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function t(t){function r(){e.isFunction(s)&&s.call(i[0]),e.isFunction(t)&&t()}var i=e(this),s=n.complete,u=n.mode;(i.is(":hidden")?u==="hide":u==="show")?r():o.call(i[0],n,r)}var n=r.apply(this,arguments),i=n.mode,s=n.queue,o=e.effects.effect[n.effect];return e.fx.off||!o?i?this[i](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(t):this.queue(s||"fx",t)},_show:e.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=r.apply(this
,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(i(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(i(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/
Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery),function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore
(s,o),e.effects.removeWrapper(s),i()}})}}(jQuery),function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}}(jQuery),function(e,t){e.effects.effect
.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity"
,0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&
r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),define("jquery.ui",function(){}),window.Modernizr=function(e,t,n){function A(e){f.cssText=e}function O(e,t){return A(p.join(e+";")+(t||""))}function M(e,t){return typeof e===t}function _(e,t){return!!~(""+e).indexOf(t)}function D(e,t){for(var r in e){var i=e[r];if(!_(i,"-")&&f[i]!==n)return t=="pfx"?i:!0}return!1}function P(e,t,r){for(var i in e){var s=t[e[i]];if(s!==n)return r===!1?e[i]:M(s,"function")?s.bind(r||t):s}return!1}function H(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+v.join(r+" ")+r).split(" ");return M(t,"string")||M(t,"undefined")?D(i,t):(i=(e+" "+m.join(r+" ")+r).split(" "),P(i,t,n))}function B(){i.input=function(n){for(var r=0,i=n.length;r<i;r++)w[n[r]]=n[r]in l;return w.list&&(w.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),w}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),i.inputtypes=function(e){for(var r=0,i,s,u,a=e
.length;r<a;r++)l.setAttribute("type",s=e[r]),i=l.type!=="text",i&&(l.value=c,l.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&l.style.WebkitAppearance!==n?(o.appendChild(l),u=t.defaultView,i=u.getComputedStyle&&u.getComputedStyle(l,null).WebkitAppearance!=="textfield"&&l.offsetHeight!==0,o.removeChild(l)):/^(search|tel)$/.test(s)||(/^(url|email)$/.test(s)?i=l.checkValidity&&l.checkValidity()===!1:i=l.value!=c)),b[e[r]]=!!i;return b}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var r="2.6.1",i={},s=!0,o=t.documentElement,u="modernizr",a=t.createElement(u),f=a.style,l=t.createElement("input"),c=":)",h={}.toString,p=" -webkit- -moz- -o- -ms- ".split(" "),d="Webkit Moz O ms",v=d.split(" "),m=d.toLowerCase().split(" "),g={svg:"http://www.w3.org/2000/svg"},y={},b={},w={},E=[],S=E.slice,x,T=function(e,n,r,i){var s,a,f,l=t.createElement("div"),c=t.body,h=c?c:t.createElement("body");if(parseInt(r,10))while(r--)f=t.createElement
("div"),f.id=i?i[r]:u+(r+1),l.appendChild(f);return s=["&#173;",'<style id="s',u,'">',e,"</style>"].join(""),l.id=u,(c?l:h).innerHTML+=s,h.appendChild(l),c||(h.style.background="",o.appendChild(h)),a=n(l,e),c?l.parentNode.removeChild(l):h.parentNode.removeChild(h),!!a},N=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return T("@media "+t+" { #"+u+" { position: absolute; } }",function(t){r=(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle)["position"]=="absolute"}),r},C=function(){function r(r,i){i=i||t.createElement(e[r]||"div"),r="on"+r;var s=r in i;return s||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(r,""),s=M(i[r],"function"),M(i[r],"undefined")||(i[r]=n),i.removeAttribute(r))),i=null,s}var e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return r}(),k={}.hasOwnProperty,L;!M(k,"undefined")&&!M(k.call,"undefined")?L=function(e,t){return k.call(e,t
)}:L=function(e,t){return t in e&&M(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError;var r=S.call(arguments,1),i=function(){if(this instanceof i){var e=function(){};e.prototype=n.prototype;var s=new e,o=n.apply(s,r.concat(S.call(arguments)));return Object(o)===o?o:s}return n.apply(t,r.concat(S.call(arguments)))};return i}),y.flexbox=function(){return H("flexWrap")},y.flexboxlegacy=function(){return H("boxDirection")},y.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},y.canvastext=function(){return!!i.canvas&&!!M(t.createElement("canvas").getContext("2d").fillText,"function")},y.webgl=function(){return!!e.WebGLRenderingContext},y.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",p.join("touch-enabled),("),u,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=
e.offsetTop===9}),n},y.geolocation=function(){return"geolocation"in navigator},y.postmessage=function(){return!!e.postMessage},y.websqldatabase=function(){return!!e.openDatabase},y.indexedDB=function(){return!!H("indexedDB",e)},y.hashchange=function(){return C("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},y.history=function(){return!!e.history&&!!history.pushState},y.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},y.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},y.rgba=function(){return A("background-color:rgba(150,255,150,.5)"),_(f.backgroundColor,"rgba")},y.hsla=function(){return A("background-color:hsla(120,40%,100%,.5)"),_(f.backgroundColor,"rgba")||_(f.backgroundColor,"hsla")},y.multiplebgs=function(){return A("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(f.background)},y.backgroundsize=function(){return H("backgroundSize")},y.borderimage=function(){return H
("borderImage")},y.borderradius=function(){return H("borderRadius")},y.boxshadow=function(){return H("boxShadow")},y.textshadow=function(){return t.createElement("div").style.textShadow===""},y.opacity=function(){return O("opacity:.55"),/^0.55$/.test(f.opacity)},y.cssanimations=function(){return H("animationName")},y.csscolumns=function(){return H("columnCount")},y.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return A((e+"-webkit- ".split(" ").join(t+e)+p.join(n+e)).slice(0,-e.length)),_(f.backgroundImage,"gradient")},y.cssreflections=function(){return H("boxReflect")},y.csstransforms=function(){return!!H("transform")},y.csstransforms3d=function(){var e=!!H("perspective");return e&&"webkitPerspective"in o.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},y.csstransitions=
function(){return H("transition")},y.fontface=function(){var e;return T('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),s=i.sheet||i.styleSheet,o=s?s.cssRules&&s.cssRules[0]?s.cssRules[0].cssText:s.cssText||"":"";e=/src/i.test(o)&&o.indexOf(r.split(" ")[0])===0}),e},y.generatedcontent=function(){var e;return T(['#modernizr:after{content:"',c,'";visibility:hidden}'].join(""),function(t){e=t.offsetHeight>=1}),e},y.video=function(){var e=t.createElement("video"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(r){}return n},y.audio=function(){var e=t.createElement("audio"),n=!1;try{if(n=!!e.canPlayType)n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;"
).replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(r){}return n},y.localstorage=function(){try{return localStorage.setItem(u,u),localStorage.removeItem(u),!0}catch(e){return!1}},y.sessionstorage=function(){try{return sessionStorage.setItem(u,u),sessionStorage.removeItem(u),!0}catch(e){return!1}},y.webworkers=function(){return!!e.Worker},y.applicationcache=function(){return!!e.applicationCache},y.svg=function(){return!!t.createElementNS&&!!t.createElementNS(g.svg,"svg").createSVGRect},y.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==g.svg},y.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(h.call(t.createElementNS(g.svg,"animate")))},y.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(h.call(t.createElementNS(g.svg,"clipPath")))};for(var j in y)L(y,j)&&(x=j.toLowerCase
(),i[x]=y[j](),E.push((i[x]?"":"no-")+x));return i.input||B(),i.addTest=function(e,t){if(typeof e=="object")for(var r in e)L(e,r)&&i.addTest(r,e[r]);else{e=e.toLowerCase();if(i[e]!==n)return i;t=typeof t=="function"?t():t,s&&(o.className+=" "+(t?"":"no-")+e),i[e]=t}return i},A(""),a=l=null,function(e,t){function l(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function c(){var e=g.elements;return typeof e=="string"?e.split(" "):e}function h(e){var t=a[e[o]];return t||(t={},u++,e[o]=u,a[u]=t),t}function p(e,n,s){n||(n=t);if(f)return n.createElement(e);s||(s=h(n));var o;return s.cache[e]?o=s.cache[e].cloneNode():i.test(e)?o=(s.cache[e]=s.createElem(e)).cloneNode():o=s.createElem(e),o.canHaveChildren&&!r.test(e)?s.frag.appendChild(o):o}function d(e,n){e||(e=t);if(f)return e.createDocumentFragment();n=n||h(e);var r=n.frag.cloneNode(),i=0,s=c(),o=s.length;for(;i<o;i++)r
.createElement(s[i]);return r}function v(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?p(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+c().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function m(e){e||(e=t);var n=h(e);return g.shivCSS&&!s&&!n.hasCSS&&(n.hasCSS=!!l(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),f||v(e,n),e}var n=e.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,i=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,s,o="_html5shiv",u=0,a={},f;(function(
){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,f=e.childNodes.length==1||function(){t.createElement("a");var e=t.createDocumentFragment();return typeof e.cloneNode=="undefined"||typeof e.createDocumentFragment=="undefined"||typeof e.createElement=="undefined"}()}catch(n){s=!0,f=!0}})();var g={elements:n.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:n.shivCSS!==!1,supportsUnknownElements:f,shivMethods:n.shivMethods!==!1,type:"default",shivDocument:m,createElement:p,createDocumentFragment:d};e.html5=g,m(t)}(this,t),i._version=r,i._prefixes=p,i._domPrefixes=m,i._cssomPrefixes=v,i.mq=N,i.hasEvent=C,i.testProp=function(e){return D([e])},i.testAllProps=H,i.testStyles=T,i.prefixed=function(e,t,n){return t?H(e,t,n):H(e,"pfx")},o.className=o.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(s?" js "+E.join(" "):""),i}(this,this.document),define("modernizr"
,function(){}),function(e){var t=function(e,t){typeof t=="undefined"&&(t={}),this.init(e,t)},n=t.prototype,r,i=["canvas","vml"],s=["oval","spiral","square","rect","roundRect"],o=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,u=navigator.appVersion.indexOf("MSIE")!==-1&&parseFloat(navigator.appVersion.split("MSIE")[1])===8?!0:!1,a=!!document.createElement("canvas").getContext,f=!0,l=function(e,t,n){var e=document.createElement(e),r;for(r in n)e[r]=n[r];return typeof t!="undefined"&&t.appendChild(e),e},c=function(e,t){for(var n in t)e.style[n]=t[n];return e},h=function(e,t){for(var n in t)e.setAttribute(n,t[n]);return e},p=function(e,t,n,r){e.save(),e.translate(t,n),e.rotate(r),e.translate(-t,-n),e.beginPath()};n.init=function(e,n){typeof n.safeVML=="boolean"&&(f=n.safeVML);try{this.mum=document.getElementById(e)!==void 0?document.getElementById(e):document.body}catch(s){this.mum=document.body}n.id=typeof n.id!="undefined"?n.id:"canvasLoader",this.cont=l("div",this.mum,{id:n.id});if(a)r=i[0],this.
can=l("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=c(l("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{r=i[1];if(typeof t.vmlSheet=="undefined"){document.getElementsByTagName("head")[0].appendChild(l("style")),t.vmlSheet=document.styleSheets[document.styleSheets.length-1];var o=["group","oval","roundrect","fill"],u;for(u in o)t.vmlSheet.addRule(o[u],"behavior:url(#default#VML); position:absolute;")}this.vml=l("group",this.cont)}this.setColor(this.color),this.draw(),c(this.cont,{display:"none"})},n.cont={},n.can={},n.con={},n.cCan={},n.cCon={},n.timer={},n.activeId=0,n.diameter=40,n.setDiameter=function(e){this.diameter=Math.round(Math.abs(e)),this.redraw()},n.getDiameter=function(){return this.diameter},n.cRGB={},n.color="#000000",n.setColor=function(e){this.color=o.test(e)?e:"#000000",this.cRGB=this.getRGB(this.color),this.redraw()},n.getColor=function(){return this.color},n.shape=s[0],n.setShape=function(e){for(var t in s)if(e===s[t]
){this.shape=e,this.redraw();break}},n.getShape=function(){return this.shape},n.density=40,n.setDensity=function(e){this.density=f&&r===i[1]?Math.round(Math.abs(e))<=40?Math.round(Math.abs(e)):40:Math.round(Math.abs(e)),this.density>360&&(this.density=360),this.activeId=0,this.redraw()},n.getDensity=function(){return this.density},n.range=1.3,n.setRange=function(e){this.range=Math.abs(e),this.redraw()},n.getRange=function(){return this.range},n.speed=2,n.setSpeed=function(e){this.speed=Math.round(Math.abs(e))},n.getSpeed=function(){return this.speed},n.fps=24,n.setFPS=function(e){this.fps=Math.round(Math.abs(e)),this.reset()},n.getFPS=function(){return this.fps},n.getRGB=function(e){return e=e.charAt(0)==="#"?e.substring(1,7):e,{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},n.draw=function(){var e=0,t,n,o,a,f,d,v,g=this.density,y=Math.round(g*this.range),b,w,E=0;w=this.cCon;var S=this.diameter;if(r===i[0]){w.clearRect(0,0,1e3,1e3),h(this
.can,{width:S,height:S});for(h(this.cCan,{width:S,height:S});e<g;){b=e<=y?1-1/y*e:b=0,d=270-360/g*e,v=d/180*Math.PI,w.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+b.toString()+")";switch(this.shape){case s[0]:case s[1]:t=S*.07,a=S*.47+Math.cos(v)*(S*.47-t)-S*.47,f=S*.47+Math.sin(v)*(S*.47-t)-S*.47,w.beginPath(),this.shape===s[1]?w.arc(S*.5+a,S*.5+f,t*b,0,Math.PI*2,!1):w.arc(S*.5+a,S*.5+f,t,0,Math.PI*2,!1);break;case s[2]:t=S*.12,a=Math.cos(v)*(S*.47-t)+S*.5,f=Math.sin(v)*(S*.47-t)+S*.5,p(w,a,f,v),w.fillRect(a,f-t*.5,t,t);break;case s[3]:case s[4]:n=S*.3,o=n*.27,a=Math.cos(v)*(o+(S-o)*.13)+S*.5,f=Math.sin(v)*(o+(S-o)*.13)+S*.5,p(w,a,f,v),this.shape===s[3]?w.fillRect(a,f-o*.5,n,o):(t=o*.55,w.moveTo(a+t,f-o*.5),w.lineTo(a+n-t,f-o*.5),w.quadraticCurveTo(a+n,f-o*.5,a+n,f-o*.5+t),w.lineTo(a+n,f-o*.5+o-t),w.quadraticCurveTo(a+n,f-o*.5+o,a+n-t,f-o*.5+o),w.lineTo(a+t,f-o*.5+o),w.quadraticCurveTo(a,f-o*.5+o,a,f-o*.5+o-t),w.lineTo(a,f-o*.5+t),w.quadraticCurveTo(a,f-o*.5,a+t,f-
o*.5))}w.closePath(),w.fill(),w.restore(),++e}}else{c(this.cont,{width:S,height:S}),c(this.vml,{width:S,height:S});switch(this.shape){case s[0]:case s[1]:v="oval",t=140;break;case s[2]:v="roundrect",t=120;break;case s[3]:case s[4]:v="roundrect",t=300}n=o=t,a=500-o;for(f=-o*.5;e<g;){b=e<=y?1-1/y*e:b=0,d=270-360/g*e;switch(this.shape){case s[1]:n=o=t*b,a=500-t*.5-t*b*.5,f=(t-t*b)*.5;break;case s[0]:case s[2]:u&&(f=0,this.shape===s[2]&&(a=500-o*.5));break;case s[3]:case s[4]:n=t*.95,o=n*.28,u?(a=0,f=500-o*.5):(a=500-n,f=-o*.5),E=this.shape===s[4]?.6:0}w=h(c(l("group",this.vml),{width:1e3,height:1e3,rotation:d}),{coordsize:"1000,1000",coordorigin:"-500,-500"}),w=c(l(v,w,{stroked:!1,arcSize:E}),{width:n,height:o,top:f,left:a}),l("fill",w,{color:this.color,opacity:b}),++e}}this.tick(!0)},n.clean=function(){if(r===i[0])this.con.clearRect(0,0,1e3,1e3);else{var e=this.vml;if(e.hasChildNodes())for(;e.childNodes.length>=1;)e.removeChild(e.firstChild)}},n.redraw=function(){this.clean(),this.draw()}
,n.reset=function(){typeof this.timer=="number"&&(this.hide(),this.show())},n.tick=function(e){var t=this.con,n=this.diameter;e||(this.activeId+=360/this.density*this.speed),r===i[0]?(t.clearRect(0,0,n,n),p(t,n*.5,n*.5,this.activeId/180*Math.PI),t.drawImage(this.cCan,0,0,n,n),t.restore()):(this.activeId>=360&&(this.activeId-=360),c(this.vml,{rotation:this.activeId}))},n.show=function(){if(typeof this.timer!="number"){var e=this;this.timer=self.setInterval(function(){e.tick()},Math.round(1e3/this.fps)),c(this.cont,{display:"block"})}},n.hide=function(){typeof this.timer=="number"&&(clearInterval(this.timer),delete this.timer,c(this.cont,{display:"none"}))},n.kill=function(){var e=this.cont;typeof this.timer=="number"&&this.hide(),r===i[0]?(e.removeChild(this.can),e.removeChild(this.cCan)):e.removeChild(this.vml);for(var t in this)delete this[t]},e.CanvasLoader=t}(window),define("canvas-loader",function(e){return function(){var t,n;return t||e.canvas-loader}}(this)),define("pagehub",["underscore"
,"jquery","hbs!templates/dialogs/connectivity_issue","bootstrap","shortcut","jquery.ui","modernizr","canvas-loader"],function(e,t,n){var r=!1,i={flash:null,status:null},s=null,o=null;anime_dur=250,status_shown=!1,current_status=null,status_queue=[],animation_dur=2500,pulses={flash:2.5},defaults={status:1};var u=function(e){if(e.parent("[disabled],:disabled,.disabled").length>0)return!1;c(t("a.listlike.selected"));var n=e.nextAll("ol.listlike:first");return n.css({left:0,right:0}),n.width()+n.parent().offset().left>=t(window).width()?n.css({right:0,left:-1*n.width()}):n.css({left:e.position().left,right:0}),n.show(),e.addClass("selected"),e.unbind("click",a),e.add(t(window)).bind("click",f),!1},a=function(){return u(t(this))},f=function(e){return e.preventDefault(),c(t(".listlike.selected:visible")),!1},l=!1,c=function(e){if(l)return l=!1,!0;t(e).removeClass("selected"),t(e).nextAll("ol.listlike:first").hide(),t(e).add(t(window)).unbind("click",f),t(e).bind("click",a)},h={};t(document).ajaxStart
(function(e){h.status.mark_pending()}),t(document).ajaxComplete(function(e){h.status.mark_ready()}),t(document).ajaxError(function(e,r){if(r.__pagehub_no_status)return!0;console.log(r);if(r.status!=200)try{var i=JSON.parse(r.responseText);h.status.show(i.messages.join("<br />"),"bad",null,!0)}catch(i){r.exception=i.message,t(n(r)).dialog({dialogClass:"alert-dialog",buttons:{Dismiss:function(){t(this).dialog("close")}}})}}),t.extend(t.ui.dialog.prototype.options,{modal:!0,resizable:!1,create:function(e,n){t(this).dialog("widget").find("button").addClass("btn")},close:function(){t(this).remove()},open:function(){var e=t(this);h.dialog.on_open(e)}});var p=function(){if(r)return!0;Modernizr.draganddrop||h.modal.as_alert(t("#html5_compatibility_notice")),t(document.body).tooltip({selector:"[rel=tooltip]",container:"body",animation:!1,placement:function(e,n){return t(n).attr("data-placement")||"bottom"}}),t(document.body).popover({selector:"[rel=popover]",animation:!1,trigger:"hover",container
:"body",placement:function(e,n){return t(n).attr("data-placement")||"bottom"}}),s=new CanvasLoader("loader"),s.setColor("#595959"),s.setShape("spiral"),s.setDiameter(84),s.setDensity(18),s.setRange(1.1),s.setSpeed(1),s.setFPS(29),t("a[data-disabled], a.disabled").click(function(e){return e.preventDefault(),!1}),t("a.listlike:not(.selected)").bind("click",a),t("ol.listlike:not(.sticky) li:not(.sticky)").click(function(){var e=t(this).parent().prev("a.listlike");return e.hasClass("selected")&&c(e),!0}),t("ol.listlike.sticky li, ol.listlike:not(.sticky) li.sticky").on("click",function(e){return l=!0,!0}),r=!0}(),h=Backbone.View.extend({pbar_tick:0,pbar_value:0,loader:s,initialize:function(e){if(!e)return this;this.state=e},dialog:{on_open:function(e){e.focus(),e.find(".ui-dialog-buttonpane button:last").focus(),e.find("form").on("submit",function(e){return e.preventDefault(),!1}),e.keypress(function(t){if(t.keyCode==13)return e.parent().find(".ui-dialog-buttonpane button:last").click(),t.preventDefault
(),t.stopPropagation(),!1})}},status:{clear:function(e){if(!t("#status").is(":visible"))return(e||function(){})();t("#status").addClass("hidden").removeClass("visible"),status_shown=!1,e&&e();if(status_queue.length>0){var n=status_queue.pop();return this.status.show(n[0],n[1],n[2])}},show:function(e,n,r,s){n||(n="notice"),r||(r=defaults.status),i.status&&clearTimeout(i.status),i.status=setTimeout(function(){h.status.clear()},n=="bad"?animation_dur*2:animation_dur),t("#status").removeClass("pending good bad").addClass(n+" visible"),s?t("#status").html(e):t("#status").text(e),status_shown=!0,current_status=n},mark_pending:function(){s.show()},mark_ready:function(){s.hide()}},report_error:function(e){throw h.status.show("A script error has occured, please try to reproduce the bug and report it.","bad"),e}});return h=new h,h}),function(e){function a(e){return e&&e.toLowerCase?e.toLowerCase():e}function f(e,n){for(var r=0,i=e.length;r<i;r++)if(e[r]==n)return!t;return t}var t=!1,n=null,r=parseFloat
,i=Math.min,s=/(-?\d+\.?\d*)$/g,o=[],u=[];e.tinysort={id:"TinySort",version:"1.4.29",copyright:"Copyright (c) 2008-2012 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licensed:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},plugin:function(e,t){o.push(e),u.push(t)},defaults:{order:"asc",attr:n,data:n,useVal:t,place:"start",returns:t,cases:t,forceStrings:t,sortFunction:n}},e.fn.extend({tinysort:function(l,c){l&&typeof l!="string"&&(c=l,l=n);var h=e.extend({},e.tinysort.defaults,c),p,d=this,v=e(this).length,m={},y=!!l&&l!="",w=h.attr!==n&&h.attr!="",E=h.data!==n,S=y&&l[0]==":",x=S?d.filter(l):d,T=h.sortFunction,N=h.order=="asc"?1:-1,C=[];e.each(o,function(e,t){t.call(t,h)}),T||(T=h.order=="rand"?function(){return Math.random()<.5?1:-1}:function(n,i){var o=t,f=h.cases?n.s:a(n.s),l=h.cases?i.s:a(i.s);if(!h.forceStrings){var c=f&&f.match(s),p=l&&l.match(s);if(c&&p){var d=f.substr(0,f.length-c[0].length),v=l.substr(0,l.length-p[0].length);
d==v&&(o=!t,f=r(c[0]),l=r(p[0]))}}var m=N*(f<l?-1:f>l?1:0);return e.each(u,function(e,t){m=t.call(t,o,f,l,m)}),m}),d.each(function(t,n){var r=e(n),i=y?S?x.filter(n):r.find(l):r,s=E?""+i.data(h.data):w?i.attr(h.attr):h.useVal?i.val():i.text(),o=r.parent();m[o]||(m[o]={s:[],n:[]}),i.length>0?m[o].s.push({s:s,e:r,n:t}):m[o].n.push({e:r,n:t})});for(p in m)m[p].s.sort(T);for(p in m){var k=m[p],L=[],A=v,O=[0,0],M;switch(h.place){case"first":e.each(k.s,function(e,t){A=i(A,t.n)});break;case"org":e.each(k.s,function(e,t){L.push(t.n)});break;case"end":A=k.n.length;break;default:A=0}for(M=0;M<v;M++){var _=f(L,M)?!t:M>=A&&M<A+k.s.length,D=(_?k.s:k.n)[O[_?0:1]].e;D.parent().append(D),(_||!h.returns)&&C.push(D.get(0)),O[_?0:1]++}}return d.length=0,Array.prototype.push.apply(d,C),d}}),e.fn.TinySort=e.fn.Tinysort=e.fn.tsort=e.fn.tinysort}(jQuery),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=t);for(;n<
t;n++)if(n in this&&this[n]===e)return n;return-1}),define("jquery.tinysort",function(){}),define("pagehub.config",["jquery","jquery.tinysort"],function(e){return e.ajaxSetup({headers:{Accept:"application/json; charset=utf-8","Content-Type":"application/json; charset=utf-8"}}),e.tinysort.defaults.sortFunction=function(e,t){var n=e.e.text().trim(),r=t.e.text().trim();return n===r?0:n>r?1:-1},{}}),window&&!window.InflectionJS&&(window.InflectionJS=null),InflectionJS={uncountable_words:["equipment","information","rice","money","species","series","fish","sheep","moose","deer","news"],plural_rules:[[new RegExp("(m)an$","gi"),"$1en"],[new RegExp("(pe)rson$","gi"),"$1ople"],[new RegExp("(child)$","gi"),"$1ren"],[new RegExp("^(ox)$","gi"),"$1en"],[new RegExp("(ax|test)is$","gi"),"$1es"],[new RegExp("(octop|vir)us$","gi"),"$1i"],[new RegExp("(alias|status)$","gi"),"$1es"],[new RegExp("(bu)s$","gi"),"$1ses"],[new RegExp("(buffal|tomat|potat)o$","gi"),"$1oes"],[new RegExp("([ti])um$","gi"),"$1a"],
[new RegExp("sis$","gi"),"ses"],[new RegExp("(?:([^f])fe|([lr])f)$","gi"),"$1$2ves"],[new RegExp("(hive)$","gi"),"$1s"],[new RegExp("([^aeiouy]|qu)y$","gi"),"$1ies"],[new RegExp("(x|ch|ss|sh)$","gi"),"$1es"],[new RegExp("(matr|vert|ind)ix|ex$","gi"),"$1ices"],[new RegExp("([m|l])ouse$","gi"),"$1ice"],[new RegExp("(quiz)$","gi"),"$1zes"],[new RegExp("s$","gi"),"s"],[new RegExp("$","gi"),"s"]],singular_rules:[[new RegExp("(m)en$","gi"),"$1an"],[new RegExp("(pe)ople$","gi"),"$1rson"],[new RegExp("(child)ren$","gi"),"$1"],[new RegExp("([ti])a$","gi"),"$1um"],[new RegExp("((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$","gi"),"$1$2sis"],[new RegExp("(hive)s$","gi"),"$1"],[new RegExp("(tive)s$","gi"),"$1"],[new RegExp("(curve)s$","gi"),"$1"],[new RegExp("([lr])ves$","gi"),"$1f"],[new RegExp("([^fo])ves$","gi"),"$1fe"],[new RegExp("([^aeiouy]|qu)ies$","gi"),"$1y"],[new RegExp("(s)eries$","gi"),"$1eries"],[new RegExp("(m)ovies$","gi"),"$1ovie"],[new RegExp("(x|ch|ss|sh)es$","gi"),"$1"
],[new RegExp("([m|l])ice$","gi"),"$1ouse"],[new RegExp("(bus)es$","gi"),"$1"],[new RegExp("(o)es$","gi"),"$1"],[new RegExp("(shoe)s$","gi"),"$1"],[new RegExp("(cris|ax|test)es$","gi"),"$1is"],[new RegExp("(octop|vir)i$","gi"),"$1us"],[new RegExp("(alias|status)es$","gi"),"$1"],[new RegExp("^(ox)en","gi"),"$1"],[new RegExp("(vert|ind)ices$","gi"),"$1ex"],[new RegExp("(matr)ices$","gi"),"$1ix"],[new RegExp("(quiz)zes$","gi"),"$1"],[new RegExp("s$","gi"),""]],non_titlecased_words:["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],id_suffix:new RegExp("(_ids|_id)$","g"),underbar:new RegExp("_","g"),space_or_underbar:new RegExp("[ _]","g"),uppercase:new RegExp("([A-Z])","g"),underbar_prefix:new RegExp("^_"),apply_rules:function(e,t,n,r){if(r)e=r;else{var i=n.indexOf(e.toLowerCase())>-1;if(!i)for(var s=0;s<t.length;s++)if(e.match(t[s][0])){e=e.replace(t[s][0],t[s][1]);break}}return e}},Array.prototype.indexOf||(Array
.prototype.indexOf=function(e,t,n){t||(t=-1);var r=-1;for(var i=t;i<this.length;i++)if(this[i]===e||n&&n(this[i],e)){r=i;break}return r}),String.prototype._uncountable_words||(String.prototype._uncountable_words=InflectionJS.uncountable_words),String.prototype._plural_rules||(String.prototype._plural_rules=InflectionJS.plural_rules),String.prototype._singular_rules||(String.prototype._singular_rules=InflectionJS.singular_rules),String.prototype._non_titlecased_words||(String.prototype._non_titlecased_words=InflectionJS.non_titlecased_words),String.prototype.pluralize||(String.prototype.pluralize=function(e){return InflectionJS.apply_rules(this,this._plural_rules,this._uncountable_words,e)}),String.prototype.singularize||(String.prototype.singularize=function(e){return InflectionJS.apply_rules(this,this._singular_rules,this._uncountable_words,e)}),String.prototype.camelize||(String.prototype.camelize=function(e){var t=this.toLowerCase(),n=t.split("/");for(var r=0;r<n.length;r++){var i=n[
r].split("_"),s=e&&r+1===n.length?1:0;for(var o=s;o<i.length;o++)i[o]=i[o].charAt(0).toUpperCase()+i[o].substring(1);n[r]=i.join("")}return t=n.join("::"),t}),String.prototype.underscore||(String.prototype.underscore=function(){var e=this,t=e.split("::");for(var n=0;n<t.length;n++)t[n]=t[n].replace(InflectionJS.uppercase,"_$1"),t[n]=t[n].replace(InflectionJS.underbar_prefix,"");return e=t.join("/").toLowerCase(),e}),String.prototype.humanize||(String.prototype.humanize=function(e){var t=this.toLowerCase();return t=t.replace(InflectionJS.id_suffix,""),t=t.replace(InflectionJS.underbar," "),e||(t=t.capitalize()),t}),String.prototype.capitalize||(String.prototype.capitalize=function(){var e=this.toLowerCase();return e=e.substring(0,1).toUpperCase()+e.substring(1),e}),String.prototype.dasherize||(String.prototype.dasherize=function(){var e=this;return e=e.replace(InflectionJS.space_or_underbar,"-"),e}),String.prototype.titleize||(String.prototype.titleize=function(){var e=this.toLowerCase()
;e=e.replace(InflectionJS.underbar," ");var t=e.split(" ");for(var n=0;n<t.length;n++){var r=t[n].split("-");for(var i=0;i<r.length;i++)this._non_titlecased_words.indexOf(r[i].toLowerCase())<0&&(r[i]=r[i].capitalize());t[n]=r.join("-")}return e=t.join(" "),e=e.substring(0,1).toUpperCase()+e.substring(1),e}),String.prototype.demodulize||(String.prototype.demodulize=function(){var e=this,t=e.split("::");return e=t[t.length-1],e}),String.prototype.tableize||(String.prototype.tableize=function(){var e=this;return e=e.underscore().pluralize(),e}),String.prototype.classify||(String.prototype.classify=function(){var e=this;return e=e.camelize().singularize(),e}),String.prototype.foreign_key||(String.prototype.foreign_key=function(e){var t=this;return t=t.demodulize().underscore()+(e?"":"_")+"id",t}),String.prototype.ordinalize||(String.prototype.ordinalize=function(){var e=this,t=e.split(" ");for(var n=0;n<t.length;n++){var r=parseInt(t[n]);if(r===NaN){var i=t[n].substring(t[n].length-2),s=t[n
].substring(t[n].length-1),o="th";i!="11"&&i!="12"&&i!="13"&&(s==="1"?o="st":s==="2"?o="nd":s==="3"&&(o="rd")),t[n]+=o}}return e=t.join(" "),e});if(!String.prototype.vowelize){var n=["a","o","u","i","e"];String.prototype.vowelize=function(){var e=this;return n.indexOf(e[0])!=-1?e="an "+e:e="a "+e,e}}define("inflection",function(){});var c="0123456789abcdef".split("");if(d("hello")!="5d41402abc4b2a76b9719d911017c592")function v(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}define("md5",function(){}),define("models/page",["jquery","underscore","backbone","backbone.nested"],function(e,t,n){var r=n.DeepModel.extend({defaults:{title:"",pretty_title:"",content:"",creator:null,revisions:[]},parse:function(e){return e.page},initialize:function(){this.ctx={},this.urlRoot=this.collection.space.get("media.pages.url"),this.get("title").length==0&&this.set("title","Untitled#"+this.cid.toString().replace("c","")),this.on("change:folder.id",this.set_folder,this)},set_folder
:function(){console.log("folder changed!!!")},path:function(){var e=this.collection.folder.path().split("/");return e.push(this.get("pretty_title")),e.join("/")},fully_qualified_title:function(){var e=t.reject(t.collect(this.collection.folder.ancestors(),function(e){return e.get("title")}),function(e){return e=="None"}).reverse();return e.push(this.get("title")),e}});return r}),define("collections/pages",["jquery","backbone","models/page"],function(e,t,n){return t.Collection.extend({model:n,url:function(){this.space.get("media").pages_url},initialize:function(e,t){_.implode(this,t),this.on("add",this.attach_to_folder,this),this.on("add",this.configure_path,this),this.on("change:folder.id",this.configure_path,this),this.folder.on("change:parent.id",this.configure_page_paths,this)},attach_to_folder:function(e){e.folder=this.folder},configure_path:function(e){return e.set("path",e.path()),this},configure_page_paths:function(){return this.every(function(e){return this.configure_path(e)},this
),this}})}),define("models/folder",["jquery","underscore","backbone","collections/pages","backbone.nested"],function(e,t,n,r){var i=!1,s=n.DeepModel.extend({defaults:{title:"",pretty_title:""},initialize:function(e){this.ctx={},this.urlRoot=this.collection.space.get("media.folders.url"),this.pages=new r(null,{folder:this,space:this.collection.space}),this.pages.reset(e.pages),this.on("change:parent.id",this.configure_path,this),this.on("change:title",this.configure_path,this)},configure_path:function(){return this.set("path",this.path()),t.each(this.children(),function(e){return e.configure_path()}),this},has_parent:function(){return!!this.get("parent")},get_parent:function(){return this.has_parent()?this.collection.get(this.get("parent").id):null},ancestors:function(){var e=[this];return this.has_parent()&&e.push(this.get_parent().ancestors()),t.reject(t.uniq(t.flatten(e)),function(e){return e==null})},children:function(){return this.collection.where({"parent.id":this.get("id")})},parse
:function(e){return e.folder},path:function(){var e=t.reject(t.collect(this.ancestors(),function(e){return e.get("pretty_title")}),function(e){return e=="none"}).reverse();return e.join("/")}});return s}),define("collections/folders",["jquery","backbone","models/folder"],function(e,t,n){return t.Collection.extend({defaults:{space:null},model:n,url:function(){this.space.get("media.folders_url")},parse:function(e){return e.folders},initialize:function(e,t){_.implode(this,t)}})}),define("models/space",["jquery","underscore","backbone","collections/folders"],function(e,t,n,r){var i=n.DeepModel.extend({defaults:{title:"",pretty_title:"",brief:""},parse:function(e){return e.space},urlRoot:function(){return this.creator.get("media.spaces.url")},initialize:function(e){var n=this;this.folders=new r(null,{space:this}),t.each(e.folders,function(e){n.folders.add(e)})},root_folder:function(){return this.__root_folder?this.__root_folder:(this.__root_folder=this.folders.where({parent:null})[0],this.__root_folder
)},modify_membership:function(t,n,r){this.save({memberships:[{user_id:t,role:n}]},e.extend(!0,r||{},{patch:!0,wait:!0}))},is_admin:function(e){var n=t.select(this.get("memberships"),function(t){return parseInt(t.id)==parseInt(e.get("id"))})[0];return n&&["admin","creator"].indexOf(n.role)!=-1},find_page_by_fully_qualified_title:function(e){var t=this.root_folder(),n=e.reverse();while(n.length>1){var r=n.pop();t=this.folders.where({title:r,"parent.id":t.get("id")})[0];if(!t)return console.log("no such folder: "+r),null}return t.pages.where({title:n[0]})[0]}});return i}),define("collections/spaces",["jquery","backbone","models/space"],function(e,t,n){return t.Collection.extend({defaults:{},model:n,url:function(){this.creator.get("media").spaces_url},parse:function(e){return e.spaces},initialize:function(){this.creator=null}})}),define("models/user",["backbone","collections/spaces"],function(e,t){var n=e.DeepModel.extend({defaults:{nickname:"",email:"",spaces:null,preferences:{}},urlRoot:function(
){return"/users"},parse:function(e){return e.user},initialize:function(e){this.ctx={},this.spaces=new t(e.spaces),this.spaces.creator=this}});return n}),function(e,t){var n=[],r=[],i=[],s={gsub:function(e,t,n){var r=new RegExp(t.source||t,"gi");return r.test(e)?e.replace(r,n):null},plural:function(e,t){n.unshift([e,t])},pluralize:function(r,s,o){var u;if(s!==t)s=Math.round(s),u=s===1?this.singularize(r):this.pluralize(r),u=o?[s,u].join(" "):u;else{if(e(i).include(r))return r;u=r,e(n).detect(function(e){var t=this.gsub(r,e[0],e[1]);return t?u=t:!1},this)}return u},singular:function(e,t){r.unshift([e,t])},singularize:function(t){if(e(i).include(t))return t;var n=t;return e(r).detect(function(e){var r=this.gsub(t,e[0],e[1]);return r?n=r:!1},this),n},irregular:function(e,t){this.plural("\\b"+e+"\\b",t),this.singular("\\b"+t+"\\b",e)},uncountable:function(e){i.unshift(e)},resetInflections:function(){return n=[],r=[],i=[],this.plural(/$/,"s"),this.plural(/s$/,"s"),this.plural(/(ax|test)is$/,"$1es"
),this.plural(/(octop|vir)us$/,"$1i"),this.plural(/(octop|vir)i$/,"$1i"),this.plural(/(alias|status)$/,"$1es"),this.plural(/(bu)s$/,"$1ses"),this.plural(/(buffal|tomat)o$/,"$1oes"),this.plural(/([ti])um$/,"$1a"),this.plural(/([ti])a$/,"$1a"),this.plural(/sis$/,"ses"),this.plural(/(?:([^f])fe|([lr])f)$/,"$1$2ves"),this.plural(/(hive)$/,"$1s"),this.plural(/([^aeiouy]|qu)y$/,"$1ies"),this.plural(/(x|ch|ss|sh)$/,"$1es"),this.plural(/(matr|vert|ind)(?:ix|ex)$/,"$1ices"),this.plural(/([m|l])ouse$/,"$1ice"),this.plural(/([m|l])ice$/,"$1ice"),this.plural(/^(ox)$/,"$1en"),this.plural(/^(oxen)$/,"$1"),this.plural(/(quiz)$/,"$1zes"),this.singular(/s$/,""),this.singular(/(n)ews$/,"$1ews"),this.singular(/([ti])a$/,"$1um"),this.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/,"$1$2sis"),this.singular(/(^analy)ses$/,"$1sis"),this.singular(/([^f])ves$/,"$1fe"),this.singular(/(hive)s$/,"$1"),this.singular(/(tive)s$/,"$1"),this.singular(/([lr])ves$/,"$1f"),this.singular(/([^aeiouy]|qu)ies$/
,"$1y"),this.singular(/(s)eries$/,"$1eries"),this.singular(/(m)ovies$/,"$1ovie"),this.singular(/(x|ch|ss|sh)es$/,"$1"),this.singular(/([m|l])ice$/,"$1ouse"),this.singular(/(bus)es$/,"$1"),this.singular(/(o)es$/,"$1"),this.singular(/(shoe)s$/,"$1"),this.singular(/(cris|ax|test)es$/,"$1is"),this.singular(/(octop|vir)i$/,"$1us"),this.singular(/(alias|status)es$/,"$1"),this.singular(/^(ox)en/,"$1"),this.singular(/(vert|ind)ices$/,"$1ex"),this.singular(/(matr)ices$/,"$1ix"),this.singular(/(quiz)zes$/,"$1"),this.singular(/(database)s$/,"$1"),this.irregular("person","people"),this.irregular("man","men"),this.irregular("child","children"),this.irregular("sex","sexes"),this.irregular("move","moves"),this.irregular("cow","kine"),e("equipment information rice money species series fish sheep jeans".split(/\s+/)).each(function(e){this.uncountable(e)},this),this}};e.mixin(s.resetInflections())}(_),define("underscore.inflection",function(){}),define("helpers/handlebars",["underscore","Handlebars","md5"
,"underscore.inflection"],function(e,t){return t.registerHelper("pluralize",function(t,n){return e(t).pluralize(n,!0)}),t.registerHelper("escape",function(t){return e.escape(t)}),t.registerHelper("h",function(t){return e.escape(t)}),t.registerHelper("checkify",function(t,n){return e.indexOf(n.split(" "),t)!=-1?'checked="checked"':""}),t.registerHelper("gravatar_hash",function(e){return d(e.trim().toLowerCase())}),{}}),define("helpers/underscore",["underscore"],function(e){return e.implode||(e.implode=function(t,n){var n=n,r=t;return e.each(e.pairs(n),function(e){r[e[0]]=e[1]}),r}),e}),define("helpers/jquery",["jquery"],function(e){e.fn.serializeObject=function(){var t=this,n={},r={},i={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(e,t,n){return e[t]=n,e},this.push_counter=function(e){return r[e]===undefined&&(r[e]=0),r[e]++},e.each(e(this).serializeArray(),function(
){if(!i.validate.test(this.name))return;var r,s=this.name.match(i.key),o=this.value,u=this.name;while((r=s.pop())!==undefined)u=u.replace(new RegExp("\\["+r+"\\]$"),""),r.match(i.push)?o=t.build([],t.push_counter(u),o):r.match(i.fixed)?o=t.build([],r,o):r.match(i.named)&&(o=t.build({},r,o));n=e.extend(!0,n,o)}),n}}),define("timed_operation",["underscore","backbone"],function(e,t){return t.Model.extend({initialize:function(t,n,r){if(!n)throw"[timed_operation]: invalid argument @callback, must be a callable object, got "+typeof n;this.options={},e.implode(this.options,$.extend({},{pulse:250,with_flag:!1,autoqueue:!1},r)),this.timer=null,this.__callee=t,this.__method=n},__invoke_with_flag:function(){var e=[];for(var t=0;t<arguments.length;++t)e.push(arguments[t]);return e.push(!0),this.__method.apply(this.__callee,e)},__invoke:function(){return this.__method.apply(this.__callee,arguments)},__start:function(e){return this.stop(),this.options.autoqueue?this.timer=setInterval(e,this.options.pulse
):this.timer=setTimeout(e,this.options.pulse),this},start:function(){return this.options.autoqueue&&this.queue(),this},stop:function(){return this.timer&&(this.options.autoqueue?this.timer=clearInterval(this.timer):this.timer=clearTimeout(this.timer)),this},cancel:function(){return this.stop()},queue:function(){var e=this,t=arguments;return this.options.with_flag?this.__start(function(){return e.__invoke_with_flag.apply(e,t)}):this.__start(function(){return e.__invoke.apply(e,t)}),!0}})}),define("views/flash",["timed_operation"],function(e){return Backbone.View.extend({el:$("#flash"),events:{"click #hide_flash":"hide"},template:null,initialize:function(t){this.hide_button=this.$el.find("#hide_flash"),this.anime_duration=t.get("preferences.animes.toggling_duration");if(this.$el.is(":visible")){var n=null;this.hide(),this.$el.removeClass("hidden"),this.__show_proxy=$.proxy(this.show,this),this.hidden_top_offset=-1*(this.$el.height()+Math.ceil(.5*parseInt(this.$el.css("padding-bottom")))),
this.$el.hasClass("error")?n=t.get("preferences.pulses.flash.error"):(n=t.get("preferences.pulses.flash.notice"),this.is_notice=!0),this.pulse=n,this.hide_timer=new e(this,this.hide,{pulse:n}),this.render()}},render:function(e){return this.$el.css({top:0,cursor:"default"}),this.$el.off("click",this.__show_proxy),this.hide_timer&&this.hide_timer.queue(),this},hide:function(){var e=this;return this.$el.css({top:this.hidden_top_offset,cursor:"pointer"}),this.hide_timer&&this.hide_timer.cancel(),this.is_notice?(setTimeout(function(){e.$el.hide()},400),this):(this.$el.on("click",this.__show_proxy),this)},show:function(){return this.render()}})}),define("hbs!templates/header_path",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var r="",i,s;r+="\n  ",s=n["if"].call(e,(i=e.space,i==null||i===!1?i:i.title),{hash:{},inverse:l.noop,fn:l.program(2,h,t)});if(s||s===0)r+=s;r+="\n\n  ",s=n.each.call(e,e.folders,{hash:{},inverse:l.noop,fn:l.program(4,p,t)});if(s||
s===0)r+=s;r+="\n  ",s=n["if"].call(e,e.page,{hash:{},inverse:l.noop,fn:l.program(6,d,t)});if(s||s===0)r+=s;r+="\n  ",s=n["if"].call(e,e.space_admin,{hash:{},inverse:l.noop,fn:l.program(8,v,t)});if(s||s===0)r+=s;return r+="\n",r}function h(e,t){var n="",r;return n+='\n    / <a href="'+f((r=(r=(r=(r=e.space,r==null||r===!1?r:r.media),r==null||r===!1?r:r.actions),r==null||r===!1?r:r.edit),typeof r===a?r.apply(e):r))+'#"><strong>'+f((r=(r=e.space,r==null||r===!1?r:r.title),typeof r===a?r.apply(e):r))+"</strong></a>\n  ",n}function p(e,t){var r="",i;return r+='\n    / <strong><a href="#',(i=n.path)?i=i.call(e,{hash:{}}):(i=e.path,i=typeof i===a?i.apply(e):i),r+=f(i)+'">',(i=n.title)?i=i.call(e,{hash:{}}):(i=e.title,i=typeof i===a?i.apply(e):i),r+=f(i)+"</a></strong>\n  ",r}function d(e,t){var n="",r;return n+="\n    / <span>"+f((r=(r=e.page,r==null||r===!1?r:r.title),typeof r===a?r.apply(e):r))+"</span>\n  ",n}function v(e,t){var n="",r;return n+='\n    <a rel="tooltip" id="space_settings_link" title="Space settings" class="space-settings-link btn btn-mini btn-primary" href="'+
f((r=(r=(r=(r=e.space,r==null||r===!1?r:r.media),r==null||r===!1?r:r.actions),r==null||r===!1?r:r.settings),typeof r===a?r.apply(e):r))+'">Space Admin</a>\n  ',n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<a href="'+f((o=(o=(o=t.user,o==null||o===!1?o:o.media),o==null||o===!1?o:o.href),typeof o===a?o.apply(t):o))+'">'+f((o=(o=t.user,o==null||o===!1?o:o.nickname),typeof o===a?o.apply(t):o))+"</a>\n\n",u=n["if"].call(t,t.space,{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(u||u===0)s+=u;return s+="\n",s});return t.registerPartial("templates_header_path",n),n}),define("views/header",["hbs!templates/header_path"],function(e){return Backbone.View.extend({el:$("#header"),templates:{path:e},initialize:function(e){this.state=e,e.space?(this.space=e.space,this.user=e.space.creator,this.space.on("sync",this.render,this)):e.user?this.user=e.user:e.current_user&&(this.user=e.current_user),this.user&&e.current_user==e.user&&(this
.user.on("change:nickname",this.render,this),this.user.on("sync",this.render,this)),this.state.on("bootstrapped",function(){e.workspace&&(this.workspace=e.workspace,e.workspace.on("folder_loaded",this.render,this),e.workspace.on("current_folder_updated",this.render,this),e.workspace.on("page_loaded",this.render,this),e.workspace.on("current_page_updated",this.render,this)),this.render()},this),this.state.on("highlight_nav_section",this.highlight,this)},render:function(e){var t={};return this.user&&(t.user={nickname:this.user.get("nickname"),media:this.user.get("media")}),this.space&&(t.space={title:this.space.get("title"),media:this.space.get("media")},t.space_admin=this.space.is_admin(this.state.current_user),this.workspace&&(this.workspace.current_page?$.extend(!0,t,this.build_page_path()||{}):this.workspace.current_folder&&$.extend(!0,t,this.build_folder_path()||{}))),this.$el.find("#path").html(this.templates.path(t)),this},highlight:function(e){this.$el.find("a#"+e+"_link").addClass
("selected")},folder_hierarchy:function(e){if(!e.has_parent())return[];var t=_.reject(e.ancestors(),function(e){return!e.has_parent()});return t.reverse()},build_folder_path:function(e){var t=this.workspace.current_folder;return t?(console.log("[header] showing folder path"),$.extend(!0,{folders:_.collect(this.folder_hierarchy(t),function(e){return{title:e.get("title"),path:e.path()}})},e||{})):!1},build_page_path:function(){var e=this.workspace.current_page;return e?(console.log("[header] rendering page path: "+e.path()),this.build_folder_path({page:{title:e.get("title"),path:e.path()}})):!1}})}),define("animable_view",["backbone","jquery","jquery.ui"],function(e,t){return e.View.extend({initialize:function(e){_.implode(this,e),this.anime_length=350},animable:function(){return this.state&&this.state.current_user&&this.state.current_user.get("preferences.workspace.animable")==1}})}),define("views/shared/animable_view",function(){}),define("views/shared/settings/director",["backbone","jquery"
,"shortcut","pagehub"],function(e,t,n,r){return e.View.extend({el:t("#settings"),type:"director",initialize:function(e,n){var r=this;this.model=e,this.state=n,this.ctx={},this.views=[],this.aliases=[],this.presync_map={},this.fetch_after_sync=!0,this.on("section_changed",this.sections.show,this),this.on("section_changed",this.sections.highlight,this),t(document).on("submit",function(e){return r.consume(e)}),this.render()},log:function(e,t){return t?(console.log("["+this.label+"]"),console.log(e)):console.log("["+this.label+"] "+e),this},set_router:function(e,t){return this.router=new e(this,t),this},go:function(t){return t="/"+this.model.get("media.url")+t,e.history.start({pushState:!1,root:t}),console.log(e.history.root),this},add_alias:function(e){return this.aliases.push(e),this},register:function(e,t){if(this.get_view(t))throw"[director] a view is already registered with label '"+t+"'";var n={model:this.model,state:this.state,director:this,label:t};_.each(this.aliases,function(e){return n
[e]=n.model,!0},this),this.presync_map[t]=[];var r=new e(n);if(!r.serialize)throw"Missing view#serialize() implementation in view '"+r.label+"'";return r.on("sync",this.partial_sync,this),this.views.push(r),this.log("view registered: '"+r.label+"'"),this},load:function(){},bootstrap:function(){return this},render:function(){return this.reset&&this.reset(),this.$el.show(),this},hide:function(){return this},reset:function(){return this.$el.hide(),this},before_sync:function(e,t){return this.presync_map[e.label].push(function(){return t.apply(e)}),this},serialize:function(){var e={};return this.current_view?this.current_view.is_serializable()?(this.log("serializing..."),e=this.current_view.serialize(),e?e:(console.log("Aborting settings sync; view '"+this.current_view.label+"' failed to serialize."),e=null,!1)):!1:!1},save:function(e,t){if(this.state.get("syncing"))return null;if(!this.sync)throw"Missing director#sync() implementation!";if(!this.serialize)throw"Missing director#serialize() implementation!"
;if(!this.current_view)return null;var n=this.serialize();return n?this.sync(n,e,t):null},consume:function(e){return e.preventDefault(),!1},sync:function(e,n,i){var s=this,o=this.state,i=i===undefined?this.fetch_after_sync:i;if(!n){this.ctx.abort_sync=!1,_.each(this.presync_map[this.current_view.label],function(e){return e()?!0:(s.ctx.abort_sync=!0,!1)});if(this.ctx.abort_sync)return console.log("sync aborted as per a callback's request."),this}r.status.mark_pending(),s.trigger("presync",s);try{this.current_view.reset&&this.current_view.reset(),this.state.set("syncing",!0),this.model.save(t.extend(!0,e,{no_object:!0}),{wait:!0,patch:!0,success:function(){i||o.set("syncing",!1),s.trigger("postsync",s,!0),r.status.show("Saved","good"),i||s.trigger("postfetch",s,s.model,!0)},error:function(e,t){i||o.set("syncing",!1),s.trigger("postsync",s,!1,t);try{var n=JSON.parse(t.responseText);if(s.current_view.on_sync_error){var r=s.current_view.on_sync_error(n.field_errors);r&&(t.__pagehub_no_status=!0
)}}catch(u){}i||s.trigger("postfetch",s,s.model,!1)}}),i&&this.model.fetch({success:function(){o.set("syncing",!1),s.render(),s.trigger("postfetch",s,s.model,!0)},error:function(){o.set("syncing",!1),s.trigger("postfetch",s,s.model,!1)}})}catch(u){o.set("syncing",!1)}return this},partial_sync:function(e,n){return this.model.save(e,t.extend(!0,n,{patch:!0,wait:!0})),this},get_view:function(e){return _.select(this.views,function(t){return t.type=="director"&&t.get_view(e)?[t.get_view(e)]:t.label==e})[0]},sections:{show:function(e){var t=this.get_view(e);this.log("showing view: "+e);if(!t)throw"Undefined view with label '"+e+"'";return _.each(this.views,function(e){return e.hide(),!0}),t.render(),this.current_view=t,this.state.current_director=this,!0},highlight:function(e){return this.nav?(this.nav.find(".selected").removeClass("selected").end().find('a[href="'+e+'"]').parent().addClass("selected"),!0):!0}}})}),define("views/shared/settings/nav",["jquery"],function(e){var t=t||"";e(function(
){e(".settings > nav a[href*='"+t+"']").addClass("selected").parent().addClass("selected")})}),define("views/shared/settings/setting_view",["backbone","jquery"],function(e,t){return e.View.extend({initialize:function(e){_.implode(this,e)},render:function(){return this.unserializable&&this.director.save_button&&this.director.save_button.prop("disabled",!0),this.$el.show("blind"),this},hide:function(){return this.$el.hide("blind"),this.reset(),this},serialize:function(){return!1},is_serializable:function(){return!this.unserializable},reset:function(){return this.$el.find(".control-group").removeClass("error"),this.$el.find(".help-inline").html(""),this.mark_destructive_action(!1),this.director.save_button&&this.director.save_button.prop("disabled",!1),this},mark_destructive_action:function(e){var t=this.director.save_button;return t&&t.toggleClass("btn-danger",e),this},propagate_sync:function(e){return this.director.save(e)},on_sync_error:function(e){var t=0;return _.each(_.pairs(e),function(
e){var n=e[0],r=e[1],i=this.$el.find("#"+n);return i.length==1&&(r instanceof Array&&(r=r.join("<br />")),i.nextAll("span[class^=help]:first").html(r),i.parents(".control-group:first").addClass("error"),++t),!0},this),t>0}})}),define("views/spaces/workspace/router",["backbone"],function(e){$(document).on("click","#browser a.selected",function(t){return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.history.navigate($(this).attr("href"),{silent:!1,trigger:!0}),!1}),$(document).on("click","#path a[href^=#]",function(t){t.preventDefault(),e.history.navigate($(this).attr("href"),{silent:!1,trigger:!0})});var t=e.Router.extend({routes:{"":"root_folder","*notFound":"resource"},initialize:function(e,t){this.director=e,this.space=t,this.director.on("current_page_updated",this.update_current_history_state,this)},update_current_history_state:function(t){console.log("[router]: updating path"),e.history.navigate(t.ctx.browser.anchor.attr("href"),{silent:!1})},root_folder:function(
){this.director.trigger("load_folder",this.space.root_folder())},proxy_resource:function(t){return e.history.navigate(t.path(),{trigger:!0})},resource:function(e){var t=e.trim().split("/"),n=_.last(t),r=this.space.root_folder(),i=null,s=!1;if(n.length==0)return this;if(t.length>1)for(var o=0;o<t.length-1;++o){var u=t[o],a=this.space.folders.where({pretty_title:u,"parent.id":r.get("id")})[0];if(!a)return console.log("routing failed; no such folder with title "+u+" in parent "+r.get("id")),this.director.on_invalid_route(e),this;r=a}return r?(i=r.pages.where({pretty_title:n})[0],i?this.director.trigger("load_page",i):(i=this.space.folders.where({pretty_title:n,"parent.id":r.get("id")})[0],i?this.director.trigger("load_folder",i):(console.log("routing failed; unable to find resource titled "+n+" in folder "+r.get("id")),this.director.on_invalid_route(e))),this):this}});return t}),define("views/spaces/resource_actions",["backbone","models/folder","pagehub","shortcut"],function(e,t,n,r){return e
.View.extend({el:$("#pages .actions"),events:{"click #new_page":"create_page","click #new_folder":"create_folder","click #download_zip":"download_space"},initialize:function(e){var t=this;_.implode(this,e),this.$el.find("#new_page").attr("href",this.space.get("media").pages.url+"/new"),r.add("ctrl+alt+c",function(){t.create_page()}),r.add("ctrl+alt+f",function(){t.create_folder()})},consume:function(e){return e.preventDefault(),!1},create_page:function(e){e&&e.preventDefault();var t=this.workspace.current_folder||this.space.root_folder();t.pages.add({folder_id:t.get("id")},{silent:!0});var r=_.last(t.pages.models);return r.save({},{wait:!0,success:function(){r.collection.trigger("add",r),n.status.show("Created!","good")}}),!1},create_folder:function(e){e&&e.preventDefault();var t=this.workspace.current_folder||this.space.root_folder(),r=t.collection.space,i=this;return $.ajax({type:"GET",headers:{Accept:"text/html"},url:r.get("media").folders.url+"/new",success:function(e){var i=$("<div>"+
e+"</div>").dialog({title:"Creating a folder",width:"auto",open:function(){return n.dialog.on_open($(this)),$(this).find("select :selected").attr("selected",!1).end().find("select option[value="+t.get("id")+"]").attr("selected",!0).end(),!0},buttons:{Cancel:function(){$(this).dialog("close")},Create:function(e){var t=i.find("form").serializeObject();r.folders.add(t,{silent:!0});var s=_.last(r.folders.models);s.save({},{wait:!0,success:function(e){n.status.show("Folder created!","good"),e.collection.trigger("add",e),i.dialog("close")}}),e.preventDefault()}}})}}),!1},download_space:function(e){return n.status.show("Please wait while we create the ZIP archive for you.","good"),!0}})}),define("views/spaces/browser/drag_manager",["jquery","backbone","pagehub","timed_operation"],function(e,t,n,r){return t.View.extend({el:e("#browser"),events:{},initialize:function(e){_.implode(this,e),Modernizr.draganddrop?this.space.folders.on("add",this.bind_folder_pages,this):console.log("No dragndrop support, ignoring..."
),this.drag_opener=new r(this,this.switch_to_target_folder,{pulse:1e3}),this.bootstrap()},bootstrap:function(){this._ctx={},this.bind_go_to_parent_folder()},reset:function(){return this.abort_dnd()},abort_dnd:function(){return this._ctx.is_dragging=!1,this._ctx.source=null,this._ctx.is_floating=!1,this.drag_opener.stop(),this.$el.find(".drag-src,.drop-target").removeClass("drag-src drop-target"),!1},__bind:function(e){return _.each(["dragstart","dragenter","drop","dragend","dragleave","dragover"],function(t){e.off(t)}),e.on("dragstart",this,this.start_dragging),e.on("dragenter",this,this.on_dragenter),e.on("drop",this,this.on_drop),e.on("dragend",this,this.on_drop),e.on("dragleave",this,this.consume_dragevent),e.on("dragover",this,this.consume_dragevent),this},bind_folder_pages:function(e){return this.__bind(e.ctx.browser.anchor),e.pages.on("add",this.bind_page,this),this},bind_page:function(e){return this.__bind(e.ctx.browser.anchor)},bind_go_to_parent_folder:function(e){var t=this.$el
.find("#goto_parent_folder");if(!t)return n.report_error("[error] can not find go-to parent folder navigator"),!1;console.log("[drag mgr] binding go_up button"),this.__bind(t.find("> .folder-title"))},consume_dragevent:function(e){return e.preventDefault(),!1},start_dragging:function(t,n){var r=t.originalEvent,i=e(this),n=t.data;return n.reset(),console.log(i),i.is("[draggable]")?!i.parent().hasClass("page")&&!i.parent().hasClass("folder")?!1:(i.addClass("drag-src"),r.dataTransfer.setData("ignore_me","fubar"),n._ctx.is_dragging=!0,n._ctx.source=i,!0):!1},on_dragenter:function(t){var n=t.data,r=null,i=n._ctx.source;n.$el.find(".drop-target").removeClass("drop-target"),n.drag_opener.stop();if(e(this).is(":visible")&&e(this).hasClass("folder-title"))r=e(this),r.addClass("drop-target"),n._ctx.target=r,n.drag_opener.queue();else{if(!n._ctx.is_floating)return n._ctx.target=null,!1;var s=e(this).parents(".pages:first");s.is(":visible")&&(r=s,r.addClass("drop-target"),n._ctx.target=r)}},on_drop
:function(e){var t=e.data;e.preventDefault(),e.stopPropagation();if(!t._ctx.is_dragging||!t._ctx.target)return t.abort_dnd();console.log(t._ctx.target);var n=t._ctx.source,r=t._ctx.target;if(!t._ctx.is_floating&&!r.is(".folder-title"))return t.abort_dnd();if(t._ctx.is_floating&&!r.is(".folder-title")&&!r.is(".pages"))return t.abort_dnd();if(n.hasClass("folder-title")){var i=t.browser.folder_from_title(n),s=t.browser.folder_from_title(r);i&&s&&i!=s&&t.workspace.trigger("move_folder",i,s)}else{var o=t.browser.folder_from_title(r),u=t.browser.folder_from_title(n),a=t.browser.page_from_title(n);a&&u&&o&&u!=o&&t.workspace.trigger("move_page",a,o)}return t.reset()},switch_to_target_folder:function(e){var e=this.browser.folder_from_title(this._ctx.target);this._ctx.is_floating=!0,this.workspace.state.router.proxy_resource(e)}})}),define("hbs!templates/dialogs/destroy_folder",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function l(e,t){var r="",i,s,o;r+="\n    <p>This folder has "
,o={hash:{},inverse:u.noop,fn:u.program(2,c,t)},s=(i=n.pluralize,i?i.call(e,"page",e.nr_pages,o):a.call(e,"pluralize","page",e.nr_pages,o));if(s||s===0)r+=s;r+=" and ",o={hash:{},inverse:u.noop,fn:u.program(2,c,t)},s=(i=n.pluralize,i?i.call(e,"folder",e.nr_folders,o):a.call(e,"pluralize","folder",e.nr_folders,o));if(s||s===0)r+=s;return r+=".</p>\n    <p><strong>WARNING<strong>: removing this folder will also remove every page and folder it contains!</p>\n  ",r}function c(e,t){var n="";return n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u=this,a=n.helperMissing,f="function";s+="<div>\n  <p>Are you sure you want to remove the folder '",(o=n.title)?o=o.call(t,{hash:{}}):(o=t.title,o=typeof o===f?o.apply(t):o);if(o||o===0)s+=o;s+="'?</p>\n  ",o=n["if"].call(t,t.nr_resources,{hash:{},inverse:u.noop,fn:u.program(1,l,i)});if(o||o===0)s+=o;return s+="\n</div>",s});return t.registerPartial("templates_dialogs_destroy_folder",n),n}),define("views/spaces/browser/actionbar",["jquery"
,"backbone","hbs!templates/dialogs/destroy_folder","pagehub"],function(e,t,n,r){return t.View.extend({el:e("#browser_actionbar"),templates:{destroy_folder:n},events:{"click #edit_folder":"edit_folder","click #delete_folder":"delete_folder","click #show_browser_settings":"show_settings"},initialize:function(t){this.browser=t.browser,this.ctx=t.browser.ctx,this.space=t.browser.space,this.workspace=t.browser.workspace,this.elements={edit_folder:e("#edit_folder"),delete_folder:e("#delete_folder")},this.workspace.space.on("reset",this.disable,this),this.workspace.space.on("folder_loaded",this.enable,this),this.browser.on("folder_selected",this.enable,this),this.browser.on("page_selected",this.disable,this)},__toggle:function(t){return this.elements.edit_folder.prop("disabled",t),this.elements.delete_folder.prop("disabled",t),e("body > .tooltip").remove(),this},enable:function(e){var e=e||this.ctx.selected_folder||this.workspace.current_folder;return console.log("[browser:actionbar] -- enabling for folder "+
e.get("title")+"-- "),!e.has_parent||!e.has_parent()?this.disable():e&&e.ctx.browser.el.hasClass("general-folder")?this.disable():e&&e.ctx.browser.el.hasClass("goto-parent-folder")?this.disable():this.__toggle(!1)},disable:function(){return this.__toggle(!0)},reset:function(){return this.disable()},edit_folder:function(t){var n=e(t.target),i=this.ctx.selected_folder||this.workspace.current_folder,s=this.space;return!i||!i.has_parent()?!1:(e.ajax({type:"GET",headers:{Accept:"text/html"},url:i.get("media").url+"/edit",success:function(t){var n=e("<div>"+t+"</div>").dialog({title:"Folder properties",buttons:{Cancel:function(){e(this).dialog("close")},Update:function(e){var t=n.find("form").serializeObject();i.save(t,{wait:!0,patch:!0,success:function(){r.status.show("Updated.","good"),n.dialog("close")}}),e.preventDefault()}}})}}),t.preventDefault(),!1)},delete_folder:function(t){var i=this,s=this.ctx.selected_folder,o=s.toJSON();if(!s)return!1;o.nr_pages=s.pages.length,o.nr_folders=s.children
().length,o.nr_resources=o.nr_pages+o.nr_folders;var u=n(o);return e(u).dialog({title:"Folder removal",buttons:{Cancel:function(){e(this).dialog("close")},Remove:function(){s.destroy({wait:!0,success:function(){r.status.show("Folder removed.","good")}}),e(this).dialog("close")}}}),t.preventDefault(),!1},show_settings:function(){return this.browser.settings.render()}})}),define("hbs!templates/browser/settings",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var n="";return n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing;s+='<form title="Browser Settings">\n  <!-- <h3 class="blocky-heading">Browser Type</h3> -->\n  <ul class="thumbnails">\n    <li class="span3">\n      <div>\n        <h4>\n          <label><input type="radio" name="type" value="finder" ',a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.checkify,o?o.call(t,t.type,"finder",a):l.call(t,"checkify",t.type,"finder",a));if(u||u===0)s+=u;s+=' />\n          <strong>OS X&trade; Finder&trade;</strong>\n          </label>\n        </h4>\n        <p>A compact browser style that focuses on one folder at a time.<br /><br /></p>\n        <img class="thumbnail" height="208px" src="/assets/images/shots/finder_browser_02.png" />\n        <p class="hint"><em>This style is optimal if your space contains folders and pages within a deep hierarchy.</em></p>\n      </div>\n    </li>\n\n    <li class="span3">\n      <div>\n        <h4>\n          <label><input type="radio" name="type" value="explorer" '
,a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.checkify,o?o.call(t,t.type,"explorer",a):l.call(t,"checkify",t.type,"explorer",a));if(u||u===0)s+=u;return s+='  />\n          <strong>Windows&trade; Explorer&trade;</strong>\n          </label>\n        </h4>\n          <p>The classic, expanding browser that allows you to browse all the folders and pages of your space in the same view.</p>\n        <img class="thumbnail" height="208px" src="/assets/images/shots/explorer_browser_03.png" />\n          <p class="hint"><em>This style is recommended if your folders are no more than two levels deep.</em></p>\n      </div>\n    </li>\n  </ul>\n\n  <!-- <button class="btn btn-info btn-block" ><i class="icon-film icon-white"></i> Save</button> -->\n</form>',s});return t.registerPartial("templates_browser_settings",n),n}),define("views/spaces/browser/settings",["backbone","hbs!templates/browser/settings"],function(e,t){return e.View.extend({el:$("#browser_settings"),events:{"change input":"switch_browser_type"
},template:t,initialize:function(e){this.browser=e.browser,this.state=e.browser.state,this.user=e.browser.state.current_user,this.user.on("change:preferences.workspace.browser.type",this.update_dialog,this),this.$el.hide(),this.toggler=$("#show_browser_settings");var t=this;this.update_dialog(),this.$el.dialog({dialogClass:"popdown",modal:!1,autoOpen:!1,title:"Browser Settings",show:{effect:"blind"},hide:{effect:"blind"},open:function(){t.state.UI.dialog.on_open($(this)),t.$el.dialog("widget").find("button:last").addClass("btn btn-success"),t.toggler.addClass("active")},close:function(){t.toggler.removeClass("active")},buttons:{Cancel:function(){$(this).dialog("close")},Save:function(){t.switch_browser_type(),$(this).dialog("close")}}})},update_dialog:function(){var e=this,t=this.template(this.user.get("preferences.workspace.browser")||{});this.$el.html(t)},render:function(){var e=this;return this.$el.dialog("open"),this},serialize:function(){return{preferences:{workspace:{browser:this.
$el.find("form").serializeObject()}}}},switch_browser_type:function(e){this.state.trigger("sync_runtime_preferences_now",this.serialize())}})}),define("views/spaces/browser/_impl",["backbone"],function(e){return e.View.extend({el:$("#browser"),highlight_folder:function(e){return e.ctx.browser.title.addClass("selected"),this},highlight_current_folder:function(e){return e.ctx.browser.title.addClass("current"),e.ctx.browser.title.focus(),this},dehighlight_folder:function(){return this.$el.find(".folders .selected").removeClass("selected"),this},dehighlight_current_folder:function(){return this.$el.find(".folders .current").removeClass("current"),this},highlight_page:function(e){return e.ctx.browser.anchor.addClass("selected"),this},highlight_current_page:function(e){return e.ctx.browser.anchor.addClass("current"),e.ctx.browser.anchor.focus(),this},dehighlight_page:function(){return this.$el.find(".pages .selected").removeClass("selected"),this},dehighlight_current_page:function(){return this
.$el.find(".pages .current").removeClass("current"),this},on_folder_loaded:function(e,t){},on_folder_rendered:function(e){},on_page_rendered:function(e){},place_folder:function(e){},place_page:function(e){},render:function(e){return this.setup(e),this.$el.add(this.$el.parent()).addClass(this.css_class),this},setup:function(e){},reset:function(){return this.cleanup(),this.$el.add(this.$el.parent()).removeClass(this.css_class),this},cleanup:function(){}})}),define("views/spaces/browser/finder_navigator",["jquery","backbone","shortcut"],function(e,t,n){var r=40,i=38,s=1234,o=37,u=39,a=13,f=32,l=27,c=113,h=9,p=46,d=0,v=1,m=2;return t.View.extend({el:e("#browser"),initialize:function(t){var n=this;this.browser=t.browser,this.ctx=t.browser.ctx,this.state=t.browser.state,this.workspace=t.browser.workspace,this.events={"click a":"focus_capturer"},this.__lookup_proxy=e.proxy(n.proxy_lookup,n),this.__navigate_proxy=e.proxy(n.proxy_navigate,n),this.__hide_capturer_on_metakey=function(e){return(e.which==
l||e.which==a)&&n.hide_capturer(),!0},this.elements={capturer:e("#browser_input_capturer")}},focus_capturer:function(){return this.elements.capturer.focus()},unfocus_capturer:function(){return this.state.workspace.editor.focus(),this},hide_capturer:function(){return this},show_capturer:function(e){return this},navigation:{next_resource:function(){return this.navigate(r)},prev_resource:function(){return this.navigate(i)},open_parent:function(){return this.navigate(s)},open_folder:function(){return this.navigate(u)}},setup:function(e){var t=this;return n.add("ctrl+alt+down",t.navigation.next_resource,{context:t}),n.add("ctrl+alt+up",t.navigation.prev_resource,{context:t}),n.add("alt+up",t.navigation.open_parent,{context:t}),n.add("ctrl+alt+left",t.navigation.open_parent,{context:t}),n.add("ctrl+alt+right",t.navigation.open_folder,{context:t}),n.add("ctrl+alt+o",t.focus_capturer,{context:t}),this.elements.capturer.on("keydown",this.__navigate_proxy),this.delegateEvents(),this},cleanup:function(
){var e=this;return n.remove("ctrl+alt+down",e.navigation.next_resource),n.remove("ctrl+alt+up",e.navigation.prev_resource),n.remove("alt+up",e.navigation.open_parent),n.remove("ctrl+alt+left",e.navigation.open_parent),n.remove("ctrl+alt+right",e.navigation.open_folder),n.remove("ctrl+alt+o",e.focus_capturer),this.undelegateEvents(),this.elements.capturer.off("keydown",this.__navigate_proxy),this.hide_capturer(),this},proxy_navigate:function(e){return e.altKey||e.ctrlKey||e.shiftKey?!0:this.navigate(e.which,e)},navigate:function(t,n){if(this.elements.capturer.hasClass("shown"))return!0;var g=this.$el.find(".selected:visible").first(),g=g.length==1?g:this.$el.find(".current:visible").first(),y=this.$el.find(".folder:visible > a:visible, .page:visible > a:visible"),b=y.index(g),w=y.length,E=null,S=this;console.log("navigation current: "+g.html()+" ["+t+"]"),console.log("  available choices: "+w+", me @ "+b);var x=function(t,n,g,b){var w=null,E=d;switch(g){case r:w=t==n-1?0:t+1;break;case i
:w=t<=0?n-1:t-1;break;case c:if(b.parent().hasClass("folder"))return S.browser.actionbar.elements.edit_folder.click(),!1;break;case p:if(b.parent().hasClass("folder"))return S.browser.actionbar.elements.delete_folder.click(),!1;break;case o:if(!b.parent().hasClass("folder"))break;case s:e("#goto_parent_folder:visible").length>0&&(w=y.index(e("#goto_parent_folder > a")),E=v);break;case u:e(b).parent().hasClass("folder")&&(w=t,E=v);break;case a:case f:w=t,E=b.parent().hasClass("folder")?v:m;break;case l:if(!S.elements.capturer.is(":focus"))return!1;S.browser.reset_highlights(),S.state.workspace.editor.focus();break;case h:return!1;default:return!1}return{index:w,action:E}};E=x(b,w,t,g);if(!E)return!1;console.log("  target idx: "+E.index);if(E.index>=0){E.el=y[E.index],e(E.el).hasClass("current")&&(E=x(E.index,w,t,g),E.el=y[E.index],console.log("    modified target idx: "+E.index)),console.log("action: "+E.action);switch(E.action){case v:if(e(E.el).parent().attr("id")=="goto_parent_folder"
){var T=this.workspace.current_folder;e(E.el).click().dblclick(),this.browser.highlight_folder(T)}else e(E.el).click().dblclick(),this.navigate(r),this.navigate(r);break;case m:e(E.el).click().dblclick(),this.browser.reset_highlights();break;default:e(E.el).click()}}return!0},proxy_lookup:function(e){return this.lookup(e)},lookup:function(t){if(t.which==a)return this.hide_capturer();this.elements.capturer.hasClass("shown")||this.show_capturer();var n=this.$el.find(".selected:visible").first(),n=n.length==1?n:this.$el.find(".current:visible").first(),r=this.$el.find(".folder:visible > a:visible, .page:visible > a:visible"),i=this.elements.capturer.val().trim().toLowerCase();if(i.length==0)return!0;var s=r.filter(function(){return e(this).text().trim().toLowerCase().indexOf(i)!=-1}).first();return e(s).click(),!0}})}),define("views/spaces/browser/finder",["jquery","backbone","views/spaces/browser/_impl","views/spaces/browser/drag_manager","views/spaces/browser/finder_navigator","pagehub"]
,function(e,t,n,r,i,s){return n.extend({initialize:function(t){var n=this;this.browser=t.browser,this.ctx=t.browser.ctx,this.space=t.browser.space,this.workspace=t.browser.workspace,this.css_class="finder-like",this.browser_type="finder",this.elements={go_up:e("#goto_parent_folder")},this.navigator=new i(t),this.drag_mgr=new r({space:this.space,browser:this.browser,workspace:this.workspace}),this.browser.on("folder_reordered",function(e,t){e.ctx.browser.el.show(),e.ctx.browser.title.show()},this)},setup:function(e){var t=this;return this.$el.find(".folders, .pages, .folder-title").hide(),this.navigator.setup(),this.space.folders.on("change:parent.id",this.show_folder_if_applicable,this),this},cleanup:function(){var e=this;return this.space.folders.off("change:parent.id",this.show_folder_if_applicable,this),this.navigator.cleanup(),this.$el.find(".folder, .folders, .pages, .folder-title").show().end().find(".general-folder > .folder-title").hide(),this.elements.go_up.hide(),this},on_folder_rendered
:function(e){e!=this.workspace.current_folder&&e.ctx.browser.empty_label.hide()},on_folder_loaded:function(e,t){this.$el.find(".folders, .pages, .folder-title").hide();var n=e.ctx.browser.el,r=e.ctx.browser.folder_listing,i=e.ctx.browser.page_listing,s=e.ctx.browser.title;return s.hide(),e.has_parent()&&(this.elements.go_up.attr("data-folder",e.get_parent().get("id")).find("a").attr("href","#"+e.get_parent().path()).end().show().children().show(),r.prepend(this.elements.go_up)),n.hide().parents(".folder > .folders").show(),r.show().find("> .folder").show().find("> .folder-title").show().end().find(".pages").hide(),i.show(),n.show("drop",{},250),!0},dehighlight_folder:function(){return this.$el.find(".folders .selected").removeClass("selected"),!1},highlight_folder:function(e){return e?e.ctx?(this.dehighlight_folder(),!e.ctx.browser.title.is(":visible")&&this.elements.go_up.attr("data-folder")==e.get("id")?this.elements.go_up.find("a").addClass("selected"):e.ctx.browser.title.addClass("selected"
),this):s.report_error("Unable to highlight folder#"+e.get("id")+", bad context: "+JSON.stringify(e.ctx)):s.report_error("Unable to highlight folder.")},show_folder_if_applicable:function(e){if(!e.has_parent()||!e.ctx.browser||!this.workspace.current_folder)return!0;var t=e.get_parent()==this.workspace.current_folder;e.ctx.browser.el.toggle(t)}})}),define("views/spaces/browser/explorer",["jquery","underscore","backbone","views/spaces/browser/_impl","views/spaces/browser/drag_manager","pagehub"],function(e,t,n,r,i,s){var o=function(e){return u(e)||e.state.current_user.set("preferences.runtime.spaces."+e.state.space.get("id"),{collapsed:[]}),!0},u=function(e){var n=e.state.space.get("id"),r=e.state.current_user.get("preferences.runtime.spaces."+n+".collapsed");return t.uniq(r)},a=function(e,n){var r=e.state.space.get("id"),i=t.uniq(n);return e.state.current_user.set("preferences.runtime.spaces."+r+".collapsed",i)};return r.extend({events:{"click button[data-collapse]":"collapse","click .current"
:"dehighlight_related"},initialize:function(e){this.state=e.state,this.workspace=e.workspace,this.css_class="explorer-like",this.browser_type="explorer",o(this)},on_folder_loaded:function(e){return this.highlight_folder(e)},setup:function(t){this.workspace.current_folder&&this.highlight_current_folder(this.workspace.current_folder),e(".pages").each(function(t){e(t).children(":visible").length===0&&e(t).find(".empty-folder").show()})},dehighlight_related:function(){this.$el.find(".selected-related").removeClass("selected-related")},dehighlight_related_current:function(){this.$el.find(".current-related").removeClass("current-related")},cleanup:function(){this.$el.find(".selected-related, .current-related").removeClass("selected-related current-related")},on_folder_rendered:function(e){return u(this).indexOf(parseInt(e.get("id")))!=-1&&this.__collapse(e.ctx.browser.collapser),this},highlight_folder:function(e){return this.$el.find(".selected-related").removeClass("selected-related"),e.ctx.
browser.title.addClass("selected"),t.each(e.ancestors(),function(e){e.ctx.browser.title.addClass("selected-related")}),this},highlight_current_folder:function(e){return this.cleanup(),e.ctx.browser.title.addClass("current"),t.each(e.ancestors(),function(e){e.ctx.browser.title.addClass("current-related")}),this.__expand(e.ctx.browser.el.find("[data-collapse]:first")),this},highlight_page:function(e){return r.prototype.highlight_page.apply(this,arguments),this.highlight_folder(e.folder)},highlight_current_page:function(e){return r.prototype.highlight_current_page.apply(this,arguments),this.highlight_current_folder(e.folder)},collapse:function(t){var n=e(t.target);n.attr("data-collapse")===null&&(n=n.parents(".folder:first").find("[data-collapse]:first")),this.toggle_collapse(n).sync()},__expand:function(e){var t=parseInt(e.parent().attr("id").replace("folder_",""),10),n=u(this),r=n.indexOf(t);return e.prop("data-collapsed",!1).siblings(":not(.folder-title)").show().end().parent().removeClass
("collapsed"),r>-1&&(n.splice(r,1),a(this,n)),this},__collapse:function(e){var t=parseInt(e.parent().attr("id").replace("folder_",""));return e.prop("data-collapsed",!0).siblings(":not(.folder-title)").hide().end().parent().addClass("collapsed"),u(this).push(t),this},toggle_collapse:function(e){return e.prop("data-collapsed")?this.__expand(e):this.__collapse(e)},sync:function(){var e={preferences:{runtime:{spaces:{}}}};return e.preferences.runtime.spaces[this.state.space.get("id")]={collapsed:u(this)},this.state.trigger("sync_runtime_preferences",e),this}})}),define("hbs!templates/browser/folder",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){return" general-folder"}function h(e,t){return' draggable="true"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression,l=this;s+='<li data-url="'+f((o=(o=t.media,o==null||o===!1?o:o.url),typeof o===a?o.apply(t):o))+'"\n    data-parent="'+f((o=(o=t.parent,o==null||
o===!1?o:o.id),typeof o===a?o.apply(t):o))+'"\n    data-collapsible\n    id="folder_',(u=n.id)?u=u.call(t,{hash:{}}):(u=t.id,u=typeof u===a?u.apply(t):u),s+=f(u)+'"\n    class="folder',u=n.unless.call(t,(o=t.parent,o==null||o===!1?o:o.id),{hash:{},inverse:l.noop,fn:l.program(1,c,i)});if(u||u===0)s+=u;s+='">\n\n  <button data-collapse></button>\n  <a href="#',(u=n.path)?u=u.call(t,{hash:{}}):(u=t.path,u=typeof u===a?u.apply(t):u),s+=f(u)+'" class="folder-title"',u=n["if"].call(t,(o=t.parent,o==null||o===!1?o:o.id),{hash:{},inverse:l.noop,fn:l.program(3,h,i)});if(u||u===0)s+=u;s+='>\n    <i class="icon-folder-close"></i>',(u=n.title)?u=u.call(t,{hash:{}}):(u=t.title,u=typeof u===a?u.apply(t):u);if(u||u===0)s+=u;return s+='\n  </a>\n\n  <ol class="listing folders"></ol>\n  <ol class="listing pages">\n    <li class="empty-folder"><i class="icon-warning-sign"></i> This folder has no pages.</li>\n  </ol>\n</li>',s});return t.registerPartial("templates_browser_folder",n),n}),define("hbs!templates/browser/page"
,["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a="function",f=this.escapeExpression;s+='<li class="page" data-folder="'+f((o=(o=t.folder,o==null||o===!1?o:o.id),typeof o===a?o.apply(t):o))+'" data-page="',(u=n.id)?u=u.call(t,{hash:{}}):(u=t.id,u=typeof u===a?u.apply(t):u),s+=f(u)+'">\n  <a href="#',(u=n.path)?u=u.call(t,{hash:{}}):(u=t.path,u=typeof u===a?u.apply(t):u),s+=f(u)+'" id="page_',(u=n.id)?u=u.call(t,{hash:{}}):(u=t.id,u=typeof u===a?u.apply(t):u),s+=f(u)+'" class="page-title" draggable="true"><i class="icon-file"></i>',(u=n.title)?u=u.call(t,{hash:{}}):(u=t.title,u=typeof u===a?u.apply(t):u);if(u||u===0)s+=u;return s+="</a>\n</li>",s});return t.registerPartial("templates_browser_page",n),n}),define("views/spaces/browser/browser",["jquery","backbone","views/spaces/browser/drag_manager","views/spaces/browser/actionbar","views/spaces/browser/settings","views/spaces/browser/_impl","views/spaces/browser/finder"
,"views/spaces/browser/explorer","hbs!templates/browser/folder","hbs!templates/browser/page","hbs!templates/dialogs/destroy_folder","pagehub","shortcut","jquery.tinysort"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){return t.View.extend({el:e("#browser"),templates:{folder:a,page:f},events:{"click .folder > a:not(.selected, .current)":"proxy_highlight_folder","click .page   > a:not(.selected, .current)":"proxy_highlight_page","click .current":"reset_highlights"},initialize:function(t){var n=this;_.implode(this,t),this.offset=145,this.workspace.on("folder_loaded",this.switch_to_folder,this),this.workspace.on("page_loaded",this.switch_to_folder_and_load_page,this),e(window).on("resize",function(){return n.resize()}),this.workspace.on("reset",this.reset_highlights,this),this.workspace.on("reset",this.reset_current_highlights,this),this.space.folders.on("add",this.render_folder,this),this.space.folders.on("remove",this.remove_folder,this),this.space.folders.on("change:title",this.update_meta,this),this
.space.folders.on("change:path",this.update_meta,this),this.space.folders.on("change:title",this.reorder_folder,this),this.space.folders.on("change:parent.id",this.refresh_folder_pages,this),this.space.folders.on("change:parent.id",this.reorder_folder,this),this.state.current_user.on("change:preferences.workspace.browser.type",this.render,this),this.state.current_user.on("change:preferences.workspace.scrolling",this.resize,this),this.actionbar=new r({browser:this}),this.settings=new i({browser:this}),this.elements={scroller:e("#browser_scroller")},this.__finder=new o({state:this.state,workspace:this.workspace,browser:this}),this.__explorer=new u({state:this.state,workspace:this.workspace}),h.add("ctrl+alt+g",function(){n.set_browser_type(n.impl.browser_type=="explorer"?"finder":"explorer")}),this.render(),this.state.on("bootstrapped",function(){this.$el.show(),this.space.folders.every(function(e){return e.pages.on("add",this.reorder_page,this),this.reorder_folder(e),!0},this),this.workspace
.current_folder&&(this.impl.on_folder_loaded(this.workspace.current_folder),this.focus()),this.space.folders.on("add",this.reorder_folder,this)},this)},set_browser_type:function(e){if(this.impl&&this.impl.browser_type==e)return this;var t=!1;this.impl&&(this.impl.reset(this.ctx),t=!0),this.impl=e=="explorer"?this.__explorer:this.__finder,this.impl.render(this.ctx);if(t){var n=this.workspace.current_page,r=this.workspace.current_folder;this.workspace.trigger("reset"),n?this.workspace.trigger("load_page",n):r?this.workspace.trigger("load_folder",r):this.workspace.trigger("load_folder",this.space.root_folder())}return this},render:function(){return this.resize(),this.set_browser_type(this.state.current_user.get("preferences.workspace.browser.type")||"finder"),this.focus(),this},focus:function(){return this.workspace.current_page?this.workspace.current_page.ctx.browser.title.focus():this.workspace.current_folder&&this.workspace.current_folder.ctx.browser.title.focus(),this},pass:function(e)
{return!0},consume:function(e){return e.preventDefault(),!1},resize:function(){this.state.current_user.get("preferences.workspace.scrolling")?this.elements.scroller.css({"max-height":e(window).height()-this.offset,"min-height":"inherit"}):this.elements.scroller.css({"max-height":"inherit","min-height":e(window).height()-this.offset})},folder_from_title:function(t){var n=e(t).parents(".folder:first"),r=null;return n.attr("data-folder")?r=n.attr("data-folder"):n.attr("id")&&(r=n.attr("id").replace("folder_","")),this.space.folders.get(r)},page_from_title:function(t){var t=e(t).parents(".page:first"),n=null,r=null,i=this.space.folders.get(t.attr("data-folder"));return i?i.pages.get(t.attr("data-page")):null},resource_data:function(t){return e.extend(!0,t.toJSON(),{path:t.path()})},render_folder:function(e){if(!e.get("id")||!e.get("title"))throw e;var t=this.resource_data(e),n=this.templates.folder(t),r=this.$el,i=r.append(n).children().last();return e.ctx.browser={el:i,title:i.find("> .folder-title"
),anchor:i.find("> .folder-title"),title_icon:i.find("> .folder-title i"),collapser:i.find("button[data-collapse]"),folder_listing:i.find("ol.folders"),page_listing:i.find("ol.pages"),empty_label:i.find(".empty-folder")},e.pages.on("add",this.render_page,this),e.pages.on("remove",this.remove_page,this),e.pages.on("change:title",this.update_meta,this),e.pages.on("change:path",this.update_meta,this),e.pages.on("change:title",this.reorder_page,this),this.impl.on_folder_rendered(e),e.ctx.browser.empty_label.show(),this},remove_folder:function(e){e.ctx.browser.el.remove()},render_page:function(e){var t=this.resource_data(e),n=e.collection.folder,r=n.ctx.browser.page_listing.append(this.templates.page(t)).children().last();return n.ctx.browser.empty_label.hide(),e.ctx.browser={el:r,anchor:r.find("a"),title:r.find("a"),title_icon:r.find("i")},this.impl.on_page_rendered(e),this},remove_page:function(e){e.ctx.browser.el.remove(),e.folder.ctx.browser.empty_label.toggle(e.folder.pages.length==0)},
reset_highlights:function(){return this.impl.dehighlight_folder(this.ctx.selected_folder),this.impl.dehighlight_page(this.ctx.selected_page),this.ctx.selected_folder=null,this.ctx.selected_page=null,this},reset_current_highlights:function(){return this.impl.dehighlight_current_folder(),this.impl.dehighlight_current_page(),this},proxy_highlight_folder:function(t){return this.highlight_folder(this.folder_from_title(e(t.target))),this.consume(t)},highlight_folder:function(e){if(!e)return c.report_error("[browser]: no such folder to highlight");this.reset_highlights(),this.ctx.selected_folder=e,this.impl.highlight_folder(e),this.trigger("folder_selected",e)},proxy_highlight_page:function(t){return this.highlight_page(this.page_from_title(e(t.target))),this.consume(t)},highlight_page:function(e){if(!e)return c.report_error("[browser]: no such page to highlight");this.reset_highlights(),this.ctx.selected_page=e,this.impl.highlight_page(e),this.trigger("page_selected",e)},switch_to_folder:function(
e){return this.impl.on_folder_loaded(e),this.impl.highlight_current_folder(e),this},switch_to_folder_and_load_page:function(e){return this.reset_current_highlights(),this.impl.highlight_current_page(e),this},update_meta:function(e){if(!e.ctx.browser)return null;console.log("updating resource meta: "+e.get("title"));var t=e.ctx.browser.title_icon.detach();return e.ctx.browser.title.html(e.get("title")).prepend(t),e.ctx.browser.anchor.attr("href","#"+e.path()),!0},reorder_folder:function(e){var t=e.get_parent();if(e.ctx.browser&&t&&t.ctx.browser){var n=t.ctx.browser.folder_listing,r=e.ctx.browser.el;n.append(r),n.find("> li:not([data-meta])").tsort("> .folder-title"),this.trigger("folder_reordered",e,t)}},reorder_page:function(e){if(!e.ctx.browser)return null;var t=e.collection.folder.ctx.browser.page_listing,n=e.ctx.browser.el;console.log("repositioning page within "+e.collection.folder.get("title")),t.append(n),t.find("li").tsort("> a:first-child")}})}),define("hbs!templates/move_folder_link"
,["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;return s+='<a data-folder="',(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===u?o.apply(t):o),s+=a(o)+'">',(o=n.full_path)?o=o.call(t,{hash:{}}):(o=t.full_path,o=typeof o===u?o.apply(t):o),s+=a(o)+"</a>\n",s});return t.registerPartial("templates_move_folder_link",n),n}),define("hbs!templates/dialogs/destroy_page",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function",a=this.escapeExpression;s+="<div>\n  <p>Are you sure you want to remove the page '",(o=n.title)?o=o.call(t,{hash:{}}):(o=t.title,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+="'?</p>\n  <p>This page has ",(o=n.nr_revisions)?o=o.call(t,{hash:{}}):(o=t.nr_revisions,o=typeof o===u?o.apply(t):o),s+=a(o)+' <a tabindex="-10" href="'+a((o=(o=(o=t.media,o==
null||o===!1?o:o.revisions),o==null||o===!1?o:o.url),typeof o===u?o.apply(t):o))+'" target="_blank">revisions</a>.</p>\n</div>',s});return t.registerPartial("templates_dialogs_destroy_page",n),n}),define("views/spaces/page_actionbar",["animable_view","hbs!templates/move_folder_link","hbs!templates/dialogs/destroy_page","shortcut","pagehub","timed_operation"],function(e,t,n,r,i,s){return e.extend({el:$("#page_actions"),events:{"click a#save_page":"proxy_save_page","click a#destroy_page":"destroy_page","click a#edit_page":"proxy_edit_page"},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.workspace.on("page_loaded",this.on_page_loaded,this),this.workspace.on("current_page_updated",this.on_page_loaded,this),this.workspace.on("reset",this.reset,this),this.disabled=!1,this.anchors={preview:this.$el.find("#preview"),edit:this.$el.find("#edit_page"),destroy:this.$el.find("#destroy_page"),revisions:this.$el.find("#revisions")},this.state.current_user.get("preferences.editing.autosave"
)&&(console.log("Page content will be autosaved every "+this.state.get("preferences.pulses.page_content")/1e3+" seconds."),this.autosaver=new s(this,this.save_page,{pulse:this.state.get("preferences.pulses.page_content"),with_flag:!0,autoqueue:!0})),this.state.on("hide_actionbar",this.hide,this),this.state.on("finder_hidden",this.show,this),this.bootstrap()},bootstrap:function(){var e=this;r.add("ctrl+alt+s",function(){e.save_page()}),r.add("ctrl+alt+v",function(){e.preview_page()}),r.add("ctrl+alt+d",function(){e.destroy_page()}),r.add("ctrl+alt+e",function(){e.anchors.edit.click()}),this.disable()},reset:function(){this.disable()},hide:function(){var e=this;return this.animable()?this.disable().$el.hide("slide",{},this.anime_length,function(){e.state.trigger("actionbar_hidden")}):(this.disable().$el.hide(),e.state.trigger("actionbar_hidden")),this},show:function(){var e=this;return this.animable()?this.enable().$el.show("slide",{},this.anime_length,function(){e.state.trigger("actionbar_shown"
)}):(this.enable().$el.show(),e.state.trigger("actionbar_shown")),this},disable:function(){return this.$el.prop("disabled",!0).addClass("disabled"),this.disabled=!0,this.autosaver&&this.autosaver.stop(),this},enable:function(){return this.$el.prop("disabled",!1).removeClass("disabled"),this.disabled=!1,this.autosaver&&this.autosaver.start(),this},on_page_loaded:function(e){this.enable(),this.anchors.preview.attr("href",e.get("media").href),this.anchors.revisions.attr("href",e.get("media").revisions.url),e.get("nr_revisions")==1?this.anchors.revisions.addClass("disabled").attr("href",null):this.anchors.revisions.removeClass("disabled")},proxy_save_page:function(){return this.save_page(!1)},save_page:function(e){if(this.disabled)return!1;if(!this.editor.content_changed())return this;this.editor.serialize();var t=this.workspace.current_page;return t.save({content:t.get("content"),no_object:!0},{patch:!0,wait:!0,success:function(){e||i.status.show("Updated.","good")}}),this},preview_page:function(
){if(this.disabled)return!1;window.open(this.workspace.current_page.get("media").href,"_preview")},destroy_page:function(){if(this.disabled)return!1;var e=this,t=this.workspace.current_page,r=this.workspace.current_page.collection,s=n(t.toJSON()),o=$(s).dialog({title:"Page removal",dialogClass:"warning",buttons:{Cancel:function(){o.dialog("close")},Remove:function(){t.destroy({wait:!0,success:function(e,t){i.status.show("Deleted.","good"),o.dialog("close")}})}}})},proxy_edit_page:function(e){return this.edit_page(this.workspace.current_page)},edit_page:function(e){if(this.disabled)return!1;var t=this;$.ajax({headers:{Accept:"text/html; charset=utf-8","Content-Type":"text/html; charset=utf-8"},type:"GET",accept:"text/html",url:e.get("media").url+"/edit",success:function(t){var n=$("<div>"+t+"</div>").dialog({title:"Page properties",buttons:{Cancel:function(){$(this).dialog("close")},Update:function(t){var r=n.find("form").serializeObject();e.save(r,{wait:!0,patch:!0,success:function(){i.
status.show("Updated.","good"),console.log(e.toJSON()),n.dialog("close")}}),t.preventDefault()}}})}})}})}),define("views/spaces/general_actionbar",["backbone"],function(e){return e.View.extend({el:$("#general_actionbar"),events:{"click #switch_layout":"switch_layout","click #switch_scrolling":"switch_scrolling","click #switch_animability":"switch_animability","click #refresh_editor":"delegate_refresh_editor"},initialize:function(e){_.implode(this,e),this.elements={switch_layout:this.$el.find("#switch_layout"),switch_scrolling:this.$el.find("#switch_scrolling"),switch_animability:this.$el.find("#switch_animability")},this.is_fluid=this.state.current_user.get("preferences.workspace.fluid"),this.is_scrolling=this.state.current_user.get("preferences.workspace.scrolling"),this.is_animable=this.state.current_user.get("preferences.workspace.animable"),this.render()},render:function(){return this.elements.switch_layout.toggleClass("selected",this.is_fluid),this.elements.switch_scrolling.toggleClass
("selected",!this.is_scrolling),this.elements.switch_animability.toggleClass("selected",!this.is_animable),$("body").toggleClass("fluid",this.is_fluid),$("body").toggleClass("no-scroll",!this.is_scrolling),this},switch_layout:function(){return this.is_fluid=!this.is_fluid,this.render(),this.space.trigger("workspace_layout_changed",{fluid:this.is_fluid}),this.state.trigger("sync_runtime_preferences",{preferences:{workspace:{fluid:this.is_fluid}}}),!0},switch_scrolling:function(){return this.is_scrolling=!this.is_scrolling,this.render(),this.space.trigger("workspace_layout_changed",{scrolling:this.is_scrolling}),this.state.trigger("sync_runtime_preferences",{preferences:{workspace:{scrolling:this.is_scrolling}}}),!0},switch_animability:function(){this.is_animable=!this.is_animable,this.render(),this.state.trigger("sync_runtime_preferences",{preferences:{workspace:{animable:this.is_animable}}})},delegate_refresh_editor:function(){this.space.trigger("refresh_editor")}})}),function(e){if(typeof 
exports=="object"&&typeof module=="object")module.exports=e();else{if(typeof define=="function"&&define.amd)return define("cm/lib/codemirror",[],e);this.CodeMirror=e()}}(function(){function S(e,t){if(!(this instanceof S))return new S(e,t);this.options=t=t||{},Uo(li,t,!1),B(t);var n=t.value;typeof n=="string"&&(n=new Bs(n,t.mode)),this.doc=n;var s=this.display=new x(e,n);s.wrapper.CodeMirror=this,_(this),O(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),t.autofocus&&!d&&tr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new _o},r&&i<11&&setTimeout(zo(er,this,!0),20),ir(this),au();var o=this;jn(this,function(){o.curOp.forceUpdate=!0,qs(o,n),t.autofocus&&!d||tu()==s.input?setTimeout(zo(Pr,o),20):Hr(o);for(var e in ci)ci.hasOwnProperty(e)&&ci[e](o,t[e],pi);U(o);for(var r=0;r<gi.length;++r)gi[r](o)})}function x(e,t){var n=this,o=n.input=Qo("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"
);s?o.style.width="1000px":o.setAttribute("wrap","off"),p&&(o.style.border="1px solid black"),o.setAttribute("autocorrect","off"),o.setAttribute("autocapitalize","off"),o.setAttribute("spellcheck","false"),n.inputDiv=Qo("div",[o],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),n.scrollbarH=Qo("div",[Qo("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar"),n.scrollbarV=Qo("div",[Qo("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),n.scrollbarFiller=Qo("div",null,"CodeMirror-scrollbar-filler"),n.gutterFiller=Qo("div",null,"CodeMirror-gutter-filler"),n.lineDiv=Qo("div",null,"CodeMirror-code"),n.selectionDiv=Qo("div",null,null,"position: relative; z-index: 1"),n.cursorDiv=Qo("div",null,"CodeMirror-cursors"),n.measure=Qo("div",null,"CodeMirror-measure"),n.lineMeasure=Qo("div",null,"CodeMirror-measure"),n.lineSpace=Qo("div",[n.measure,n.lineMeasure,n.selectionDiv,n.cursorDiv,n.lineDiv],null,"position: relative; outline: none"),n.mover=Qo("div"
,[Qo("div",[n.lineSpace],"CodeMirror-lines")],null,"position: relative"),n.sizer=Qo("div",[n.mover],"CodeMirror-sizer"),n.heightForcer=Qo("div",null,null,"position: absolute; height: "+ko+"px; width: 1px;"),n.gutters=Qo("div",null,"CodeMirror-gutters"),n.lineGutter=null,n.scroller=Qo("div",[n.sizer,n.heightForcer,n.gutters],"CodeMirror-scroll"),n.scroller.setAttribute("tabIndex","-1"),n.wrapper=Qo("div",[n.inputDiv,n.scrollbarH,n.scrollbarV,n.scrollbarFiller,n.gutterFiller,n.scroller],"CodeMirror"),r&&i<8&&(n.gutters.style.zIndex=-1,n.scroller.style.paddingRight=0),p&&(o.style.width="0px"),s||(n.scroller.draggable=!0),l&&(n.inputDiv.style.height="1px",n.inputDiv.style.position="absolute"),r&&i<8&&(n.scrollbarH.style.minHeight=n.scrollbarV.style.minWidth="18px"),e.appendChild?e.appendChild(n.wrapper):e(n.wrapper),n.viewFrom=n.viewTo=t.first,n.view=[],n.externalMeasured=null,n.viewOffset=0,n.lastSizeC=0,n.updateLineNumbers=null,n.lineNumWidth=n.lineNumInnerWidth=n.lineNumChars=null,n.prevInput=""
,n.alignWidgets=!1,n.pollingFast=!1,n.poll=new _o,n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.inaccurateSelection=!1,n.maxLine=null,n.maxLineLength=0,n.maxLineChanged=!1,n.wheelDX=n.wheelDY=n.wheelStartX=n.wheelStartY=null,n.shift=!1,n.selForContextMenu=null}function T(e){e.doc.mode=S.getMode(e.options,e.doc.modeOption),N(e)}function N(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,Vt(e,100),e.state.modeGen++,e.curOp&&zn(e)}function C(e){e.options.lineWrapping?(iu(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth=""):(ru(e.display.wrapper,"CodeMirror-wrap"),H(e)),L(e),zn(e),hn(e),setTimeout(function(){I(e)},100)}function k(e){var t=Tn(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/Nn(e.display)-3);return function(i){if(ss(e.doc,i))return 0;var s=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(s+=i.widgets[o].height);return n?s+
(Math.ceil(i.text.length/r)||1)*t:s+t}}function L(e){var t=e.doc,n=k(e);t.iter(function(e){var t=n(e);t!=e.height&&Ws(e,t)})}function A(e){var t=Si[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:"")}function O(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),hn(e)}function M(e){_(e),zn(e),setTimeout(function(){R(e)},20)}function _(e){var t=e.display.gutters,n=e.options.gutters;Yo(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(Qo("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none",D(e)}function D(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px",e.display.scrollbarH.style.left=e.options.fixedGutter?t+"px":0}function P(e){if(e.height==0)return 0;var t=e.text.length,n,r=
e;while(n=Yi(r)){var i=n.find(0,!0);r=i.from.line,t+=i.from.ch-i.to.ch}r=e;while(n=Zi(r)){var i=n.find(0,!0);t-=r.text.length-i.from.ch,r=i.to.line,t+=r.text.length-i.to.ch}return t}function H(e){var t=e.display,n=e.doc;t.maxLine=Rs(n,n.first),t.maxLineLength=P(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=P(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function B(e){var t=Io(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function j(e){return e.display.scroller.clientHeight-e.display.wrapper.clientHeight<ko-3}function F(e){var t=e.display.scroller;return{clientHeight:t.clientHeight,barHeight:e.display.scrollbarV.clientHeight,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth,hScrollbarTakesSpace:j(e),barWidth:e.display.scrollbarH.clientWidth,docHeight:Math.round(e.doc.height+Gt(e.display))}}function I(e,t){t||(t=F(e));var n=e.display
,r=hu(n.measure),i=t.docHeight+ko,s=t.scrollWidth>t.clientWidth;s&&t.scrollWidth<=t.clientWidth+1&&r>0&&!t.hScrollbarTakesSpace&&(s=!1);var o=i>t.clientHeight;o?(n.scrollbarV.style.display="block",n.scrollbarV.style.bottom=s?r+"px":"0",n.scrollbarV.firstChild.style.height=Math.max(0,i-t.clientHeight+(t.barHeight||n.scrollbarV.clientHeight))+"px"):(n.scrollbarV.style.display="",n.scrollbarV.firstChild.style.height="0"),s?(n.scrollbarH.style.display="block",n.scrollbarH.style.right=o?r+"px":"0",n.scrollbarH.firstChild.style.width=t.scrollWidth-t.clientWidth+(t.barWidth||n.scrollbarH.clientWidth)+"px"):(n.scrollbarH.style.display="",n.scrollbarH.firstChild.style.width="0"),s&&o?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=n.scrollbarFiller.style.width=r+"px"):n.scrollbarFiller.style.display="",s&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r+"px",n.gutterFiller.style.width=n.gutters
.offsetWidth+"px"):n.gutterFiller.style.display="";if(!e.state.checkedOverlayScrollbar&&t.clientHeight>0){if(r===0){var u=v&&!c?"12px":"18px";n.scrollbarV.style.minWidth=n.scrollbarH.style.minHeight=u;var a=function(t){vo(t)!=n.scrollbarV&&vo(t)!=n.scrollbarH&&Fn(e,ar)(t)};go(n.scrollbarV,"mousedown",a),go(n.scrollbarH,"mousedown",a)}e.state.checkedOverlayScrollbar=!0}}function q(e,t,n){var r=n&&n.top!=null?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Qt(e));var i=n&&n.bottom!=null?n.bottom:r+e.wrapper.clientHeight,s=Vs(t,r),o=Vs(t,i);if(n&&n.ensure){var u=n.ensure.from.line,a=n.ensure.to.line;if(u<s)return{from:u,to:Vs(t,$s(Rs(t,u))+e.wrapper.clientHeight)};if(Math.min(a,t.lastLine())>=o)return{from:Vs(t,$s(Rs(t,a))-e.wrapper.clientHeight),to:a}}return{from:s,to:Math.max(o,s+1)}}function R(e){var t=e.display,n=t.view;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var r=W(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,s=r+"px";for(
var o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&n[o].gutter&&(n[o].gutter.style.left=s);var u=n[o].alignable;if(u)for(var a=0;a<u.length;a++)u[a].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}function U(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=z(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(Qo("div",[Qo("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",D(e),!0}return!1}function z(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function W(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function X(e,t,n){var r=e.display;this.viewport=t,this.visible=q(r,e.doc,t),this.editorIsHidden=!
r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.oldViewFrom=r.viewFrom,this.oldViewTo=r.viewTo,this.oldScrollerWidth=r.scroller.clientWidth,this.force=n,this.dims=Z(e)}function V(e,t){var n=e.display,r=e.doc;if(t.editorIsHidden)return Xn(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo)&&Kn(e)==0)return!1;U(e)&&(Xn(e),t.dims=Z(e));var i=r.first+r.size,s=Math.max(t.visible.from-e.options.viewportMargin,r.first),o=Math.min(i,t.visible.to+e.options.viewportMargin);n.viewFrom<s&&s-n.viewFrom<20&&(s=Math.max(r.first,n.viewFrom)),n.viewTo>o&&n.viewTo-o<20&&(o=Math.min(i,n.viewTo)),E&&(s=rs(e.doc,s),o=is(e.doc,o));var u=s!=n.viewFrom||o!=n.viewTo||n.lastSizeC!=t.wrapperHeight;Jn(e,s,o),n.viewOffset=$s(Rs(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var a=Kn(e);if(!u&&a==0&&!t.force&&(n.updateLineNumbers==null||n.updateLineNumbers>=n.viewTo))return!1;var f=tu();return a>4&&(n.lineDiv
.style.display="none"),et(e,n.updateLineNumbers,t.dims),a>4&&(n.lineDiv.style.display=""),f&&tu()!=f&&f.offsetHeight&&f.focus(),Yo(n.cursorDiv),Yo(n.selectionDiv),u&&(n.lastSizeC=t.wrapperHeight,Vt(e,400)),n.updateLineNumbers=null,!0}function $(e,t){var n=t.force,r=t.viewport;for(var i=!0;;i=!1){if(i&&e.options.lineWrapping&&t.oldScrollerWidth!=e.display.scroller.clientWidth)n=!0;else{n=!1,r&&r.top!=null&&(r={top:Math.min(e.doc.height+Gt(e.display)-ko-e.display.scroller.clientHeight,r.top)}),t.visible=q(e.display,e.doc,r);if(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)break}if(!V(e,t))break;G(e);var s=F(e);Ut(e),K(e,s),I(e,s)}Eo(e,"update",e),(e.display.viewFrom!=t.oldViewFrom||e.display.viewTo!=t.oldViewTo)&&Eo(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo)}function J(e,t){var n=new X(e,t);if(V(e,n)){G(e),$(e,n);var r=F(e);Ut(e),K(e,r),I(e,r)}}function K(e,t){e.display.sizer.style.minHeight=e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters
.style.height=Math.max(t.docHeight,t.clientHeight-ko)+"px"}function Q(e,t){e.display.sizer.offsetWidth+e.display.gutters.offsetWidth<e.display.scroller.clientWidth-1&&(e.display.sizer.style.minHeight=e.display.heightForcer.style.top="0px",e.display.gutters.style.height=t.docHeight+"px")}function G(e){var t=e.display,n=t.lineDiv.offsetTop;for(var s=0;s<t.view.length;s++){var o=t.view[s],u;if(o.hidden)continue;if(r&&i<8){var a=o.node.offsetTop+o.node.offsetHeight;u=a-n,n=a}else{var f=o.node.getBoundingClientRect();u=f.bottom-f.top}var l=o.line.height-u;u<2&&(u=Tn(t));if(l>.001||l<-0.001){Ws(o.line,u),Y(o.line);if(o.rest)for(var c=0;c<o.rest.length;c++)Y(o.rest[c])}}}function Y(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.offsetHeight}function Z(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:W(t),gutterTotalWidth:t.gutters
.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function et(e,t,n){function a(t){var n=t.nextSibling;return s&&v&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}var r=e.display,i=e.options.lineNumbers,o=r.lineDiv,u=o.firstChild,f=r.view,l=r.viewFrom;for(var c=0;c<f.length;c++){var h=f[c];if(!h.hidden)if(!h.node){var p=ft(e,h,l,n);o.insertBefore(p,u)}else{while(u!=h.node)u=a(u);var d=i&&t!=null&&t<=l&&h.lineNumber;h.changes&&(Io(h.changes,"gutter")>-1&&(d=!1),tt(e,h,l,n)),d&&(Yo(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(z(e.options,l)))),u=h.node.nextSibling}l+=h.size}while(u)u=a(u)}function tt(e,t,n,r){for(var i=0;i<t.changes.length;i++){var s=t.changes[i];s=="text"?st(e,t):s=="gutter"?ut(e,t,n,r):s=="class"?ot(t):s=="widget"&&at(t,r)}t.changes=null}function nt(e){return e.node==e.text&&(e.node=Qo("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.
node.appendChild(e.text),r&&i<8&&(e.node.style.zIndex=2)),e.node}function rt(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;t&&(t+=" CodeMirror-linebackground");if(e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=nt(e);e.background=n.insertBefore(Qo("div",null,t),n.firstChild)}}function it(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Ts(e,t)}function st(e,t){var n=t.text.className,r=it(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,ot(t)):n&&(t.text.className=n)}function ot(e){rt(e),e.line.wrapClass?nt(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function ut
(e,t,n,r){t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null);var i=t.line.gutterMarkers;if(e.options.lineNumbers||i){var s=nt(t),o=t.gutter=s.insertBefore(Qo("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(e.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px"),t.text);e.options.lineNumbers&&(!i||!i["CodeMirror-linenumbers"])&&(t.lineNumber=o.appendChild(Qo("div",z(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px")));if(i)for(var u=0;u<e.options.gutters.length;++u){var a=e.options.gutters[u],f=i.hasOwnProperty(a)&&i[a];f&&o.appendChild(Qo("div",[f],"CodeMirror-gutter-elt","left: "+r.gutterLeft[a]+"px; width: "+r.gutterWidth[a]+"px"))}}}function at(e,t){e.alignable&&(e.alignable=null);for(var n=e.node.firstChild,r;n;n=r){var r=n.nextSibling;n.className=="CodeMirror-linewidget"&&e.node.removeChild(n)}lt(e,t)}function ft(e,t,n,r){var i=it(e,t);return t.text=t
.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),ot(t),ut(e,t,n,r),lt(t,r),t.node}function lt(e,t){ct(e.line,e,t,!0);if(e.rest)for(var n=0;n<e.rest.length;n++)ct(e.rest[n],e,t,!1)}function ct(e,t,n,r){if(!e.widgets)return;var i=nt(t);for(var s=0,o=e.widgets;s<o.length;++s){var u=o[s],a=Qo("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||(a.ignoreEvents=!0),ht(u,a,t,n),r&&u.above?i.insertBefore(a,t.gutter||t.text):i.appendChild(a),Eo(u,"redraw")}}function ht(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function vt(e){return pt(e.line,e.ch)}function mt(e,t){return dt(e,t)<0?t:e}function gt(e,t){return dt(e,t)<0?e:t}function yt(e,t){this.ranges=e,this.primIndex=
t}function bt(e,t){this.anchor=e,this.head=t}function wt(e,t){var n=e[t];e.sort(function(e,t){return dt(e.from(),t.from())}),t=Io(e,n);for(var r=1;r<e.length;r++){var i=e[r],s=e[r-1];if(dt(s.to(),i.from())>=0){var o=gt(s.from(),i.from()),u=mt(s.to(),i.to()),a=s.empty()?i.from()==i.head:s.from()==s.head;r<=t&&--t,e.splice(--r,2,new bt(a?u:o,a?o:u))}}return new yt(e,t)}function Et(e,t){return new yt([new bt(e,t||e)],0)}function St(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function xt(e,t){if(t.line<e.first)return pt(e.first,0);var n=e.first+e.size-1;return t.line>n?pt(n,Rs(e,n).text.length):Tt(t,Rs(e,t.line).text.length)}function Tt(e,t){var n=e.ch;return n==null||n>t?pt(e.line,t):n<0?pt(e.line,0):e}function Nt(e,t){return t>=e.first&&t<e.first+e.size}function Ct(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=xt(e,t[r]);return n}function kt(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var s=dt(n,i)<0;s!=dt(r,i)<0?(i=n,n=r):s!=dt(n,r)<0&&(n=r)}return new 
bt(i,n)}return new bt(r||n,n)}function Lt(e,t,n,r){Pt(e,new yt([kt(e,e.sel.primary(),t,n)],0),r)}function At(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=kt(e,e.sel.ranges[i],t[i],null);var s=wt(r,e.sel.primIndex);Pt(e,s,n)}function Ot(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,Pt(e,wt(i,e.sel.primIndex),r)}function Mt(e,t,n,r){Pt(e,Et(t,n),r)}function _t(e,t){var n={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new bt(xt(e,t[n].anchor),xt(e,t[n].head))}};return bo(e,"beforeSelectionChange",e,n),e.cm&&bo(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?wt(n.ranges,n.ranges.length-1):t}function Dt(e,t,n){var r=e.history.done,i=jo(r);i&&i.ranges?(r[r.length-1]=t,Ht(e,t,n)):Pt(e,t,n)}function Pt(e,t,n){Ht(e,t,n),to(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Ht(e,t,n){if(No(e,"beforeSelectionChange")||e.cm&&No(e.cm,"beforeSelectionChange"))t=_t(e,t);var r=n&&n.bias||(dt(t.primary().head,e.sel.primary().head)<0?-1:1);Bt(e,Ft(e,t
,r,!0)),(!n||n.scroll!==!1)&&e.cm&&ni(e.cm)}function Bt(e,t){if(t.equals(e.sel))return;e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,To(e.cm)),Eo(e,"cursorActivity",e)}function jt(e){Bt(e,Ft(e,e.sel,null,!1),Ao)}function Ft(e,t,n,r){var i;for(var s=0;s<t.ranges.length;s++){var o=t.ranges[s],u=It(e,o.anchor,n,r),a=It(e,o.head,n,r);if(i||u!=o.anchor||a!=o.head)i||(i=t.ranges.slice(0,s)),i[s]=new bt(u,a)}return i?wt(i,t.primIndex):t}function It(e,t,n,r){var i=!1,s=t,o=n||1;e.cantEdit=!1;e:for(;;){var u=Rs(e,s.line);if(u.markedSpans)for(var a=0;a<u.markedSpans.length;++a){var f=u.markedSpans[a],l=f.marker;if((f.from==null||(l.inclusiveLeft?f.from<=s.ch:f.from<s.ch))&&(f.to==null||(l.inclusiveRight?f.to>=s.ch:f.to>s.ch))){if(r){bo(l,"beforeCursorEnter");if(l.explicitlyCleared){if(!u.markedSpans)break;--a;continue}}if(!l.atomic)continue;var c=l.find(o<0?-1:1);if(dt(c,s)==0){c.ch+=o,c.ch<0?c.line>e.first?c=xt(e,pt(c.line-1)):c=null:c.ch>u.text.length&&(c.line<e.first+e.size-1?
c=pt(c.line+1,0):c=null);if(!c){if(i)return r?(e.cantEdit=!0,pt(e.first,0)):It(e,t,n,!0);i=!0,c=t,o=-o}}s=c;continue e}}return s}}function qt(e){var t=e.display,n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),s=r.selection=document.createDocumentFragment();for(var o=0;o<n.sel.ranges.length;o++){var u=n.sel.ranges[o],a=u.empty();(a||e.options.showCursorWhenSelecting)&&zt(e,u,i),a||Wt(e,u,s)}if(e.options.moveInputWithCursor){var f=yn(e,n.sel.primary().head,"div"),l=t.wrapper.getBoundingClientRect(),c=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,f.top+c.top-l.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,f.left+c.left-l.left))}return r}function Rt(e,t){Zo(e.display.cursorDiv,t.cursors),Zo(e.display.selectionDiv,t.selection),t.teTop!=null&&(e.display.inputDiv.style.top=t.teTop+"px",e.display.inputDiv.style.left=t.teLeft+"px")}function Ut(e){Rt(e,qt(e))}function zt(e,t,n){var r=yn(e,t.head,"div",null,null,!e.options.singleCursorHeightPerLine
),i=n.appendChild(Qo("div","\u00a0","CodeMirror-cursor"));i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*e.options.cursorHeight+"px";if(r.other){var s=n.appendChild(Qo("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=r.other.left+"px",s.style.top=r.other.top+"px",s.style.height=(r.other.bottom-r.other.top)*.85+"px"}}function Wt(e,t,n){function f(e,t,n,r){t<0&&(t=0),t=Math.round(t),r=Math.round(r),s.appendChild(Qo("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?a-e:n)+"px; height: "+(r-t)+"px"))}function l(t,n,r){function h(n,r){return gn(e,pt(t,n),"div",s,r)}var s=Rs(i,t),o=s.text.length,l,c;return xu(Js(s),n||0,r==null?o:r,function(e,t,i){var s=h(e,"left"),p,d,v;if(e==t)p=s,d=v=s.left;else{p=h(t-1,"right");if(i=="rtl"){var m=s;s=p,p=m}d=s.left,v=p.right}n==null&&e==0&&(d=u),p.top-s.top>3&&(f(d,s.top,null,s.bottom),d=u,s.bottom<p.top&&f(d,s.bottom
,null,p.top)),r==null&&t==o&&(v=a);if(!l||s.top<l.top||s.top==l.top&&s.left<l.left)l=s;if(!c||p.bottom>c.bottom||p.bottom==c.bottom&&p.right>c.right)c=p;d<u+1&&(d=u),f(d,p.top,v-d,p.bottom)}),{start:l,end:c}}var r=e.display,i=e.doc,s=document.createDocumentFragment(),o=Yt(e.display),u=o.left,a=r.lineSpace.offsetWidth-o.right,c=t.from(),h=t.to();if(c.line==h.line)l(c.line,c.ch,h.ch);else{var p=Rs(i,c.line),d=Rs(i,h.line),v=ts(p)==ts(d),m=l(c.line,c.ch,v?p.text.length+1:null).end,g=l(h.line,v?0:null,h.ch).start;v&&(m.top<g.top-2?(f(m.right,m.top,null,m.bottom),f(u,g.top,g.left,g.bottom)):f(m.right,m.top,g.left-m.right,m.bottom)),m.bottom<g.top&&f(u,m.bottom,null,g.top)}n.appendChild(s)}function Xt(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style
.visibility="hidden")}function Vt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,zo($t,e))}function $t(e){var t=e.doc;t.frontier<t.first&&(t.frontier=t.first);if(t.frontier>=e.display.viewTo)return;var n=+(new Date)+e.options.workTime,r=bi(t.mode,Kt(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(s){if(t.frontier>=e.display.viewFrom){var o=s.styles,u=ys(e,s,r,!0);s.styles=u.styles;var a=s.styleClasses,f=u.classes;f?s.styleClasses=f:a&&(s.styleClasses=null);var l=!o||o.length!=s.styles.length||a!=f&&(!a||!f||a.bgClass!=f.bgClass||a.textClass!=f.textClass);for(var c=0;!l&&c<o.length;++c)l=o[c]!=s.styles[c];l&&i.push(t.frontier),s.stateAfter=bi(t.mode,r)}else ws(e,s.text,r),s.stateAfter=t.frontier%5==0?bi(t.mode,r):null;++t.frontier;if(+(new Date)>n)return Vt(e,e.options.workDelay),!0}),i.length&&jn(e,function(){for(var t=0;t<i.length;t++)Wn(e,i[t],"text")})}function Jt(e,t,n){var r,i,s=e.doc,o=n?-1:t-(e.doc
.mode.innerMode?1e3:100);for(var u=t;u>o;--u){if(u<=s.first)return s.first;var a=Rs(s,u-1);if(a.stateAfter&&(!n||u<=s.frontier))return u;var f=Do(a.text,null,e.options.tabSize);if(i==null||r>f)i=u-1,r=f}return i}function Kt(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var s=Jt(e,t,n),o=s>r.first&&Rs(r,s-1).stateAfter;return o?o=bi(r.mode,o):o=wi(r.mode),r.iter(s,t,function(n){ws(e,n.text,o);var u=s==t-1||s%5==0||s>=i.viewFrom&&s<i.viewTo;n.stateAfter=u?bi(r.mode,o):null,++s}),n&&(r.frontier=s),o}function Qt(e){return e.lineSpace.offsetTop}function Gt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Yt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=Zo(e.measure,Qo("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return!isNaN(r.left)&&!isNaN(r.right)&&(e.cachedPaddingH=r),r}function Zt(e,t,n){var r=e.options.lineWrapping,i=r&&e.display.scroller.clientWidth;
if(!t.measure.heights||r&&t.measure.width!=i){var s=t.measure.heights=[];if(r){t.measure.width=i;var o=t.text.firstChild.getClientRects();for(var u=0;u<o.length-1;u++){var a=o[u],f=o[u+1];Math.abs(a.bottom-f.bottom)>2&&s.push((a.bottom+f.top)/2-n.top)}}s.push(n.bottom-n.top)}}function en(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var r=0;r<e.rest.length;r++)if(Xs(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function tn(e,t){t=ts(t);var n=Xs(t),r=e.display.externalMeasured=new Rn(e.doc,t,n);r.lineN=n;var i=r.built=Ts(e,r);return r.text=i.pre,Zo(e.display.lineMeasure,i.pre),r}function nn(e,t,n,r){return on(e,sn(e,t),n,r)}function rn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Vn(e,t)];var n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size)return n}function sn(e,t){var n=Xs(t),r=rn(e,n
);r&&!r.text?r=null:r&&r.changes&&tt(e,r,n,Z(e)),r||(r=tn(e,t));var i=en(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function on(e,t,n,r,i){t.before&&(n=-1);var s=n+(r||""),o;return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Zt(e,t.view,t.rect),t.hasHeights=!0),o=an(e,t,n,r),o.bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function an(e,t,n,s){var o=t.map,u,a,f,l;for(var c=0;c<o.length;c+=3){var h=o[c],p=o[c+1];if(n<h)a=0,f=1,l="left";else if(n<p)a=n-h,f=a+1;else if(c==o.length-3||n==p&&o[c+3]>n)f=p-h,a=f-1,n>=p&&(l="right");if(a!=null){u=o[c+2],h==p&&s==(u.insertLeft?"left":"right")&&(l=s);if(s=="left"&&a==0)while(c&&o[c-2]==o[c-3]&&o[c-1].insertLeft)u=o[(c-=3)+2],l="left";if(s=="right"&&a==p-h)while(c<o.length-3&&o[c+3]==o[c+4]&&!o[c+5].insertLeft)u=o[(c+=3)+2],l="right";break}}var d;if(u.nodeType==3)for(;;){while(a&&Ko(t.
line.text.charAt(h+a)))--a;while(h+f<p&&Ko(t.line.text.charAt(h+f)))++f;if(r&&i<9&&a==0&&f==p-h)d=u.parentNode.getBoundingClientRect();else if(r&&e.options.lineWrapping){var v=Go(u,a,f).getClientRects();v.length?d=v[s=="right"?v.length-1:0]:d=un}else d=Go(u,a,f).getBoundingClientRect()||un;if(d.left||d.right||a==0)break;f=a,a-=1,l="right"}else{a>0&&(l=s="right");var v;e.options.lineWrapping&&(v=u.getClientRects()).length>1?d=v[s=="right"?v.length-1:0]:d=u.getBoundingClientRect()}if(r&&i<9&&!a&&(!d||!d.left&&!d.right)){var m=u.parentNode.getClientRects()[0];m?d={left:m.left,right:m.left+Nn(e.display),top:m.top,bottom:m.bottom}:d=un}r&&i<11&&(d=fn(e.display.measure,d));var g=d.top-t.rect.top,y=d.bottom-t.rect.top,b=(g+y)/2,w=t.view.measure.heights;for(var c=0;c<w.length-1;c++)if(b<w[c])break;var E=c?w[c-1]:0,S=w[c],x={left:(l=="right"?d.right:d.left)-t.rect.left,right:(l=="left"?d.left:d.right)-t.rect.left,top:E,bottom:S};return!d.left&&!d.right&&(x.bogus=!0),e.options.singleCursorHeightPerLine||
(x.rtop=g,x.rbottom=y),x}function fn(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Eu(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function ln(e){if(e.measure){e.measure.cache={},e.measure.heights=null;if(e.rest)for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}}function cn(e){e.display.externalMeasure=null,Yo(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)ln(e.display.view[t])}function hn(e){cn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function pn(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function dn(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function vn(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++
i)if(t.widgets[i].above){var s=fs(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=$s(t);r=="local"?o+=Qt(e.display):o-=e.display.viewOffset;if(r=="page"||r=="window"){var u=e.display.lineSpace.getBoundingClientRect();o+=u.top+(r=="window"?0:dn());var a=u.left+(r=="window"?0:pn());n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function mn(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page")r-=pn(),i-=dn();else if(n=="local"||!n){var s=e.display.sizer.getBoundingClientRect();r+=s.left,i+=s.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function gn(e,t,n,r,i){return r||(r=Rs(e.doc,t.line)),vn(e,r,nn(e,r,t.ch,i),n)}function yn(e,t,n,r,i,s){function o(t,o){var u=on(e,i,t,o?"right":"left",s);return o?u.left=u.right:u.right=u.left,vn(e,r,u,n)}function u(e,t){var n=a[t],r=n.level%2;return e==Tu(n)&&t&&n.level<a[t-1].level?(n=a[--t],e=Nu(n)-(n.level%2?0:1),r=!0):e==Nu(n)&&t<a.length-1&&n.level<a[t+1].level&&(n=a
[++t],e=Tu(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?o(e-1):o(e,r)}r=r||Rs(e.doc,t.line),i||(i=sn(e,r));var a=Js(r),f=t.ch;if(!a)return o(f);var l=Du(a,f),c=u(f,l);return _u!=null&&(c.other=u(f,_u)),c}function bn(e,t){var n=0,t=xt(e.doc,t);e.options.lineWrapping||(n=Nn(e.display)*t.ch);var r=Rs(e.doc,t.line),i=$s(r)+Qt(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function wn(e,t,n,r){var i=pt(e,t);return i.xRel=r,n&&(i.outside=!0),i}function En(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return wn(r.first,0,!0,-1);var i=Vs(r,n),s=r.first+r.size-1;if(i>s)return wn(r.first+r.size-1,Rs(r,s).text.length,!0,1);t<0&&(t=0);var o=Rs(r,i);for(;;){var u=Sn(e,o,i,t,n),a=Zi(o),f=a&&a.find(0,!0);if(!a||!(u.ch>f.from.ch||u.ch==f.from.ch&&u.xRel>0))return u;i=Xs(o=f.to.line)}}function Sn(e,t,n,r,i){function f(r){var i=yn(e,pt(n,r),"line",t,a);return o=!0,s>i.bottom?i.left-u:s<i.top?i.left+u:(o=!1,i.left)}var s=i-$s(t),o=!1,u=2*e.display.wrapper.clientWidth,a=sn(e,t),l=Js(t),c=t.text.length
,h=Cu(t),p=ku(t),d=f(h),v=o,m=f(p),g=o;if(r>m)return wn(n,p,g,1);for(;;){if(l?p==h||p==Hu(t,h,1):p-h<=1){var y=r<d||r-d<=m-r?h:p,b=r-(y==h?d:m);while(Ko(t.text.charAt(y)))++y;var w=wn(n,y,y==h?v:g,b<-1?-1:b>1?1:0);return w}var E=Math.ceil(c/2),S=h+E;if(l){S=h;for(var x=0;x<E;++x)S=Hu(t,S,1)}var T=f(S);if(T>r){p=S,m=T;if(g=o)m+=1e3;c=E}else h=S,d=T,v=o,c-=E}}function Tn(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(xn==null){xn=Qo("pre");for(var t=0;t<49;++t)xn.appendChild(document.createTextNode("x")),xn.appendChild(Qo("br"));xn.appendChild(document.createTextNode("x"))}Zo(e.measure,xn);var n=xn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),Yo(e.measure),n||1}function Nn(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=Qo("span","xxxxxxxxxx"),n=Qo("pre",[t]);Zo(e.measure,n);var r=t.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(e.cachedCharWidth=i),i||10}function Ln(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput
:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++kn},Cn?Cn.ops.push(e.curOp):e.curOp.ownsGroup=Cn={ops:[e.curOp],delayedCallbacks:[]}}function An(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n]();for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)while(i.cursorActivityCalled<i.cursorActivityHandlers.length)i.cursorActivityHandlers[i.cursorActivityCalled++](i.cm)}}while(n<t.length)}function On(e){var t=e.curOp,n=t.ownsGroup;if(!n)return;try{An(n)}finally{Cn=null;for(var r=0;r<n.ops.length;r++)n.ops[r].cm.curOp=null;Mn(n)}}function Mn(e){var t=e.ops;for(var n=0;n<t.length;n++)_n(t[n]);for(var n=0;n<t.length;n++)Dn(t[n]);for(var n=0;n<t.length;n++)Pn(t[n]);for(var n=0;n<t.length;n++)Hn(t[n]);for(var n=0;n<t.length;n++)Bn(t[n])}function _n(e){var t=e.cm,n=t.display;e.updateMaxLine&&H(t),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=
null||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new X(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Dn(e){e.updatedDisplay=e.mustUpdate&&V(e.cm,e.update)}function Pn(e){var t=e.cm,n=t.display;e.updatedDisplay&&G(t),e.barMeasure=F(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=nn(t,n.maxLine,n.maxLine.text.length).left+3,e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo+ko-n.scroller.clientWidth));if(e.updatedDisplay||e.selectionChanged)e.newSelectionNodes=qt(t)}function Hn(e){var t=e.cm;e.adjustWidthTo!=null&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&wr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1),e.newSelectionNodes&&Rt(t,e.newSelectionNodes),e.updatedDisplay&&K(t,e.barMeasure),(e.updatedDisplay||e.startHeight!=t.doc.height)&&I(t,
e.barMeasure),e.selectionChanged&&Xt(t),t.state.focused&&e.updateInput&&er(t,e.typing)}function Bn(e){var t=e.cm,n=t.display,r=t.doc;e.adjustWidthTo!=null&&Math.abs(e.barMeasure.scrollWidth-t.display.scroller.scrollWidth)>1&&I(t),e.updatedDisplay&&$(t,e.update),n.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(n.wheelStartX=n.wheelStartY=null);if(e.scrollTop!=null&&n.scroller.scrollTop!=e.scrollTop){var i=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop));n.scroller.scrollTop=n.scrollbarV.scrollTop=r.scrollTop=i}if(e.scrollLeft!=null&&n.scroller.scrollLeft!=e.scrollLeft){var o=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft));n.scroller.scrollLeft=n.scrollbarH.scrollLeft=r.scrollLeft=o,R(t)}if(e.scrollToPos){var u=Yr(t,xt(r,e.scrollToPos.from),xt(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Gr(t,u)}var a=e.maybeHiddenMarkers,f=e.maybeUnhiddenMarkers;if(a)for(var l=0
;l<a.length;++l)a[l].lines.length||bo(a[l],"hide");if(f)for(var l=0;l<f.length;++l)f[l].lines.length&&bo(f[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.updatedDisplay&&s&&(t.options.lineWrapping&&Q(t,e.barMeasure),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!j(t)&&I(t)),e.changeObjs&&bo(t,"changes",t,e.changeObjs)}function jn(e,t){if(e.curOp)return t();Ln(e);try{return t()}finally{On(e)}}function Fn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);Ln(e);try{return t.apply(e,arguments)}finally{On(e)}}}function In(e){return function(){if(this.curOp)return e.apply(this,arguments);Ln(this);try{return e.apply(this,arguments)}finally{On(this)}}}function qn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);Ln(t);try{return e.apply(this,arguments)}finally{On(t)}}}function Rn(e,t,n){this.line=t,this.rest=ns(t),this.size=this.rest?Xs(jo(this.rest))-n+1:1,this
.node=this.text=null,this.hidden=ss(e,t)}function Un(e,t,n){var r=[],i;for(var s=t;s<n;s=i){var o=new Rn(e.doc,Rs(e.doc,s),s);i=s+o.size,r.push(o)}return r}function zn(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;r&&n<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0;if(t>=i.viewTo)E&&rs(e.doc,t)<i.viewTo&&Xn(e);else if(n<=i.viewFrom)E&&is(e.doc,n+r)>i.viewFrom?Xn(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)Xn(e);else if(t<=i.viewFrom){var s=$n(e,n,n+r,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=r):Xn(e)}else if(n>=i.viewTo){var s=$n(e,t,t,-1);s?(i.view=i.view.slice(0,s.index),i.viewTo=s.lineN):Xn(e)}else{var o=$n(e,t,t,-1),u=$n(e,n,n+r,1);o&&u?(i.view=i.view.slice(0,o.index).concat(Un(e,o.lineN,u.lineN)).concat(i.view.slice(u.index)),i.viewTo+=r):Xn(e)}var a=i.externalMeasured;a&&(n<a.lineN?a.lineN+=r:t<a.lineN+a.size&&(i.externalMeasured=
null))}function Wn(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null);if(t<r.viewFrom||t>=r.viewTo)return;var s=r.view[Vn(e,t)];if(s.node==null)return;var o=s.changes||(s.changes=[]);Io(o,n)==-1&&o.push(n)}function Xn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Vn(e,t){if(t>=e.display.viewTo)return null;t-=e.display.viewFrom;if(t<0)return null;var n=e.display.view;for(var r=0;r<n.length;r++){t-=n[r].size;if(t<0)return r}}function $n(e,t,n,r){var i=Vn(e,t),s,o=e.display.view;if(!E||n==e.doc.first+e.doc.size)return{index:i,lineN:n};for(var u=0,a=e.display.viewFrom;u<i;u++)a+=o[u].size;if(a!=t){if(r>0){if(i==o.length-1)return null;s=a+o[i].size-t,i++}else s=a-t;t+=s,n+=s}while(rs(e.doc,n)!=n){if(i==(r<0?0:o.length-1))return null;n+=r*o[i-(r<0?1:0)].size,i+=r}return{index:i,lineN:n}}function Jn(e,t,n){var r=e.display,i=r.view;i.length==0||t>=r.viewTo||n<=
r.viewFrom?(r.view=Un(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=Un(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Vn(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(Un(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Vn(e,n)))),r.viewTo=n}function Kn(e){var t=e.display.view,n=0;for(var r=0;r<t.length;r++){var i=t[r];!i.hidden&&(!i.node||i.changes)&&++n}return n}function Qn(e){if(e.display.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){Zn(e),e.state.focused&&Qn(e)})}function Gn(e){function n(){var r=Zn(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,Qn(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function Zn(e){var t=e.display.input,n=e.display.prevInput,s=e.doc;if(!e.state.focused||yu(t)&&!n||rr(e)||e.options.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(t.value=t.value.substring(0,t.value.length-1),e.state.fakedLastChar=!1);var o=t.value;if(o==n&&!e.somethingSelected())return!1
;if(r&&i>=9&&e.display.inputHasSelection===o||v&&/[\uf700-\uf7ff]/.test(o))return er(e),!1;var u=!e.curOp;u&&Ln(e),e.display.shift=!1,o.charCodeAt(0)==8203&&s.sel==e.display.selForContextMenu&&!n&&(n="\u200b");var a=0,f=Math.min(n.length,o.length);while(a<f&&n.charCodeAt(a)==o.charCodeAt(a))++a;var l=o.slice(a),c=gu(l),h=null;e.state.pasteIncoming&&s.sel.ranges.length>1&&(Yn&&Yn.join("\n")==l?h=s.sel.ranges.length%Yn.length==0&&qo(Yn,gu):c.length==s.sel.ranges.length&&(h=qo(c,function(e){return[e]})));for(var p=s.sel.ranges.length-1;p>=0;p--){var d=s.sel.ranges[p],m=d.from(),g=d.to();a<n.length?m=pt(m.line,m.ch-(n.length-a)):e.state.overwrite&&d.empty()&&!e.state.pasteIncoming&&(g=pt(g.line,Math.min(Rs(s,g.line).text.length,g.ch+jo(c).length)));var y=e.curOp.updateInput,b={from:m,to:g,text:h?h[p%h.length]:c,origin:e.state.pasteIncoming?"paste":e.state.cutIncoming?"cut":"+input"};Wr(e.doc,b),Eo(e,"inputRead",e,b);if(l&&!e.state.pasteIncoming&&e.options.electricChars&&e.options.smartIndent&&
d.head.ch<100&&(!p||s.sel.ranges[p-1].head.line!=d.head.line)){var w=e.getModeAt(d.head);if(w.electricChars){for(var E=0;E<w.electricChars.length;E++)if(l.indexOf(w.electricChars.charAt(E))>-1){ii(e,d.head.line,"smart");break}}else if(w.electricInput){var S=Fr(b);w.electricInput.test(Rs(s,S.line).text.slice(0,S.ch))&&ii(e,d.head.line,"smart")}}}return ni(e),e.curOp.updateInput=y,e.curOp.typing=!0,o.length>1e3||o.indexOf("\n")>-1?t.value=e.display.prevInput="":e.display.prevInput=o,u&&On(e),e.state.pasteIncoming=e.state.cutIncoming=!1,!0}function er(e,t){var n,s,o=e.doc;if(e.somethingSelected()){e.display.prevInput="";var u=o.sel.primary();n=bu&&(u.to().line-u.from().line>100||(s=e.getSelection()).length>1e3);var a=n?"-":s||e.getSelection();e.display.input.value=a,e.state.focused&&Fo(e.display.input),r&&i>=9&&(e.display.inputHasSelection=a)}else t||(e.display.prevInput=e.display.input.value="",r&&i>=9&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=n}function tr(e){e.options
.readOnly!="nocursor"&&(!d||tu()!=e.display.input)&&e.display.input.focus()}function nr(e){e.state.focused||(tr(e),Pr(e))}function rr(e){return e.options.readOnly||e.doc.cantEdit}function ir(e){function n(){e.state.focused&&setTimeout(zo(tr,e),0)}function o(t){xo(e,t)||po(t)}function u(n){if(e.somethingSelected())Yn=e.getSelections(),t.inaccurateSelection&&(t.prevInput="",t.inaccurateSelection=!1,t.input.value=Yn.join("\n"),Fo(t.input));else{var r=[],i=[];for(var s=0;s<e.doc.sel.ranges.length;s++){var o=e.doc.sel.ranges[s].head.line,u={anchor:pt(o,0),head:pt(o+1,0)};i.push(u),r.push(e.getRange(u.anchor,u.head))}n.type=="cut"?e.setSelections(i,null,Ao):(t.prevInput="",t.input.value=r.join("\n"),Fo(t.input)),Yn=r}n.type=="cut"&&(e.state.cutIncoming=!0)}var t=e.display;go(t.scroller,"mousedown",Fn(e,ar)),r&&i<11?go(t.scroller,"dblclick",Fn(e,function(t){if(xo(e,t))return;var n=ur(e,t);if(!n||vr(e,t)||or(e.display,t))return;lo(t);var r=fi(e,n);Lt(e.doc,r.anchor,r.head)})):go(t.scroller,"dblclick"
,function(t){xo(e,t)||lo(t)}),go(t.lineSpace,"selectstart",function(e){or(t,e)||lo(e)}),b||go(t.scroller,"contextmenu",function(t){Br(e,t)}),go(t.scroller,"scroll",function(){t.scroller.clientHeight&&(br(e,t.scroller.scrollTop),wr(e,t.scroller.scrollLeft,!0),bo(e,"scroll",e))}),go(t.scrollbarV,"scroll",function(){t.scroller.clientHeight&&br(e,t.scrollbarV.scrollTop)}),go(t.scrollbarH,"scroll",function(){t.scroller.clientHeight&&wr(e,t.scrollbarH.scrollLeft)}),go(t.scroller,"mousewheel",function(t){xr(e,t)}),go(t.scroller,"DOMMouseScroll",function(t){xr(e,t)}),go(t.scrollbarH,"mousedown",n),go(t.scrollbarV,"mousedown",n),go(t.wrapper,"scroll",function(){t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),go(t.input,"keyup",function(t){_r.call(e,t)}),go(t.input,"input",function(){r&&i>=9&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Gn(e)}),go(t.input,"keydown",Fn(e,Or)),go(t.input,"keypress",Fn(e,Dr)),go(t.input,"focus",zo(Pr,e)),go(t.input,"blur",zo(Hr,e)),e.options.dragDrop&&
(go(t.scroller,"dragstart",function(t){yr(e,t)}),go(t.scroller,"dragenter",o),go(t.scroller,"dragover",o),go(t.scroller,"drop",Fn(e,gr))),go(t.scroller,"paste",function(n){if(or(t,n))return;e.state.pasteIncoming=!0,tr(e),Gn(e)}),go(t.input,"paste",function(){if(s&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var n=t.input.selectionStart,r=t.input.selectionEnd;t.input.value+="$",t.input.selectionEnd=r,t.input.selectionStart=n,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Gn(e)}),go(t.input,"cut",u),go(t.input,"copy",u),l&&go(t.sizer,"mouseup",function(){tu()==t.input&&t.input.blur(),tr(e)})}function sr(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,e.setSize()}function or(e,t){for(var n=vo(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function ur(e,t,n,r){var i=e.display;if(!n){var s=vo(t);if(s==i.scrollbarH||s==i.scrollbarV||s==i.scrollbarFiller||s==i.gutterFiller)return null}var o,u
,a=i.lineSpace.getBoundingClientRect();try{o=t.clientX-a.left,u=t.clientY-a.top}catch(t){return null}var f=En(e,o,u),l;if(r&&f.xRel==1&&(l=Rs(e.doc,f.line).text).length==f.ch){var c=Do(l,l.length,e.options.tabSize)-l.length;f=pt(f.line,Math.max(0,Math.round((o-Yt(e.display).left)/Nn(e.display))-c))}return f}function ar(e){if(xo(this,e))return;var t=this,n=t.display;n.shift=e.shiftKey;if(or(n,e)){s||(n.scroller.draggable=!1,setTimeout(function(){n.scroller.draggable=!0},100));return}if(vr(t,e))return;var r=ur(t,e);window.focus();switch(mo(e)){case 1:r?cr(t,e,r):vo(e)==n.scroller&&lo(e);break;case 2:s&&(t.state.lastMiddleDown=+(new Date)),r&&Lt(t.doc,r),setTimeout(zo(tr,t),20),lo(e);break;case 3:b&&Br(t,e)}}function cr(e,t,n){setTimeout(zo(nr,e),0);var r=+(new Date),i;lr&&lr.time>r-400&&dt(lr.pos,n)==0?i="triple":fr&&fr.time>r-400&&dt(fr.pos,n)==0?(i="double",lr={time:r,pos:n}):(i="single",fr={time:r,pos:n});var s=e.doc.sel,o=v?t.metaKey:t.ctrlKey;e.options.dragDrop&&lu&&!rr(e)&&i=="single"&&
s.contains(n)>-1&&s.somethingSelected()?hr(e,t,n,o):pr(e,t,n,i,o)}function hr(e,t,n,o){var u=e.display,a=Fn(e,function(f){s&&(u.scroller.draggable=!1),e.state.draggingText=!1,yo(document,"mouseup",a),yo(u.scroller,"drop",a),Math.abs(t.clientX-f.clientX)+Math.abs(t.clientY-f.clientY)<10&&(lo(f),o||Lt(e.doc,n),tr(e),r&&i==9&&setTimeout(function(){document.body.focus(),tr(e)},20))});s&&(u.scroller.draggable=!0),e.state.draggingText=a,u.scroller.dragDrop&&u.scroller.dragDrop(),go(document,"mouseup",a),go(u.scroller,"drop",a)}function pr(e,t,n,r,i){function p(t){if(dt(h,t)==0)return;h=t;if(r=="rect"){var i=[],s=e.options.tabSize,l=Do(Rs(o,n.line).text,n.ch,s),c=Do(Rs(o,t.line).text,t.ch,s),p=Math.min(l,c),d=Math.max(l,c);for(var v=Math.min(n.line,t.line),m=Math.min(e.lastLine(),Math.max(n.line,t.line));v<=m;v++){var g=Rs(o,v).text,y=Po(g,p,s);p==d?i.push(new bt(pt(v,y),pt(v,y))):g.length>y&&i.push(new bt(pt(v,y),pt(v,Po(g,d,s))))}i.length||i.push(new bt(n,n)),Pt(o,wt(f.ranges.slice(0,a).concat
(i),a),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b=u,w=b.anchor,E=t;if(r!="single"){if(r=="double")var S=fi(e,t);else var S=new bt(pt(t.line,0),xt(o,pt(t.line+1,0)));dt(S.anchor,w)>0?(E=S.head,w=gt(b.from(),S.anchor)):(E=S.anchor,w=mt(b.to(),S.head))}var i=f.ranges.slice(0);i[a]=new bt(xt(o,w),E),Pt(o,wt(i,a),Oo)}}function m(t){var n=++v,i=ur(e,t,!0,r=="rect");if(!i)return;if(dt(i,h)!=0){nr(e),p(i);var u=q(s,o);(i.line>=u.to||i.line<u.from)&&setTimeout(Fn(e,function(){v==n&&m(t)}),150)}else{var a=t.clientY<d.top?-20:t.clientY>d.bottom?20:0;a&&setTimeout(Fn(e,function(){if(v!=n)return;s.scroller.scrollTop+=a,m(t)}),50)}}function g(t){v=Infinity,lo(t),tr(e),yo(document,"mousemove",y),yo(document,"mouseup",b),o.history.lastSelOrigin=null}var s=e.display,o=e.doc;lo(t);var u,a,f=o.sel;i&&!t.shiftKey?(a=o.sel.contains(n),a>-1?u=o.sel.ranges[a]:u=new bt(n,n)):u=o.sel.primary();if(t.altKey)r="rect",i||(u=new bt(n,n)),n=ur(e,t,!0,!0),a=-1;else if(r=="double"){var l=fi(e,n);e.display
.shift||o.extend?u=kt(o,u,l.anchor,l.head):u=l}else if(r=="triple"){var c=new bt(pt(n.line,0),xt(o,pt(n.line+1,0)));e.display.shift||o.extend?u=kt(o,u,c.anchor,c.head):u=c}else u=kt(o,u,n);i?a>-1?Ot(o,a,u,Oo):(a=o.sel.ranges.length,Pt(o,wt(o.sel.ranges.concat([u]),a),{scroll:!1,origin:"*mouse"})):(a=0,Pt(o,new yt([u],0),Oo),f=o.sel);var h=n,d=s.wrapper.getBoundingClientRect(),v=0,y=Fn(e,function(e){mo(e)?m(e):g(e)}),b=Fn(e,g);go(document,"mousemove",y),go(document,"mouseup",b)}function dr(e,t,n,r,i){try{var s=t.clientX,o=t.clientY}catch(t){return!1}if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&lo(t);var u=e.display,a=u.lineDiv.getBoundingClientRect();if(o>a.bottom||!No(e,n))return ho(t);o-=a.top-u.viewOffset;for(var f=0;f<e.options.gutters.length;++f){var l=u.gutters.childNodes[f];if(l&&l.getBoundingClientRect().right>=s){var c=Vs(e.doc,o),h=e.options.gutters[f];return i(e,n,e,c,h,t),ho(t)}}}function vr(e,t){return dr(e,t,"gutterClick",!0,Eo)}function gr(
e){var t=this;if(xo(t,e)||or(t.display,e))return;lo(e),r&&(mr=+(new Date));var n=ur(t,e,!0),i=e.dataTransfer.files;if(!n||rr(t))return;if(i&&i.length&&window.FileReader&&window.File){var s=i.length,o=Array(s),u=0,a=function(e,r){var i=new FileReader;i.onload=Fn(t,function(){o[r]=i.result;if(++u==s){n=xt(t.doc,n);var e={from:n,to:n,text:gu(o.join("\n")),origin:"paste"};Wr(t.doc,e),Dt(t.doc,Et(n,Fr(e)))}}),i.readAsText(e)};for(var f=0;f<s;++f)a(i[f],f)}else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1){t.state.draggingText(e),setTimeout(zo(tr,t),20);return}try{var o=e.dataTransfer.getData("Text");if(o){if(t.state.draggingText&&(v?!e.metaKey:!e.ctrlKey))var l=t.listSelections();Ht(t.doc,Et(n,n));if(l)for(var f=0;f<l.length;++f)Qr(t.doc,"",l[f].anchor,l[f].head,"drag");t.replaceSelection(o,"around","paste"),tr(t)}}catch(e){}}}function yr(e,t){if(r&&(!e.state.draggingText||+(new Date)-mr<100)){po(t);return}if(xo(e,t)||or(e.display,t))return;t.dataTransfer.setData("Text",e.getSelection()
);if(t.dataTransfer.setDragImage&&!f){var n=Qo("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),a&&n.parentNode.removeChild(n)}}function br(t,n){if(Math.abs(t.doc.scrollTop-n)<2)return;t.doc.scrollTop=n,e||J(t,{top:n}),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&J(t),Vt(t,100)}function wr(e,t,n){if(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,R(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function xr(t,n){var r=n.wheelDeltaX,i=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail
),i==null&&n.detail&&n.axis==n.VERTICAL_AXIS?i=n.detail:i==null&&(i=n.wheelDelta);var o=t.display,u=o.scroller;if(!(r&&u.scrollWidth>u.clientWidth||i&&u.scrollHeight>u.clientHeight))return;if(i&&v&&s)e:for(var f=n.target,l=o.view;f!=u;f=f.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==f){t.display.currentWheelTarget=f;break e}if(r&&!e&&!a&&Sr!=null){i&&br(t,Math.max(0,Math.min(u.scrollTop+i*Sr,u.scrollHeight-u.clientHeight))),wr(t,Math.max(0,Math.min(u.scrollLeft+r*Sr,u.scrollWidth-u.clientWidth))),lo(n),o.wheelStartX=null;return}if(i&&Sr!=null){var h=i*Sr,p=t.doc.scrollTop,d=p+o.wrapper.clientHeight;h<0?p=Math.max(0,p+h-50):d=Math.min(t.doc.height,d+h+50),J(t,{top:p,bottom:d})}Er<20&&(o.wheelStartX==null?(o.wheelStartX=u.scrollLeft,o.wheelStartY=u.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(o.wheelStartX==null)return;var e=u.scrollLeft-o.wheelStartX,t=u.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null;if(!
n)return;Sr=(Sr*Er+n)/(Er+1),++Er},200)):(o.wheelDX+=r,o.wheelDY+=i))}function Tr(e,t,n){if(typeof t=="string"){t=Ei[t];if(!t)return!1}e.display.pollingFast&&Zn(e)&&(e.display.pollingFast=!1);var r=e.display.shift,i=!1;try{rr(e)&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Lo}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function Nr(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function kr(e,t){var n=xi(e.options.keyMap),r=n.auto;clearTimeout(Cr),r&&!Ni(t)&&(Cr=setTimeout(function(){xi(e.options.keyMap)==n&&(e.options.keyMap=r.call?r.call(null,e):r,A(e))},50));var i=Ci(t,!0),s=!1;if(!i)return!1;var o=Nr(e);return t.shiftKey?s=Ti("Shift-"+i,o,function(t){return Tr(e,t,!0)})||Ti(i,o,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion)return Tr(e,t)}):s=Ti(i,o,function(t){return Tr(e,t)}),s&&(lo(t),Xt(e),Eo(e,"keyHandled",e,i,t)),s}function Lr(e,t,n){var r=Ti("'"+n+"'",Nr(e),function(
t){return Tr(e,t,!0)});return r&&(lo(t),Xt(e),Eo(e,"keyHandled",e,"'"+n+"'",t)),r}function Or(e){var t=this;nr(t);if(xo(t,e))return;r&&i<11&&e.keyCode==27&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=n==16||e.shiftKey;var s=kr(t,e);a&&(Ar=s?n:null,!s&&n==88&&!bu&&(v?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),n==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)&&Mr(t)}function Mr(e){function n(e){if(e.keyCode==18||!e.altKey)ru(t,"CodeMirror-crosshair"),yo(document,"keyup",n),yo(document,"mouseover",n)}var t=e.display.lineDiv;iu(t,"CodeMirror-crosshair"),go(document,"keyup",n),go(document,"mouseover",n)}function _r(e){e.keyCode==16&&(this.doc.sel.shift=!1),xo(this,e)}function Dr(e){var t=this;if(xo(t,e)||e.ctrlKey&&!e.altKey||v&&e.metaKey)return;var n=e.keyCode,s=e.charCode;if(a&&n==Ar){Ar=null,lo(e);return}if((a&&(!e.which||e.which<10)||l)&&kr(t,e))return;var o=String.fromCharCode(s==null?n:s);if(Lr(t,e,o))return;r&&i>=9&&(t.display.inputHasSelection=
null),Gn(t)}function Pr(e){if(e.options.readOnly=="nocursor")return;e.state.focused||(bo(e,"focus",e),e.state.focused=!0,iu(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(er(e),s&&setTimeout(zo(er,e,!0),0))),Qn(e),Xt(e)}function Hr(e){e.state.focused&&(bo(e,"blur",e),e.state.focused=!1,ru(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150)}function Br(e,t){function h(){if(n.input.selectionStart!=null){var t=e.somethingSelected(),r=n.input.value="\u200b"+(t?n.input.value:"");n.prevInput=t?"":"\u200b",n.input.selectionStart=1,n.input.selectionEnd=r.length,n.selForContextMenu=e.doc.sel}}function p(){n.inputDiv.style.position="relative",n.input.style.cssText=l,r&&i<9&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=u),Qn(e);if(n.input.selectionStart!=null){(!r||r&&i<9)&&h();var t=0,s=function(){n.selForContextMenu==e.doc.sel&&n.input.selectionStart==0?Fn(e,Ei.selectAll
)(e):t++<10?n.detectingSelectAll=setTimeout(s,500):er(e)};n.detectingSelectAll=setTimeout(s,200)}}if(xo(e,t,"contextmenu"))return;var n=e.display;if(or(n,t)||jr(e,t))return;var o=ur(e,t),u=n.scroller.scrollTop;if(!o||a)return;var f=e.options.resetSelectionOnContextMenu;f&&e.doc.sel.contains(o)==-1&&Fn(e,Pt)(e.doc,Et(o),Ao);var l=n.input.style.cssText;n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: "+(r?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(s)var c=window.scrollY;tr(e),s&&window.scrollTo(null,c),er(e),e.somethingSelected()||(n.input.value=n.prevInput=" "),n.selForContextMenu=e.doc.sel,clearTimeout(n.detectingSelectAll),r&&i>=9&&h();if(b){po(t);var d=function(){yo(window,"mouseup",d),setTimeout(p,20)};go(window,"mouseup",d)}else setTimeout(p
,50)}function jr(e,t){return No(e,"gutterContextMenu")?dr(e,t,"gutterContextMenu",!1,bo):!1}function Ir(e,t){if(dt(e,t.from)<0)return e;if(dt(e,t.to)<=0)return Fr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Fr(t).ch-t.to.ch),pt(n,r)}function qr(e,t){var n=[];for(var r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new bt(Ir(i.anchor,t),Ir(i.head,t)))}return wt(n,e.sel.primIndex)}function Rr(e,t,n){return e.line==t.line?pt(n.line,e.ch-t.ch+n.ch):pt(n.line+(e.line-t.line),e.ch)}function Ur(e,t,n){var r=[],i=pt(e.first,0),s=i;for(var o=0;o<t.length;o++){var u=t[o],a=Rr(u.from,i,s),f=Rr(Fr(u),i,s);i=u.to,s=f;if(n=="around"){var l=e.sel.ranges[o],c=dt(l.head,l.anchor)<0;r[o]=new bt(c?f:a,c?a:f)}else r[o]=new bt(a,a)}return new yt(r,e.sel.primIndex)}function zr(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=xt(e,t)),n&&
(this.to=xt(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)}),bo(e,"beforeChange",e,r),e.cm&&bo(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Wr(e,t,n){if(e.cm){if(!e.cm.curOp)return Fn(e.cm,Wr)(e,t,n);if(e.cm.state.suppressEdits)return}if(No(e,"beforeChange")||e.cm&&No(e.cm,"beforeChange")){t=zr(e,t,!0);if(!t)return}var r=w&&!n&&Xi(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Xr(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Xr(e,t)}function Xr(e,t){if(t.text.length==1&&t.text[0]==""&&dt(t.from,t.to)==0)return;var n=qr(e,t);Zs(e,t,n,e.cm?e.cm.curOp.id:NaN),Jr(e,t,n,Ui(e,t));var r=[];Is(e,function(e,n){!n&&Io(r,e.history)==-1&&(fo(e.history,t),r.push(e.history)),Jr(e,t,null,Ui(e,t))})}function Vr(e,t,n){if(e.cm&&e.cm.state.suppressEdits)return;var r=e.history,i,s=e.sel,o=t=="undo"?r.done:r.undone,u=t=="undo"?r.undone:r.done;for(var a=0;a<o.length;a++){i=o[a];if(n?i.ranges&&!i.equals(e.sel):!i.ranges)break}if(a==
o.length)return;r.lastOrigin=r.lastSelOrigin=null;for(;;){i=o.pop();if(!i.ranges)break;no(i,u);if(n&&!i.equals(e.sel)){Pt(e,i,{clearRedo:!1});return}s=i}var f=[];no(s,u),u.push({changes:f,generation:r.generation}),r.generation=i.generation||++r.maxGeneration;var l=No(e,"beforeChange")||e.cm&&No(e.cm,"beforeChange");for(var a=i.changes.length-1;a>=0;--a){var c=i.changes[a];c.origin=t;if(l&&!zr(e,c,!1)){o.length=0;return}f.push(Qs(e,c));var h=a?qr(e,c):jo(o);Jr(e,c,h,Wi(e,c)),!a&&e.cm&&e.cm.scrollIntoView({from:c.from,to:Fr(c)});var p=[];Is(e,function(e,t){!t&&Io(p,e.history)==-1&&(fo(e.history,c),p.push(e.history)),Jr(e,c,null,Wi(e,c))})}}function $r(e,t){if(t==0)return;e.first+=t,e.sel=new yt(qo(e.sel.ranges,function(e){return new bt(pt(e.anchor.line+t,e.anchor.ch),pt(e.head.line+t,e.head.ch))}),e.sel.primIndex);if(e.cm){zn(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)Wn(e.cm,r,"gutter")}}function Jr(e,t,n,r){if(e.cm&&!e.cm.curOp)return Fn(e.cm,Jr)(e,t,n,
r);if(t.to.line<e.first){$r(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);$r(e,i),t={from:pt(e.first,0),to:pt(t.to.line+i,t.to.ch),text:[jo(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:pt(s,Rs(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Us(e,t.from,t.to),n||(n=qr(e,t)),e.cm?Kr(e.cm,t,r):_s(e,t,r),Ht(e,n,Ao)}function Kr(e,t,n){var r=e.doc,i=e.display,s=t.from,o=t.to,u=!1,a=s.line;e.options.lineWrapping||(a=Xs(ts(Rs(r,s.line))),r.iter(a,o.line+1,function(e){if(e==i.maxLine)return u=!0,!0})),r.sel.contains(t.from,t.to)>-1&&To(e),_s(r,t,n,k(e)),e.options.lineWrapping||(r.iter(a,s.line+t.text.length,function(e){var t=P(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,s.line),Vt(e,400);var f=t.text.length-(o.line-s.line)-1;s.line==o.line&&t.text
.length==1&&!Ms(e.doc,t)?Wn(e,s.line,"text"):zn(e,s.line,o.line+1,f);var l=No(e,"changes"),c=No(e,"change");if(c||l){var h={from:s,to:o,text:t.text,removed:t.removed,origin:t.origin};c&&Eo(e,"change",e,h),l&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function Qr(e,t,n,r,i){r||(r=n);if(dt(r,n)<0){var s=r;r=n,n=s}typeof t=="string"&&(t=gu(t)),Wr(e,{from:n,to:r,text:t,origin:i})}function Gr(e,t){var n=e.display,r=n.sizer.getBoundingClientRect(),i=null;t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(i!=null&&!h){var s=Qo("div","\u200b",null,"position: absolute; top: "+(t.top-n.viewOffset-Qt(e.display))+"px; height: "+(t.bottom-t.top+ko)+"px; left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(s),s.scrollIntoView(i),e.display.lineSpace.removeChild(s)}}function Yr(e,t,n,r){r==null&&(r=0);for(;;){var i=!1,s=yn(e,t),o=!n||n==t?s:yn(e,n),u=ei(e,Math.min(s.left,o.left),Math.min(s.top
,o.top)-r,Math.max(s.left,o.left),Math.max(s.bottom,o.bottom)+r),a=e.doc.scrollTop,f=e.doc.scrollLeft;u.scrollTop!=null&&(br(e,u.scrollTop),Math.abs(e.doc.scrollTop-a)>1&&(i=!0)),u.scrollLeft!=null&&(wr(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(i=!0));if(!i)return s}}function Zr(e,t,n,r,i){var s=ei(e,t,n,r,i);s.scrollTop!=null&&br(e,s.scrollTop),s.scrollLeft!=null&&wr(e,s.scrollLeft)}function ei(e,t,n,r,i){var s=e.display,o=Tn(e.display);n<0&&(n=0);var u=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:s.scroller.scrollTop,a=s.scroller.clientHeight-ko,f={};i-n>a&&(i=n+a);var l=e.doc.height+Gt(s),c=n<o,h=i>l-o;if(n<u)f.scrollTop=c?0:n;else if(i>u+a){var p=Math.min(n,(h?l:i)-a);p!=u&&(f.scrollTop=p)}var d=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:s.scroller.scrollLeft,v=s.scroller.clientWidth-ko-s.gutters.offsetWidth,m=r-t>v;return m&&(r=n+a),t<10?f.scrollLeft=0:t<d?f.scrollLeft=Math.max(0,t-(m?0:10)):r>v+d-3&&(f.scrollLeft=r+(m?0:10)-v),f}function ti(e,t,n){(t!=null||
n!=null)&&ri(e),t!=null&&(e.curOp.scrollLeft=(e.curOp.scrollLeft==null?e.doc.scrollLeft:e.curOp.scrollLeft)+t),n!=null&&(e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+n)}function ni(e){ri(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?pt(t.line,t.ch-1):t,r=pt(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function ri(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=bn(e,t.from),r=bn(e,t.to),i=ei(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function ii(e,t,n,r){var i=e.doc,s;n==null&&(n="add"),n=="smart"&&(i.mode.indent?s=Kt(e,t):n="prev");var o=e.options.tabSize,u=Rs(i,t),a=Do(u.text,null,o);u.stateAfter&&(u.stateAfter=null);var f=u.text.match(/^\s*/)[0],l;if(!r&&!/\S/.test(u.text))l=0,n="not";else if(n=="smart"){l=i.mode.indent(s,u.text.slice(f.length),u.text)
;if(l==Lo||l>150){if(!r)return;n="prev"}}n=="prev"?t>i.first?l=Do(Rs(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"?l=a-e.options.indentUnit:typeof n=="number"&&(l=a+n),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=Bo(l-h));if(c!=f)Qr(i,c,pt(t,0),pt(t,f.length),"+input");else for(var p=0;p<i.sel.ranges.length;p++){var d=i.sel.ranges[p];if(d.head.line==t&&d.head.ch<f.length){var h=pt(t,f.length);Ot(i,p,new bt(h,h));break}}u.stateAfter=null}function si(e,t,n,r){var i=t,s=t;return typeof t=="number"?s=Rs(e,St(e,t)):i=Xs(t),i==null?null:(r(s,i)&&e.cm&&Wn(e.cm,i,n),s)}function oi(e,t){var n=e.doc.sel.ranges,r=[];for(var i=0;i<n.length;i++){var s=t(n[i]);while(r.length&&dt(s.from,jo(r).to)<=0){var o=r.pop();if(dt(o.from,s.from)<0){s.from=o.from;break}}r.push(s)}jn(e,function(){for(var t=r.length-1;t>=0;t--)Qr(e.doc,"",r[t].from,r[t].to,"+delete");ni(e)})}function ui(e,t,n,r,i){function l(){var t=s+n;return t<
e.first||t>=e.first+e.size?f=!1:(s=t,a=Rs(e,t))}function c(e){var t=(i?Hu:Bu)(a,o,n,!0);if(t==null){if(!!e||!l())return f=!1;i?o=(n<0?ku:Cu)(a):o=n<0?a.text.length:0}else o=t;return!0}var s=t.line,o=t.ch,u=n,a=Rs(e,s),f=!0;if(r=="char")c();else if(r=="column")c(!0);else if(r=="word"||r=="group"){var h=null,p=r=="group",d=e.cm&&e.cm.getHelper(t,"wordChars");for(var v=!0;;v=!1){if(n<0&&!c(!v))break;var m=a.text.charAt(o)||"\n",g=Vo(m,d)?"w":p&&m=="\n"?"n":!p||/\s/.test(m)?null:"p";p&&!v&&!g&&(g="s");if(h&&h!=g){n<0&&(n=1,c());break}g&&(h=g);if(n>0&&!c(!v))break}}var y=It(e,pt(s,o),u,!0);return f||(y.hitSide=!0),y}function ai(e,t,n,r){var i=e.doc,s=t.left,o;if(r=="page"){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(u-(n<0?1.5:.5)*Tn(e.display))}else r=="line"&&(o=n>0?t.bottom+3:t.top-3);for(;;){var a=En(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=i.height){a.hitSide=!0;break}o+=n*5}return a}function fi(e,t){var n=e.doc,r=
Rs(n,t.line).text,i=t.ch,s=t.ch;if(r){var o=e.getHelper(t,"wordChars");(t.xRel<0||s==r.length)&&i?--i:++s;var u=r.charAt(i),a=Vo(u,o)?function(e){return Vo(e,o)}:/\s/.test(u)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!Vo(e)};while(i>0&&a(r.charAt(i-1)))--i;while(s<r.length&&a(r.charAt(s)))++s}return new bt(pt(t.line,i),pt(t.line,s))}function hi(e,t,n,r){S.defaults[e]=t,n&&(ci[e]=r?function(e,t,r){r!=pi&&n(e,t,r)}:n)}function xi(e){return typeof e=="string"?Si[e]:e}function Oi(e,t,n,r,i){if(r&&r.shared)return _i(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Fn(e.cm,Oi)(e,t,n,r,i);var s=new Li(e,i),o=dt(t,n);r&&Uo(r,s,!1);if(o>0||o==0&&s.clearWhenEmpty!==!1)return s;s.replacedWith&&(s.collapsed=!0,s.widgetNode=Qo("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(s.widgetNode.ignoreEvents=!0),r.insertLeft&&(s.widgetNode.insertLeft=!0));if(s.collapsed){if(es(e,t.line,t,n,s)||t.line!=n.line&&es(e,n.line,t,n,s))throw new Error("Inserting collapsed marker partially overlapping an existing one"
);E=!0}s.addToHistory&&Zs(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var u=t.line,a=e.cm,f;e.iter(u,n.line+1,function(e){a&&s.collapsed&&!a.options.lineWrapping&&ts(e)==a.display.maxLine&&(f=!0),s.collapsed&&u!=t.line&&Ws(e,0),Ii(e,new Bi(s,u==t.line?t.ch:null,u==n.line?n.ch:null)),++u}),s.collapsed&&e.iter(t.line,n.line+1,function(t){ss(e,t)&&Ws(t,0)}),s.clearOnEnter&&go(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(w=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),s.collapsed&&(s.id=++Ai,s.atomic=!0);if(a){f&&(a.curOp.updateMaxLine=!0);if(s.collapsed)zn(a,t.line,n.line+1);else if(s.className||s.title||s.startStyle||s.endStyle)for(var l=t.line;l<=n.line;l++)Wn(a,l,"text");s.atomic&&jt(a.doc),Eo(a,"markerAdded",a,s)}return s}function _i(e,t,n,r,i){r=Uo(r),r.shared=!1;var s=[Oi(e,t,n,r,i)],o=s[0],u=r.widgetNode;return Is(e,function(e){u&&(r.widgetNode=u.cloneNode(!0)),s.push(Oi(e,xt(e,t),xt(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent
)return;o=jo(s)}),new Mi(s,o)}function Di(e){return e.findMarks(pt(e.first,0),e.clipPos(pt(e.lastLine())),function(e){return e.parent})}function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),s=e.clipPos(i.from),o=e.clipPos(i.to);if(dt(s,o)){var u=Oi(e,s,o,r.primary,r.primary.type);r.markers.push(u),u.parent=r}}}function Hi(e){for(var t=0;t<e.length;t++){var n=e[t],r=[n.primary.doc];Is(n.primary.doc,function(e){r.push(e)});for(var i=0;i<n.markers.length;i++){var s=n.markers[i];Io(r,s.doc)==-1&&(s.parent=null,n.markers.splice(i--,1))}}}function Bi(e,t,n){this.marker=e,this.from=t,this.to=n}function ji(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Fi(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function Ii(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function qi(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<
t);if(u||s.from==t&&o.type=="bookmark"&&(!n||!s.marker.insertLeft)){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push(new Bi(o,s.from,a?null:s.to))}}return i}function Ri(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);if(u||s.from==t&&o.type=="bookmark"&&(!n||s.marker.insertLeft)){var a=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push(new Bi(o,a?null:s.from-t,s.to==null?null:s.to-t))}}return i}function Ui(e,t){var n=Nt(e,t.from.line)&&Rs(e,t.from.line).markedSpans,r=Nt(e,t.to.line)&&Rs(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=dt(t.from,t.to)==0,u=qi(n,i,o),a=Ri(r,s,o),f=t.text.length==1,l=jo(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(h.to==null){var p=ji(a,h.marker);p?f&&(h.to=p.to==null?null:p.to+l):h.to=i}}if(a)for(var c=0;c<a.length;++c){var h=a[c];h.to!=null&&(h.to+=l);if(h.from==null){var p=ji(u,h.marker);p||(h.from=l,f&&
(u||(u=[])).push(h))}else h.from+=l,f&&(u||(u=[])).push(h)}u&&(u=zi(u)),a&&a!=u&&(a=zi(a));var d=[u];if(!f){var v=t.text.length-2,m;if(v>0&&u)for(var c=0;c<u.length;++c)u[c].to==null&&(m||(m=[])).push(new Bi(u[c].marker,null,null));for(var c=0;c<v;++c)d.push(m);d.push(a)}return d}function zi(e){for(var t=0;t<e.length;++t){var n=e[t];n.from!=null&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Wi(e,t){var n=so(e,t),r=Ui(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){var a=o[u];for(var f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function Xi(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||Io(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s],u=o.find(0);for(var a=0
;a<i.length;++a){var f=i[a];if(dt(f.to,u.from)<0||dt(f.from,u.to)>0)continue;var l=[a,1],c=dt(f.from,u.from),h=dt(f.to,u.to);(c<0||!o.inclusiveLeft&&!c)&&l.push({from:f.from,to:u.from}),(h>0||!o.inclusiveRight&&!h)&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function Vi(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function $i(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function Ji(e){return e.inclusiveLeft?-1:0}function Ki(e){return e.inclusiveRight?1:0}function Qi(e,t){var n=e.lines.length-t.lines.length;if(n!=0)return n;var r=e.find(),i=t.find(),s=dt(r.from,i.from)||Ji(e)-Ji(t);if(s)return-s;var o=dt(r.to,i.to)||Ki(e)-Ki(t);return o?o:t.id-e.id}function Gi(e,t){var n=E&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s)i=n[s],i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||Qi(r,i.marker)<0)&&(r=i.marker);return r}function Yi(e){return Gi(e,!0)}function Zi
(e){return Gi(e,!1)}function es(e,t,n,r,i){var s=Rs(e,t),o=E&&s.markedSpans;if(o)for(var u=0;u<o.length;++u){var a=o[u];if(!a.marker.collapsed)continue;var f=a.marker.find(0),l=dt(f.from,n)||Ji(a.marker)-Ji(i),c=dt(f.to,r)||Ki(a.marker)-Ki(i);if(l>=0&&c<=0||l<=0&&c>=0)continue;if(l<=0&&(dt(f.to,n)>0||a.marker.inclusiveRight&&i.inclusiveLeft)||l>=0&&(dt(f.from,r)<0||a.marker.inclusiveLeft&&i.inclusiveRight))return!0}}function ts(e){var t;while(t=Yi(e))e=t.find(-1,!0).line;return e}function ns(e){var t,n;while(t=Zi(e))e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function rs(e,t){var n=Rs(e,t),r=ts(n);return n==r?t:Xs(r)}function is(e,t){if(t>e.lastLine())return t;var n=Rs(e,t),r;if(!ss(e,n))return t;while(r=Zi(n))n=r.find(1,!0).line;return Xs(n)+1}function ss(e,t){var n=E&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return!0;if(r.marker.widgetNode)continue;if(r.from==0&&r.marker.inclusiveLeft&&os(e,t,r))return!0}}function os(
e,t,n){if(n.to==null){var r=n.marker.find(1,!0);return os(e,r.line,ji(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i,s=0;s<t.markedSpans.length;++s){i=t.markedSpans[s];if(i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(i.to==null||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&os(e,t,i))return!0}}function as(e,t,n){$s(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&ti(e,null,n)}function fs(e){if(e.height!=null)return e.height;if(!eu(document.body,e.node)){var t="position: relative;";e.coverGutter&&(t+="margin-left: -"+e.cm.getGutterElement().offsetWidth+"px;"),Zo(e.cm.display.measure,Qo("div",[e.node],null,t))}return e.height=e.node.offsetHeight}function ls(e,t,n,r){var i=new us(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),si(e.doc,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);i.insertAt==null?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t;if(!ss(e.doc,t)){var r=
$s(t)<e.doc.scrollTop;Ws(t,t.height+fs(i)),r&&ti(e,null,i.height),e.curOp.forceUpdate=!0}return!0}),i}function hs(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Vi(e),$i(e,n);var i=r?r(e):1;i!=e.height&&Ws(e,i)}function ps(e){e.parent=null,Vi(e)}function ds(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";t[r]==null?t[r]=n[2]:(new RegExp("(?:^|s)"+n[2]+"(?:$|s)")).test(t[r])||(t[r]+=" "+n[2])}return e}function vs(e,t){if(e.blankLine)return e.blankLine(t);if(!e.innerMode)return;var n=S.innerMode(e,t);if(n.mode.blankLine)return n.mode.blankLine(n.state)}function ms(e,t,n){for(var r=0;r<10;r++){var i=e.token(t,n);if(t.pos>t.start)return i}throw new Error("Mode "+e.name+" failed to advance stream.")}function gs(e,t,n,r,i,s,o){var u=n.flattenSpans;u==null&&(u=e.options.flattenSpans);var a=0,f=null,l=new ki(t,e.options.
tabSize),c;t==""&&ds(vs(n,r),s);while(!l.eol()){l.pos>e.options.maxHighlightLength?(u=!1,o&&ws(e,t,r,l.pos),l.pos=t.length,c=null):c=ds(ms(n,l,r),s);if(e.options.addModeClass){var h=S.innerMode(n,r).mode.name;h&&(c="m-"+(c?h+" "+c:h))}if(!u||f!=c)a<l.start&&i(l.start,f),a=l.start,f=c;l.start=l.pos}while(a<l.pos){var p=Math.min(l.pos,a+5e4);i(p,f),a=p}}function ys(e,t,n,r){var i=[e.state.modeGen],s={};gs(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},s,r);for(var o=0;o<e.state.overlays.length;++o){var u=e.state.overlays[o],a=1,f=0;gs(e,t.text,u.mode,!0,function(e,t){var n=a;while(f<e){var r=i[a];r>e&&i.splice(a,1,e,i[a+1],r),a+=2,f=Math.min(e,r)}if(!t)return;if(u.opaque)i.splice(n,a-n,e,"cm-overlay "+t),a=n+2;else for(;n<a;n+=2){var s=i[n+1];i[n+1]=(s?s+" ":"")+"cm-overlay "+t}},s)}return{styles:i,classes:s.bgClass||s.textClass?s:null}}function bs(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=ys(e,t,t.stateAfter=Kt(e,Xs(t)));t.styles=n.styles,n.classes?t.styleClasses=n.classes
:t.styleClasses&&(t.styleClasses=null)}return t.styles}function ws(e,t,n,r){var i=e.doc.mode,s=new ki(t,e.options.tabSize);s.start=s.pos=r||0,t==""&&vs(i,n);while(!s.eol()&&s.pos<=e.options.maxHighlightLength)ms(i,s,n),s.start=s.pos}function xs(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Ss:Es;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Ts(e,t){var n=Qo("span",null,null,s?"padding-right: .1px":null),i={pre:Qo("pre",[n]),content:n,col:0,pos:0,cm:e};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var u=o?t.rest[o-1]:t.line,a;i.pos=0,i.addToken=Cs,(r||s)&&e.getOption("lineWrapping")&&(i.addToken=ks(i.addToken)),mu(e.display.measure)&&(a=Js(u))&&(i.addToken=Ls(i.addToken,a)),i.map=[],Os(u,i,bs(e,u)),u.styleClasses&&(u.styleClasses.bgClass&&(i.bgClass=su(u.styleClasses.bgClass,i.bgClass||"")),u.styleClasses.textClass&&(i.textClass=su(u.styleClasses.textClass,i.textClass||""))),i.map.length==0&&i.map.push(0,0,i.content.appendChild(du(e.display.measure))),
o==0?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}return bo(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=su(i.pre.className,i.textClass||"")),i}function Ns(e){var t=Qo("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function Cs(e,t,n,s,o,u){if(!t)return;var a=e.cm.options.specialChars,f=!1;if(!a.test(t)){e.col+=t.length;var l=document.createTextNode(t);e.map.push(e.pos,e.pos+t.length,l),r&&i<9&&(f=!0),e.pos+=t.length}else{var l=document.createDocumentFragment(),c=0;for(;;){a.lastIndex=c;var h=a.exec(t),p=h?h.index-c:t.length-c;if(p){var d=document.createTextNode(t.slice(c,c+p));r&&i<9?l.appendChild(Qo("span",[d])):l.appendChild(d),e.map.push(e.pos,e.pos+p,d),e.col+=p,e.pos+=p}if(!h)break;c+=p+1;if(h[0]=="	"){var v=e.cm.options.tabSize,m=v-e.col%v,d=l.appendChild(Qo("span",Bo(m),"cm-tab"));e.col+=m}else{var d=e.cm.options.specialCharPlaceholder
(h[0]);r&&i<9?l.appendChild(Qo("span",[d])):l.appendChild(d),e.col+=1}e.map.push(e.pos,e.pos+1,d),e.pos++}}if(n||s||o||f){var g=n||"";s&&(g+=s),o&&(g+=o);var y=Qo("span",[l],g);return u&&(y.title=u),e.content.appendChild(y)}e.content.appendChild(l)}function ks(e){function t(e){var t=" ";for(var n=0;n<e.length-2;++n)t+=n%2?" ":"\u00a0";return t+=" ",t}return function(n,r,i,s,o,u){e(n,r.replace(/ {3,}/g,t),i,s,o,u)}}function Ls(e,t){return function(n,r,i,s,o,u){i=i?i+" cm-force-border":"cm-force-border";var a=n.pos,f=a+r.length;for(;;){for(var l=0;l<t.length;l++){var c=t[l];if(c.to>a&&c.from<=a)break}if(c.to>=f)return e(n,r,i,s,o,u);e(n,r.slice(0,c.to-a),i,s,null,u),s=null,r=r.slice(c.to-a),a=c.to}}}function As(e,t,n,r){var i=!r&&n.widgetNode;i&&(e.map.push(e.pos,e.pos+t,i),e.content.appendChild(i)),e.pos+=t}function Os(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(!r){for(var o=1;o<n.length;o+=2)t.addToken(t,i.slice(s,s=n[o]),xs(n[o+1],t.cm.options));return}var u=i.length,a=0,o=1,f="",l,c=0
,h,p,d,v,m;for(;;){if(c==a){h=p=d=v="",m=null,c=Infinity;var g=[];for(var y=0;y<r.length;++y){var b=r[y],w=b.marker;b.from<=a&&(b.to==null||b.to>a)?(b.to!=null&&c>b.to&&(c=b.to,p=""),w.className&&(h+=" "+w.className),w.startStyle&&b.from==a&&(d+=" "+w.startStyle),w.endStyle&&b.to==c&&(p+=" "+w.endStyle),w.title&&!v&&(v=w.title),w.collapsed&&(!m||Qi(m.marker,w)<0)&&(m=b)):b.from>a&&c>b.from&&(c=b.from),w.type=="bookmark"&&b.from==a&&w.widgetNode&&g.push(w)}if(m&&(m.from||0)==a){As(t,(m.to==null?u+1:m.to)-a,m.marker,m.from==null);if(m.to==null)return}if(!m&&g.length)for(var y=0;y<g.length;++y)As(t,0,g[y])}if(a>=u)break;var E=Math.min(u,c);for(;;){if(f){var S=a+f.length;if(!m){var x=S>E?f.slice(0,E-a):f;t.addToken(t,x,l?l+h:h,d,a+x.length==c?p:"",v)}if(S>=E){f=f.slice(E-a),a=E;break}a=S,d=""}f=i.slice(s,s=n[o++]),l=xs(n[o++],t.cm.options)}}}function Ms(e,t){return t.from.ch==0&&t.to.ch==0&&jo(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function _s(e,t,n,r){function i(e){return n?
n[e]:null}function s(e,n,i){hs(e,n,i,r),Eo(e,"change",e,t)}var o=t.from,u=t.to,a=t.text,f=Rs(e,o.line),l=Rs(e,u.line),c=jo(a),h=i(a.length-1),p=u.line-o.line;if(Ms(e,t)){for(var d=0,v=[];d<a.length-1;++d)v.push(new cs(a[d],i(d),r));s(l,l.text,h),p&&e.remove(o.line,p),v.length&&e.insert(o.line,v)}else if(f==l)if(a.length==1)s(f,f.text.slice(0,o.ch)+c+f.text.slice(u.ch),h);else{for(var v=[],d=1;d<a.length-1;++d)v.push(new cs(a[d],i(d),r));v.push(new cs(c+f.text.slice(u.ch),h,r)),s(f,f.text.slice(0,o.ch)+a[0],i(0)),e.insert(o.line+1,v)}else if(a.length==1)s(f,f.text.slice(0,o.ch)+a[0]+l.text.slice(u.ch),i(0)),e.remove(o.line+1,p);else{s(f,f.text.slice(0,o.ch)+a[0],i(0)),s(l,c+l.text.slice(u.ch),h);for(var d=1,v=[];d<a.length-1;++d)v.push(new cs(a[d],i(d),r));p>1&&e.remove(o.line+1,p-1),e.insert(o.line+1,v)}Eo(e,"change",e,t)}function Ds(e){this.lines=e,this.parent=null;for(var t=0,n=0;t<e.length;++t)e[t].parent=this,n+=e[t].height;this.height=n}function Ps(e){this.children=e;var t=0,n=0;for(
var r=0;r<e.length;++r){var i=e[r];t+=i.chunkSize(),n+=i.height,i.parent=this}this.size=t,this.height=n,this.parent=null}function Is(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc==i)continue;var a=s&&u.sharedHist;if(n&&!a)continue;t(u.doc,a),r(u.doc,e,a)}}r(e,null,!0)}function qs(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,L(e),T(e),e.options.lineWrapping||H(e),e.options.mode=t.modeOption,zn(e)}function Rs(e,t){t-=e.first;if(t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],s=i.chunkSize();if(t<s){n=i;break}t-=s}return n.lines[t]}function Us(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function zs(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function Ws(e,t){var n=t-e.height;if(
n)for(var r=e;r;r=r.parent)r.height+=n}function Xs(e){if(e.parent==null)return null;var t=e.parent,n=Io(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function Vs(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],s=i.height;if(t<s){e=i;continue e}t-=s,n+=i.chunkSize()}return n}while(!e.lines);for(var r=0;r<e.lines.length;++r){var o=e.lines[r],u=o.height;if(t<u)break;t-=u}return n+r}function $s(e){e=ts(e);var t=0,n=e.parent;for(var r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var s=n.parent;s;n=s,s=n.parent)for(var r=0;r<s.children.length;++r){var o=s.children[r];if(o==n)break;t+=o.height}return t}function Js(e){var t=e.order;return t==null&&(t=e.order=ju(e.text)),t}function Ks(e){this.done=[],this.undone=[],this.undoDepth=Infinity,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this
.generation=this.maxGeneration=e||1}function Qs(e,t){var n={from:vt(t.from),to:Fr(t),text:Us(e,t.from,t.to)};return ro(e,n,t.from.line,t.to.line+1),Is(e,function(e){ro(e,n,t.from.line,t.to.line+1)},!0),n}function Gs(e){while(e.length){var t=jo(e);if(!t.ranges)break;e.pop()}}function Ys(e,t){if(t)return Gs(e.done),jo(e.done);if(e.done.length&&!jo(e.done).ranges)return jo(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),jo(e.done)}function Zs(e,t,n,r){var i=e.history;i.undone.length=0;var s=+(new Date),o;if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&i.lastModTime>s-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))&&(o=Ys(i,i.lastOp==r))){var u=jo(o.changes);dt(t.from,t.to)==0&&dt(t.from,u.to)==0?u.to=Fr(t):o.changes.push(Qs(e,t))}else{var a=jo(i.done);(!a||!a.ranges)&&no(e.sel,i.done),o={changes:[Qs(e,t)],generation:i.generation},i.done.push(o);while(i.done.length>i.undoDepth)i.done.shift(),i.done[0].ranges||i.done
.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,u||bo(e,"historyAdded")}function eo(e,t,n,r){var i=t.charAt(0);return i=="*"||i=="+"&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function to(e,t,n,r){var i=e.history,s=r&&r.origin;n==i.lastSelOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||eo(e,s,jo(i.done),t))?i.done[i.done.length-1]=t:no(t,i.done),i.lastSelTime=+(new Date),i.lastSelOrigin=s,i.lastSelOp=n,r&&r.clearRedo!==!1&&Gs(i.undone)}function no(e,t){var n=jo(t);n&&n.ranges&&n.equals(e)||t.push(e)}function ro(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function io(e){if(!e)return null;for(var t=0,n;t<e.length;++t)e[t].marker.explicitlyCleared?
n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function so(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(io(n[r]));return i}function oo(e,t,n){for(var r=0,i=[];r<e.length;++r){var s=e[r];if(s.ranges){i.push(n?yt.prototype.deepCopy.call(s):s);continue}var o=s.changes,u=[];i.push({changes:u});for(var a=0;a<o.length;++a){var f=o[a],l;u.push({from:f.from,to:f.to,text:f.text});if(t)for(var c in f)(l=c.match(/^spans_(\d+)$/))&&Io(t,Number(l[1]))>-1&&(jo(u)[c]=f[c],delete f[c])}}return i}function uo(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function ao(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;if(s.ranges){s.copied||(s=e[i]=s.deepCopy(),s.copied=!0);for(var u=0;u<s.ranges.length;u++)uo(s.ranges[u].anchor,t,n,r),uo(s.ranges[u].head,t,n,r);continue}for(var u=0;u<s.changes.length;++u){var a=s.changes[u];if(n<a.from.line)a.from=pt(a.from.line+r,a.from.ch),a.to=pt(a.to.line+r,a.to.ch);else if(t<=a.to.line){o=!1;break}
}o||(e.splice(0,i+1),i=0)}}function fo(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;ao(e.done,n,r,i),ao(e.undone,n,r,i)}function ho(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function vo(e){return e.target||e.srcElement}function mo(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),v&&e.ctrlKey&&t==1&&(t=3),t}function Eo(e,t){function s(e){return function(){e.apply(null,r)}}var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2),i;Cn?i=Cn.delayedCallbacks:wo?i=wo:(i=wo=[],setTimeout(So,0));for(var o=0;o<n.length;++o)i.push(s(n[o]))}function So(){var e=wo;wo=null;for(var t=0;t<e.length;++t)e[t]()}function xo(e,t,n){return bo(e,n||t.type,e,t),ho(t)||t.codemirrorIgnore}function To(e){var t=e._handlers&&e._handlers.cursorActivity;if(!t)return;var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var r=0;r<t.length;++r)Io(n,t[r])==-1&&n.push(t[r])}function No
(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function Co(e){e.prototype.on=function(e,t){go(this,e,t)},e.prototype.off=function(e,t){yo(this,e,t)}}function _o(){this.id=null}function Po(e,t,n){for(var r=0,i=0;;){var s=e.indexOf("	",r);s==-1&&(s=e.length);var o=s-r;if(s==e.length||i+o>=t)return r+Math.min(o,t-i);i+=s-r,i+=n-i%n,r=s+1;if(i>=t)return r}}function Bo(e){while(Ho.length<=e)Ho.push(jo(Ho)+" ");return Ho[e]}function jo(e){return e[e.length-1]}function Io(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function qo(e,t){var n=[];for(var r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function Ro(e,t){var n;if(Object.create)n=Object.create(e);else{var r=function(){};r.prototype=e,n=new r}return t&&Uo(t,n),n}function Uo(e,t,n){t||(t={});for(var r in e)e.hasOwnProperty(r)&&(n!==!1||!t.hasOwnProperty(r))&&(t[r]=e[r]);return t}function zo(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function Vo(e,t){return t?t.source
.indexOf("\\w")>-1&&Xo(e)?!0:t.test(e):Xo(e)}function $o(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function Ko(e){return e.charCodeAt(0)>=768&&Jo.test(e)}function Qo(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")i.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function Yo(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function Zo(e,t){return Yo(e).appendChild(t)}function eu(e,t){if(e.contains)return e.contains(t);while(t=t.parentNode)if(t==e)return!0}function tu(){return document.activeElement}function nu(e){return new RegExp("\\b"+e+"\\b\\s*")}function ru(e,t){var n=nu(t);n.test(e.className)&&(e.className=e.className.replace(n,""))}function iu(e,t){nu(t).test(e.className)||(e.className+=" "+t)}function su(e,t){var n=e.split(" ");for(var r=0;r<n.length;r++)n[r]&&!nu(n[r]).test(t)&&(t+=" "+n[r]);return t}function ou(e)
{if(!document.body.getElementsByClassName)return;var t=document.body.getElementsByClassName("CodeMirror");for(var n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function au(){if(uu)return;fu(),uu=!0}function fu(){var e;go(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,cu=null,ou(sr)},100))}),go(window,"blur",function(){ou(Hr)})}function hu(e){if(cu!=null)return cu;var t=Qo("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Zo(e,t),t.offsetWidth&&(cu=t.offsetHeight-t.clientHeight),cu||0}function du(e){if(pu==null){var t=Qo("span","\u200b");Zo(e,Qo("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(pu=t.offsetWidth<=1&&t.offsetHeight>2&&!(r&&i<8))}return pu?Qo("span","\u200b"):Qo("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function mu(e){if(vu!=null)return vu;var t=Zo(e,document.createTextNode("A\u062eA")),n=Go(t,0,1).getBoundingClientRect();if(n.left==n.right)return!1;var r=Go(t,1,2).getBoundingClientRect
();return vu=r.right-n.right<3}function Eu(e){if(wu!=null)return wu;var t=Zo(e,Qo("span","x")),n=t.getBoundingClientRect(),r=Go(t,0,1).getBoundingClientRect();return wu=Math.abs(n.left-r.left)>1}function xu(e,t,n,r){if(!e)return r(t,n,"ltr");var i=!1;for(var s=0;s<e.length;++s){var o=e[s];if(o.from<n&&o.to>t||t==n&&o.to==t)r(Math.max(o.from,t),Math.min(o.to,n),o.level==1?"rtl":"ltr"),i=!0}i||r(t,n,"ltr")}function Tu(e){return e.level%2?e.to:e.from}function Nu(e){return e.level%2?e.from:e.to}function Cu(e){var t=Js(e);return t?Tu(t[0]):0}function ku(e){var t=Js(e);return t?Nu(jo(t)):e.text.length}function Lu(e,t){var n=Rs(e.doc,t),r=ts(n);r!=n&&(t=Xs(r));var i=Js(r),s=i?i[0].level%2?ku(r):Cu(r):0;return pt(t,s)}function Au(e,t){var n,r=Rs(e.doc,t);while(n=Zi(r))r=n.find(1,!0).line,t=null;var i=Js(r),s=i?i[0].level%2?Cu(r):ku(r):r.text.length;return pt(t==null?Xs(r):t,s)}function Ou(e,t){var n=Lu(e,t.line),r=Rs(e.doc,n.line),i=Js(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/
)),o=t.line==n.line&&t.ch<=s&&t.ch;return pt(n.line,o?0:s)}return n}function Mu(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:t<n}function Du(e,t){_u=null;for(var n=0,r;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return n;if(i.from==t||i.to==t){if(r!=null)return Mu(e,i.level,e[r].level)?(i.from!=i.to&&(_u=r),n):(i.from!=i.to&&(_u=n),r);r=n}}return r}function Pu(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&Ko(e.text.charAt(t)));return t}function Hu(e,t,n,r){var i=Js(e);if(!i)return Bu(e,t,n,r);var s=Du(i,t),o=i[s],u=Pu(e,t,o.level%2?-n:n,r);for(;;){if(u>o.from&&u<o.to)return u;if(u==o.from||u==o.to)return Du(i,u)==s?u:(o=i[s+=n],n>0==o.level%2?o.to:o.from);o=i[s+=n];if(!o)return null;n>0==o.level%2?u=Pu(e,o.to,-1,r):u=Pu(e,o.from,1,r)}}function Bu(e,t,n,r){var i=t+n;if(r)while(i>0&&Ko(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent
),r=t||n,i=r&&(t?document.documentMode||6:n[1]),s=/WebKit\//.test(navigator.userAgent),o=s&&/Qt\/\d+\.\d+/.test(navigator.userAgent),u=/Chrome\//.test(navigator.userAgent),a=/Opera\//.test(navigator.userAgent),f=/Apple Computer/.test(navigator.vendor),l=/KHTML\//.test(navigator.userAgent),c=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),h=/PhantomJS/.test(navigator.userAgent),p=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=p||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),v=p||/Mac/.test(navigator.platform),m=/win/i.test(navigator.platform),g=a&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);g&&(g=Number(g[1])),g&&g>=15&&(a=!1,s=!0);var y=v&&(o||a&&(g==null||g<12.11)),b=e||r&&i>=9,w=!1,E=!1,pt=S.Pos=function(e,t){if(!(this instanceof pt))return new pt(e,t);this.line=e,this.ch=t},dt=S.cmpPos=function(e,t){return e.line-t.line||e.ch-t.ch};yt.prototype={primary:function(){return this.ranges[this.primIndex
]},equals:function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],r=e.ranges[t];if(dt(n.anchor,r.anchor)!=0||dt(n.head,r.head)!=0)return!1}return!0},deepCopy:function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new bt(vt(this.ranges[t].anchor),vt(this.ranges[t].head));return new yt(e,this.primIndex)},somethingSelected:function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},contains:function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(dt(t,r.from())>=0&&dt(e,r.to())<=0)return n}return-1}},bt.prototype={from:function(){return gt(this.anchor,this.head)},to:function(){return mt(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var un={left:0,right:0,top:0,bottom:0},xn,Cn=null,kn=0,Yn=null,fr,lr,mr=0,Er=0,Sr=null;r?Sr=-0.53:e?Sr=15:u?Sr=-0.7:f&&(
Sr=-1/3);var Cr,Ar=null,Fr=S.changeEnd=function(e){return e.text?pt(e.from.line+e.text.length-1,jo(e.text).length+(e.text.length==1?e.from.ch:0)):e.to};S.prototype={constructor:S,focus:function(){window.focus(),tr(this),Gn(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,ci.hasOwnProperty(e)&&Fn(this,ci[e])(this,t,r)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if(t[n]==e||typeof t[n]!="string"&&t[n].name==e)return t.splice(n,1),!0},addOverlay:In(function(e,t){var n=e.token?e:S.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,zn(this)}),removeOverlay:In(function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==
e||typeof e=="string"&&r.name==e){t.splice(n,1),this.state.modeGen++,zn(this);return}}}),indentLine:In(function(e,t,n){typeof t!="string"&&typeof t!="number"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Nt(this.doc,e)&&ii(this,e,t,n)}),indentSelection:In(function(e){var t=this.doc.sel.ranges,n=-1;for(var r=0;r<t.length;r++){var i=t[r];if(!i.empty()){var s=i.from(),o=i.to(),u=Math.max(n,s.line);n=Math.min(this.lastLine(),o.line-(o.ch?0:1))+1;for(var a=u;a<n;++a)ii(this,a,e);var f=this.doc.sel.ranges;s.ch==0&&t.length==f.length&&f[r].from().ch>0&&Ot(this.doc,r,new bt(s,f[r].to()),Ao)}else i.head.line>n&&(ii(this,i.head.line,e,!0),n=i.head.line,r==this.doc.sel.primIndex&&ni(this))}}),getTokenAt:function(e,t){var n=this.doc;e=xt(n,e);var r=Kt(this,e.line,t),i=this.doc.mode,s=Rs(n,e.line),o=new ki(s.text,this.options.tabSize);while(o.pos<e.ch&&!o.eol()){o.start=o.pos;var u=ms(i,o,r)}return{start:o.start,end:o.pos,string:o.current(),type:u||null,state:r}},getTokenTypeAt
:function(e){e=xt(this.doc,e);var t=bs(this,Rs(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch,s;if(i==0)s=t[2];else for(;;){var o=n+r>>1;if((o?t[o*2-1]:0)>=i)r=o;else{if(!(t[o*2+1]<i)){s=t[o*2+2];break}n=o+1}}var u=s?s.indexOf("cm-overlay "):-1;return u<0?s:u==0?null:s.slice(0,u-1)},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?S.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=[];if(!yi.hasOwnProperty(t))return yi;var r=yi[t],i=this.getModeAt(e);if(typeof i[t]=="string")r[i[t]]&&n.push(r[i[t]]);else if(i[t])for(var s=0;s<i[t].length;s++){var o=r[i[t][s]];o&&n.push(o)}else i.helperType&&r[i.helperType]?n.push(r[i.helperType]):r[i.name]&&n.push(r[i.name]);for(var s=0;s<r._global.length;s++){var u=r._global[s];u.pred(i,this)&&Io(n,u.val)==-1&&n.push(u.val)}return n},getStateAfter:function(e,t){var n=this.doc;return e=St(n,e==null?n.first+n.size-1:e),Kt(this,e+1,t)},cursorCoords:function(e,t){
var n,r=this.doc.sel.primary();return e==null?n=r.head:typeof e=="object"?n=xt(this.doc,e):n=e?r.from():r.to(),yn(this,n,t||"page")},charCoords:function(e,t){return gn(this,xt(this.doc,e),t||"page")},coordsChar:function(e,t){return e=mn(this,e,t||"page"),En(this,e.left,e.top)},lineAtHeight:function(e,t){return e=mn(this,{top:e,left:0},t||"page").top,Vs(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=Rs(this.doc,e);return vn(this,i,{top:0,left:0},t||"page").top+(n?this.doc.height-$s(i):0)},defaultTextHeight:function(){return Tn(this.display)},defaultCharWidth:function(){return Nn(this.display)},setGutterMarker:In(function(e,t,n){return si(this.doc,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&$o(r)&&(e.gutterMarkers=null),!0})}),clearGutter:In(function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&
(n.gutterMarkers[e]=null,Wn(t,r,"gutter"),$o(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineWidget:In(function(e,t,n){return ls(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!Nt(this.doc,e))return null;var t=e;e=Rs(this.doc,e);if(!e)return null}else{var t=Xs(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=yn(this,xt(this.doc,e));var o=e.bottom,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="above"||r=="near"){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=
a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&Zr(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:In(Or),triggerOnKeyPress:In(Dr),triggerOnKeyUp:_r,execCommand:function(e){if(Ei.hasOwnProperty(e))return Ei[e](this)},findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=0,o=xt(this.doc,e);s<t;++s){o=ui(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:In(function(e,t){var n=this;n.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?ui(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},Mo)}),deleteH:In(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):oi(this,function(n){var i=ui(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV
:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var o=0,u=xt(this.doc,e);o<t;++o){var a=yn(this,u,"div");s==null?s=a.left:a.left=s,u=ai(this,a,i,n);if(u.hitSide)break}return u},moveV:In(function(e,t){var n=this,r=this.doc,i=[],s=!n.display.shift&&!r.extend&&r.sel.somethingSelected();r.extendSelectionsBy(function(o){if(s)return e<0?o.from():o.to();var u=yn(n,o.head,"div");o.goalColumn!=null&&(u.left=o.goalColumn),i.push(u.left);var a=ai(n,u,e,t);return t=="page"&&o==r.sel.primary()&&ti(n,null,gn(n,a,"div").top-u.top),a},Mo);if(i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]}),toggleOverwrite:function(e){if(e!=null&&e==this.state.overwrite)return;(this.state.overwrite=!this.state.overwrite)?iu(this.display.cursorDiv,"CodeMirror-overwrite"):ru(this.display.cursorDiv,"CodeMirror-overwrite"),bo(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return tu()==this.display.input},scrollTo:In(function(e,t){(e!=null||t!=null)&&ri(this),e!=null&&
(this.curOp.scrollLeft=e),t!=null&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller,t=ko;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:In(function(e,t){e==null?(e={from:this.doc.sel.primary().head,to:null},t==null&&(t=this.options.cursorScrollMargin)):typeof e=="number"?e={from:pt(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0;if(e.from.line!=null)ri(this),this.curOp.scrollToPos=e;else{var n=ei(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:In(function(e,t){function r(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}var n=this;e!=null&&(n.display.wrapper.style.width=r(e)),t!=null&&(n.display.wrapper.style.height=r(t)),n.options.lineWrapping&&
cn(this);var i=n.display.viewFrom;n.doc.iter(i,n.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){Wn(n,i,"widget");break}++i}),n.curOp.forceUpdate=!0,bo(n,"refresh",this)}),operation:function(e){return jn(this,e)},refresh:In(function(){var e=this.display.cachedTextHeight;zn(this),this.curOp.forceUpdate=!0,hn(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),D(this),(e==null||Math.abs(e-Tn(this.display))>.5)&&L(this),bo(this,"refresh",this)}),swapDoc:In(function(e){var t=this.doc;return t.cm=null,qs(this,e),hn(this),er(this),this.scrollTo(e.scrollLeft,e.scrollTop),Eo(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Co(S);var li=S.defaults={},ci=S.optionHandlers={},pi=S.Init={toString:function(){return"CodeMirror.Init"}};hi("value"
,"",function(e,t){e.setValue(t)},!0),hi("mode",null,function(e,t){e.doc.modeOption=t,T(e)},!0),hi("indentUnit",2,T,!0),hi("indentWithTabs",!1),hi("smartIndent",!0),hi("tabSize",4,function(e){N(e),hn(e),zn(e)},!0),hi("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),hi("specialCharPlaceholder",Ns,function(e){e.refresh()},!0),hi("electricChars",!0),hi("rtlMoveVisually",!m),hi("wholeLineUpdateBefore",!0),hi("theme","default",function(e){O(e),M(e)},!0),hi("keyMap","default",A),hi("extraKeys",null),hi("lineWrapping",!1,C,!0),hi("gutters",[],function(e){B(e.options),M(e)},!0),hi("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?W(e.display)+"px":"0",e.refresh()},!0),hi("coverGutterNextToScrollbar",!1,I,!0),hi("lineNumbers",!1,function(e){B(e.options),M(e)},!0),hi("firstLineNumber",1,M,!0),hi("lineNumberFormatter",function(e){return e},M,!0),hi("showCursorWhenSelecting"
,!1,Ut,!0),hi("resetSelectionOnContextMenu",!0),hi("readOnly",!1,function(e,t){t=="nocursor"?(Hr(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||er(e))}),hi("disableInput",!1,function(e,t){t||er(e)},!0),hi("dragDrop",!0),hi("cursorBlinkRate",530),hi("cursorScrollMargin",0),hi("cursorHeight",1,Ut,!0),hi("singleCursorHeightPerLine",!0,Ut,!0),hi("workTime",100),hi("workDelay",100),hi("flattenSpans",!0,N,!0),hi("addModeClass",!1,N,!0),hi("pollInterval",100),hi("undoDepth",200,function(e,t){e.doc.history.undoDepth=t}),hi("historyEventDelay",1250),hi("viewportMargin",10,function(e){e.refresh()},!0),hi("maxHighlightLength",1e4,N,!0),hi("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),hi("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),hi("autofocus",null);var di=S.modes={},vi=S.mimeModes={};S.defineMode=function(e,t){!S.defaults.mode&&e!="null"&&(S.defaults.mode=e);if(arguments.length>2){t.dependencies=
[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}di[e]=t},S.defineMIME=function(e,t){vi[e]=t},S.resolveMode=function(e){if(typeof e=="string"&&vi.hasOwnProperty(e))e=vi[e];else if(e&&typeof e.name=="string"&&vi.hasOwnProperty(e.name)){var t=vi[e.name];typeof t=="string"&&(t={name:t}),e=Ro(t,e),e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return S.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},S.getMode=function(e,t){var t=S.resolveMode(t),n=di[t.name];if(!n)return S.getMode(e,"text/plain");var r=n(e,t);if(mi.hasOwnProperty(t.name)){var i=mi[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}r.name=t.name,t.helperType&&(r.helperType=t.helperType);if(t.modeProps)for(var s in t.modeProps)r[s]=t.modeProps[s];return r},S.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),S.defineMIME("text/plain","null");var mi=S.modeExtensions=
{};S.extendMode=function(e,t){var n=mi.hasOwnProperty(e)?mi[e]:mi[e]={};Uo(t,n)},S.defineExtension=function(e,t){S.prototype[e]=t},S.defineDocExtension=function(e,t){Bs.prototype[e]=t},S.defineOption=hi;var gi=[];S.defineInitHook=function(e){gi.push(e)};var yi=S.helpers={};S.registerHelper=function(e,t,n){yi.hasOwnProperty(e)||(yi[e]=S[e]={_global:[]}),yi[e][t]=n},S.registerGlobalHelper=function(e,t,n,r){S.registerHelper(e,t,r),yi[e]._global.push({pred:n,val:r})};var bi=S.copyState=function(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n},wi=S.startState=function(e,t,n){return e.startState?e.startState(t,n):!0};S.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var Ei=S.commands={selectAll:function(e){e.setSelection(pt(e.firstLine(),0),pt(e.lastLine()),Ao)},singleSelection:function(e){e.setSelection(e.getCursor
("anchor"),e.getCursor("head"),Ao)},killLine:function(e){oi(e,function(t){if(t.empty()){var n=Rs(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:pt(t.head.line+1,0)}:{from:t.head,to:pt(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){oi(e,function(t){return{from:pt(t.from().line,0),to:xt(e.doc,pt(t.to().line+1,0))}})},delLineLeft:function(e){oi(e,function(e){return{from:pt(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){oi(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){oi(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){e.undo()},redo:function(e){e.redo()},undoSelection:function(e){e.undoSelection()},redoSelection:function(e){e.redoSelection()},goDocStart:function(e){e.extendSelection
(pt(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(pt(e.lastLine()))},goLineStart:function(e){e.extendSelectionsBy(function(t){return Lu(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){e.extendSelectionsBy(function(t){return Ou(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){e.extendSelectionsBy(function(t){return Au(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Mo)},goLineLeft:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Mo)},goLineLeftSmart:function(e){e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?Ou(e,t.head):r},Mo)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line"
)},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	")},insertSoftTab:function(e){var t=[],n=e.listSelections(),r=e.options.tabSize
;for(var i=0;i<n.length;i++){var s=n[i].from(),o=Do(e.getLine(s.line),s.ch,r);t.push((new Array(r-o%r+1)).join(" "))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){jn(e,function(){var t=e.listSelections(),n=[];for(var r=0;r<t.length;r++){var i=t[r].head,s=Rs(e.doc,i.line).text;if(s){i.ch==s.length&&(i=new pt(i.line,i.ch-1));if(i.ch>0)i=new pt(i.line,i.ch+1),e.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),pt(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var o=Rs(e.doc,i.line-1).text;o&&e.replaceRange(s.charAt(0)+"\n"+o.charAt(o.length-1),pt(i.line-1,o.length-1),pt(i.line,1),"+transpose")}}n.push(new bt(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){jn(e,function(){var t=e.listSelections().length;for(var n=0;n<t;n++){var r=e.listSelections()[n];e.replaceRange("\n",r.anchor,r.head,"+input"),e.indentLine(r.from().line+1,null,!0),ni(e)}})},toggleOverwrite:function(e){
e.toggleOverwrite()}},Si=S.keyMap={};Si.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Si.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U"
:"redoSelection",fallthrough:"basic"},Si.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]},Si.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D"
:"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},Si["default"]=v?Si.macDefault:Si.pcDefault;var Ti=S.lookupKey=function(e,t,n){function r(t){t=xi(t);var i=t[e];if(i===!1)return"stop";if(i!=null&&n(i))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(s==null)return!1;if(Object.prototype.toString.call(s)!="[object Array]")return r(s);for(var o=0;o<s.length;++o){var u=r(s[o]);if(u)return u}return!1}for(var i=0;i<t.length;++i){var s=r(t[i]);if(s)return s!="stop"}},Ni=S.isModifierKey=function(e){var t=Su[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"},Ci=S.keyName=function(e,t){if(a&&e.keyCode==34&&e["char"])return!1;var n=Su[e.keyCode];if(n==null||e.altGraphKey)return!1;e.altKey&&(n="Alt-"+n);if(y?e.metaKey:e.ctrlKey)n="Ctrl-"+n;if(y?e.ctrlKey:e.metaKey)n="Cmd-"+n;return!t&&e.shiftKey&&(n="Shift-"+n),n};S.fromTextArea=function(e,t){function r(){e.value=a.getValue()}t||(t=
{}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(t.autofocus==null){var n=tu();t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){go(e.form,"submit",r);if(!t.leaveSubmitMethodAlone){var i=e.form,s=i.submit;try{var o=i.submit=function(){r(),i.submit=s,i.submit(),i.submit=o}}catch(u){}}}e.style.display="none";var a=S(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=r,a.getTextArea=function(){return e},a.toTextArea=function(){r(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(yo(e.form,"submit",r),typeof e.form.submit=="function"&&(e.form.submit=s))},a};var ki=S.StringStream=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};ki.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(
){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Do(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Do(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return Do(this.string,null,this.tabSize)-(this.lineStart?Do
(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}};var Li=S.TextMarker=function(e,t){this.lines=[],this.type=t,this.doc=e};Co(Li),Li.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;t&&Ln(e);if(No(this,"clear")){var n=this.find();n&&Eo(this,"clear",n.from,n.to)}var r=null,i=null;for(var s=0;s<this.lines.length;++s){var o=this.lines[s],u=ji(o.markedSpans,this);e&&!this.collapsed?Wn(e,Xs(o),"text"):e&&(u.to!=null&&(i=Xs(o)),u.from!=null&&(r=Xs(o))),o.markedSpans=Fi(o.markedSpans,u),u.from==null&&this.collapsed&&!
ss(this.doc,o)&&e&&Ws(o,Tn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var a=ts(this.lines[s]),f=P(a);f>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=f,e.display.maxLineChanged=!0)}r!=null&&e&&this.collapsed&&zn(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&jt(e.doc)),e&&Eo(e,"markerCleared",e,this),t&&On(e),this.parent&&this.parent.clear()},Li.prototype.find=function(e,t){e==null&&this.type=="bookmark"&&(e=1);var n,r;for(var i=0;i<this.lines.length;++i){var s=this.lines[i],o=ji(s.markedSpans,this);if(o.from!=null){n=pt(t?s:Xs(s),o.from);if(e==-1)return n}if(o.to!=null){r=pt(t?s:Xs(s),o.to);if(e==1)return r}}return n&&{from:n,to:r}},Li.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;if(!e||!n)return;jn(n,function(){var r=e.line,i=Xs(e.line),s=rn(n,i);s&&(ln(s),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0
;if(!ss(t.doc,r)&&t.height!=null){var o=t.height;t.height=null;var u=fs(t)-o;u&&Ws(r,r.height+u)}})},Li.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||Io(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Li.prototype.detachLine=function(e){this.lines.splice(Io(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};var Ai=0,Mi=S.SharedTextMarker=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};Co(Mi),Mi.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Eo(this,"clear")},Mi.prototype.find=function(e,t){return this.primary.find(e,t)};var us=S.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this
.node=t};Co(us),us.prototype.clear=function(){var e=this.cm,t=this.line.widgets,n=this.line,r=Xs(n);if(r==null||!t)return;for(var i=0;i<t.length;++i)t[i]==this&&t.splice(i--,1);t.length||(n.widgets=null);var s=fs(this);jn(e,function(){as(e,n,-s),Wn(e,r,"widget"),Ws(n,Math.max(0,n.height-s))})},us.prototype.changed=function(){var e=this.height,t=this.cm,n=this.line;this.height=null;var r=fs(this)-e;if(!r)return;jn(t,function(){t.curOp.forceUpdate=!0,as(t,n,r),Ws(n,n.height+r)})};var cs=S.Line=function(e,t,n){this.text=e,$i(this,t),this.height=n?n(this):1};Co(cs),cs.prototype.lineNo=function(){return Xs(this)};var Es={},Ss={};Ds.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,ps(i),Eo(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0
;r<t.length;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},Ps.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),o=r.height;r.removeInner(e,s),this.height-=o-r.height,i==s&&(this.children.splice(n--,1),r.parent=null);if((t-=s)==0)break;e=0}else e-=i}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ds))){var u=[];this.collapse(u),this.children=[new Ds(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<=s){i.insertInner(e,t,n);if(i.lines&&i.lines.length>50){while(i.lines.length>50){var o=i.lines.splice(i.lines.length-25,25),u=new Ds(o);i.height-=u.height,
this.children.splice(r+1,0,u),u.parent=this}this.maybeSpill()}break}e-=s}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Ps(t);if(!e.parent){var r=new Ps(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=Io(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e);if(i.iterN(e,o,n))return!0;if((t-=o)==0)break;e=0}else e-=s}}};var Hs=0,Bs=S.Doc=function(e,t,n){if(!(this instanceof Bs))return new Bs(e,t,n);n==null&&(n=0),Ps.call(this,[new Ds([new cs("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var r=pt(n,0);this.sel=Et(r),this.history=new Ks(null),this.id=++Hs,this.modeOption=t,typeof e=="string"&&(e=gu(e)),_s(this
,{from:r,to:r,text:e}),Pt(this,Et(r),Ao)};Bs.prototype=Ro(Ps.prototype,{constructor:Bs,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=zs(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:qn(function(e){var t=pt(this.first,0),n=this.first+this.size-1;Wr(this,{from:t,to:pt(n,Rs(this,n).text.length),text:gu(e),origin:"setValue"},!0),Pt(this,Et(t))}),replaceRange:function(e,t,n,r){t=xt(this,t),n=n?xt(this,n):t,Qr(this,e,t,n,r)},getRange:function(e,t,n){var r=Us(this,xt(this,e),xt(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Nt(this,e))return Rs(this,e)},getLineNumber:function(e){return Xs(e)},getLineHandleVisualStart:function(e){return typeof 
e=="number"&&(e=Rs(this,e)),ts(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return xt(this,e)},getCursor:function(e){var t=this.sel.primary(),n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e=="to"||e===!1?n=t.to():n=t.from(),n},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:qn(function(e,t,n){Mt(this,xt(this,typeof e=="number"?pt(e,t||0):e),null,n)}),setSelection:qn(function(e,t,n){Mt(this,xt(this,e),xt(this,t||e),n)}),extendSelection:qn(function(e,t,n){Lt(this,xt(this,e),t&&xt(this,t),n)}),extendSelections:qn(function(e,t){At(this,Ct(this,e,t))}),extendSelectionsBy:qn(function(e,t){At(this,qo(this.sel.ranges,e),t)}),setSelections:qn(function(e,t,n){if(!e.length)return;for(var r=0,i=[];r<e.length;r++)i[r]=new bt(xt(this,e[r].anchor),xt(this,e[r].head));t==null&&(t=Math.min(e.length-1
,this.sel.primIndex)),Pt(this,wt(i,t),n)}),addSelection:qn(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new bt(xt(this,e),xt(this,t||e))),Pt(this,wt(r,r.length-1),n)}),getSelection:function(e){var t=this.sel.ranges,n;for(var r=0;r<t.length;r++){var i=Us(this,t[r].from(),t[r].to());n=n?n.concat(i):i}return e===!1?n:n.join(e||"\n")},getSelections:function(e){var t=[],n=this.sel.ranges;for(var r=0;r<n.length;r++){var i=Us(this,n[r].from(),n[r].to());e!==!1&&(i=i.join(e||"\n")),t[r]=i}return t},replaceSelection:function(e,t,n){var r=[];for(var i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:qn(function(e,t,n){var r=[],i=this.sel;for(var s=0;s<i.ranges.length;s++){var o=i.ranges[s];r[s]={from:o.from(),to:o.to(),text:gu(e[s]),origin:n}}var u=t&&t!="end"&&Ur(this,r,t);for(var s=r.length-1;s>=0;s--)Wr(this,r[s]);u?Dt(this,u):this.cm&&ni(this.cm)}),undo:qn(function(){Vr(this,"undo")}),redo:qn(function(){Vr(this,"redo")}),undoSelection:qn
(function(){Vr(this,"undo",!0)}),redoSelection:qn(function(){Vr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){var e=this.history,t=0,n=0;for(var r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Ks(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:oo(this.history.done),undone:oo(this.history.undone)}},setHistory:function(e){var t=this.history=new Ks(this.history.maxGeneration);t.done=oo(e.done.slice(0),null,!0),t.undone=oo(e.undone.slice(0),null,!0)},addLineClass:qn(function(e,t,n){return si(this,e,"class"
,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("(?:^|\\s)"+n+"(?:$|\\s)")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:qn(function(e,t,n){return si(this,e,"class",function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!s)return!1;var o=s.index+s[0].length;e[r]=i.slice(0,s.index)+(!s.index||o==i.length?"":" ")+i.slice(o)||null}return!0})}),markText:function(e,t,n){return Oi(this,xt(this,e),xt(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared};return e=xt(this,e),Oi(this,e,e,n,"bookmark")},findMarksAt:function(e){e=xt(this,e);var t=[],n=Rs(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push
(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=xt(this,e),t=xt(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(s){var o=s.markedSpans;if(o)for(var u=0;u<o.length;u++){var a=o[u];!(i==e.line&&e.ch>a.to||a.from==null&&i!=e.line||i==t.line&&a.from>t.ch)&&(!n||n(a.marker))&&r.push(a.marker.parent||a.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n}),xt(this,pt(n,t))},indexFromPos:function(e){e=xt(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new Bs(zs(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history
.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new Bs(zs(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Pi(r,Di(this)),r},unlinkDoc:function(e){e instanceof S&&(e=e.doc);if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1),e.unlinkDoc(this),Hi(Di(this));break}if(e.history==this.history){var r=[e.id];Is(e,function(e){r.push(e.id)},!0),e.history=new Ks(null),e.history.done=oo(this.history.done,r),e.history.undone=oo(this.history.undone,r)}},iterLinkedDocs:function(e){Is(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Bs.prototype.eachLine=Bs.prototype.iter;var js="iter insert remove copy getEditor"
.split(" ");for(var Fs in Bs.prototype)Bs.prototype.hasOwnProperty(Fs)&&Io(js,Fs)<0&&(S.prototype[Fs]=function(e){return function(){return e.apply(this.doc,arguments)}}(Bs.prototype[Fs]));Co(Bs);var lo=S.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},co=S.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},po=S.e_stop=function(e){lo(e),co(e)},go=S.on=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}},yo=S.off=function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}},bo=S.signal=function(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply
(null,r)},wo=null,ko=30,Lo=S.Pass={toString:function(){return"CodeMirror.Pass"}},Ao={scroll:!1},Oo={origin:"*mouse"},Mo={origin:"+move"};_o.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Do=S.countColumn=function(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;;){var u=e.indexOf("	",s);if(u<0||u>=t)return o+(t-s);o+=u-s,o+=n-o%n,s=u+1}},Ho=[""],Fo=function(e){e.select()};p?Fo=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:r&&(Fo=function(e){try{e.select()}catch(t){}}),[].indexOf&&(Io=function(e,t){return e.indexOf(t)}),[].map&&(qo=function(e,t){return e.map(t)});var Wo=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Xo=S.isWordChar=function(e){return/\w/.test(e)||e>"\u0080"&&(e.toUpperCase()!=e.toLowerCase()||Wo.test(e))},Jo=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/
,Go;document.createRange?Go=function(e,t,n){var r=document.createRange();return r.setEnd(e,n),r.setStart(e,t),r}:Go=function(e,t,n){var r=document.body.createTextRange();return r.moveToElementText(e.parentNode),r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r},r&&i<11&&(tu=function(){try{return document.activeElement}catch(e){return document.body}});var uu=!1,lu=function(){if(r&&i<9)return!1;var e=Qo("div");return"draggable"in e||"dragDrop"in e}(),cu,pu,vu,gu=S.splitLines="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},yu=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints
("StartToEnd",t)!=0},bu=function(){var e=Qo("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),wu=null,Su={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};S.keyNames=Su,function(){for(var e=0;e<10;e++)Su[e+48]=Su[e+96]=String(e);for(var e=65;e<=90;e++)Su[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Su[e+111]=Su[e+63235]="F"+e}();var _u,ju=function(){function n(n){return n<=247?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1773?t.charAt(n-1536):1774<=
n&&n<=2220?"r":8192<=n&&n<=8203?"w":n==8204?"b":"L"}function f(e,t,n){this.level=e,this.from=t,this.to=n}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(e){if(!r.test(e))return!1;var t=e.length,l=[];for(var c=0,h;c<t;++c)l.push(h=n(e.charCodeAt(c)));for(var c=0,p=a;c<t;++c){var h=l[c];h=="m"?l[c]=p:p=h}for(var c=0,d=a;c<t;++c){var h=l[c];h=="1"&&d=="r"?l[c]="n":s.test(h)&&(d=h,h=="r"&&(l[c]="R"))}for(var c=1,p=l[0];c<t-1;++c){var h=l[c]
;h=="+"&&p=="1"&&l[c+1]=="1"?l[c]="1":h==","&&p==l[c+1]&&(p=="1"||p=="n")&&(l[c]=p),p=h}for(var c=0;c<t;++c){var h=l[c];if(h==",")l[c]="N";else if(h=="%"){for(var v=c+1;v<t&&l[v]=="%";++v);var m=c&&l[c-1]=="!"||v<t&&l[v]=="1"?"1":"N";for(var g=c;g<v;++g)l[g]=m;c=v-1}}for(var c=0,d=a;c<t;++c){var h=l[c];d=="L"&&h=="1"?l[c]="L":s.test(h)&&(d=h)}for(var c=0;c<t;++c)if(i.test(l[c])){for(var v=c+1;v<t&&i.test(l[v]);++v);var y=(c?l[c-1]:a)=="L",b=(v<t?l[v]:a)=="L",m=y||b?"L":"R";for(var g=c;g<v;++g)l[g]=m;c=v-1}var w=[],E;for(var c=0;c<t;)if(o.test(l[c])){var S=c;for(++c;c<t&&o.test(l[c]);++c);w.push(new f(0,S,c))}else{var x=c,T=w.length;for(++c;c<t&&l[c]!="L";++c);for(var g=x;g<c;)if(u.test(l[g])){x<g&&w.splice(T,0,new f(1,x,g));var N=g;for(++g;g<c&&u.test(l[g]);++g);w.splice(T,0,new f(2,N,g)),x=g}else++g;x<c&&w.splice(T,0,new f(1,x,c))}return w[0].level==1&&(E=e.match(/^\s+/))&&(w[0].from=E[0].length,w.unshift(new f(0,0,E[0].length))),jo(w).level==1&&(E=e.match(/\s+$/))&&(jo(w).to-=E[0].length
,w.push(new f(0,t-E[0].length,t))),w[0].level!=jo(w).level&&w.push(new f(w[0].level,t,t)),w}}();return S.version="4.5.0",S}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/fold/foldcode",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(t,r,s,o){function f(e){var n=u(t,r);if(!n||n.to.line-n.from.line<a)return null;var i=t.findMarksAt(n.from);for(var s=0;s<i.length;++s)if(i[s].__isFold&&o!=="fold"){if(!e)return null;n.cleared=!0,i[s].clear()}return n}if(s&&s.call){var u=s;s=null}else var u=i(t,s,"rangeFinder");typeof r=="number"&&(r=e.Pos(r,0));var a=i(t,s,"minFoldSize"),l=f(!0);if(i(t,s,"scanUp"))while(!l&&r.line>t.firstLine())r=e.Pos(r.line-1,0),l=f(!1);if(!l||l.cleared||o==="unfold")return;var c=n(t,s);e.on(c,"mousedown",function(t){h.clear(),e.e_preventDefault(t)});var h=t.markText(l.from,l.to,{replacedWith:c,clearOnEnter:!0,__isFold:!0});h.on("clear",function(n,r)
{e.signal(t,"unfold",t,n,r)}),e.signal(t,"fold",t,l.from,l.to)}function n(e,t){var n=i(e,t,"widget");if(typeof n=="string"){var r=document.createTextNode(n);n=document.createElement("span"),n.appendChild(r),n.className="CodeMirror-foldmarker"}return n}function i(e,t,n){if(t&&t[n]!==undefined)return t[n];var i=e.options.foldOptions;return i&&i[n]!==undefined?i[n]:r[n]}e.newFoldFunction=function(e,n){return function(r,i){t(r,i,{rangeFinder:e,widget:n})}},e.defineExtension("foldCode",function(e,n,r){t(this,e,n,r)}),e.defineExtension("isFolded",function(e){var t=this.findMarksAt(e);for(var n=0;n<t.length;++n)if(t[n].__isFold)return!0}),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},e.commands.foldAll=function(t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"fold")})},e.commands.unfoldAll=function(
t){t.operation(function(){for(var n=t.firstLine(),r=t.lastLine();n<=r;n++)t.foldCode(e.Pos(n,0),null,"unfold")})},e.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var r=0;r<e.length;++r){var i=e[r](t,n);if(i)return i}}}),e.registerHelper("fold","auto",function(e,t){var n=e.getHelpers(t,"fold");for(var r=0;r<n.length;r++){var i=n[r](e,t);if(i)return i}});var r={rangeFinder:e.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1};e.defineOption("foldOptions",null)}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("./foldcode")):typeof define=="function"&&define.amd?define("cm/addon/fold/foldgutter",["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(e){function n(e){this.options=e,this.from=this.to=0}function r(e){return e===!0&&(e={}),e.gutter==null&&(e.gutter="CodeMirror-foldgutter"),e.indicatorOpen==null&&(e.indicatorOpen="CodeMirror-foldgutter-open"),e.indicatorFolded==
null&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function i(e,n){var r=e.findMarksAt(t(n));for(var i=0;i<r.length;++i)if(r[i].__isFold&&r[i].find().from.line==n)return!0}function s(e){if(typeof e=="string"){var t=document.createElement("div");return t.className=e+" CodeMirror-guttermarker-subtle",t}return e.cloneNode(!0)}function o(n,r,o){var u=n.state.foldGutter.options,a=r;n.eachLine(r,o,function(r){var o=null;if(i(n,a))o=s(u.indicatorFolded);else{var f=t(a,0),l=u.rangeFinder||e.fold.auto,c=l&&l(n,f);c&&c.from.line+1<c.to.line&&(o=s(u.indicatorOpen))}n.setGutterMarker(r,u.gutter,o),++a})}function u(e){var t=e.getViewport(),n=e.state.foldGutter;if(!n)return;e.operation(function(){o(e,t.from,t.to)}),n.from=t.from,n.to=t.to}function a(e,n,r){var i=e.state.foldGutter.options;if(r!=i.gutter)return;e.foldCode(t(n,0),i.rangeFinder)}function f(e){var t=e.state.foldGutter,n=e.state.foldGutter.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){u(e)
},n.foldOnChangeTimeSpan||600)}function l(e){var t=e.state.foldGutter,n=e.state.foldGutter.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var n=e.getViewport();t.from==t.to||n.from-t.to>20||t.from-n.to>20?u(e):e.operation(function(){n.from<t.from&&(o(e,n.from,t.from),t.from=n.from),n.to>t.to&&(o(e,t.to,n.to),t.to=n.to)})},n.updateViewportTimeSpan||400)}function c(e,t){var n=e.state.foldGutter,r=t.line;r>=n.from&&r<n.to&&o(e,r,r+1)}e.defineOption("foldGutter",!1,function(t,i,s){s&&s!=e.Init&&(t.clearGutter(t.state.foldGutter.options.gutter),t.state.foldGutter=null,t.off("gutterClick",a),t.off("change",f),t.off("viewportChange",l),t.off("fold",c),t.off("unfold",c),t.off("swapDoc",u)),i&&(t.state.foldGutter=new n(r(i)),u(t),t.on("gutterClick",a),t.on("change",f),t.on("viewportChange",l),t.on("fold",c),t.on("unfold",c),t.on("swapDoc",u))});var t=e.Pos}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&
define.amd?define("cm/addon/fold/brace-fold",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.registerHelper("fold","brace",function(t,n){function u(s){for(var u=n.ch,a=0;;){var f=u<=0?-1:i.lastIndexOf(s,u-1);if(f==-1){if(a==1)break;a=1,u=i.length;continue}if(a==1&&f<n.ch)break;o=t.getTokenTypeAt(e.Pos(r,f+1));if(!/^(comment|string)/.test(o))return f+1;u=f-1}}var r=n.line,i=t.getLine(r),s,o,a="{",f="}",s=u("{");s==null&&(a="[",f="]",s=u("["));if(s==null)return;var l=1,c=t.lastLine(),h,p;e:for(var d=r;d<=c;++d){var v=t.getLine(d),m=d==r?s:0;for(;;){var g=v.indexOf(a,m),y=v.indexOf(f,m);g<0&&(g=v.length),y<0&&(y=v.length),m=Math.min(g,y);if(m==v.length)break;if(t.getTokenTypeAt(e.Pos(d,m+1))==o)if(m==g)++l;else if(!--l){h=d,p=m;break e}++m}}if(h==null||r==h&&p==s)return;return{from:e.Pos(r,s),to:e.Pos(h,p)}}),e.registerHelper("fold","import",function(t,n){function r(n){if(n<t.firstLine()||n>t.lastLine())return null;var r=t.getTokenAt(e.Pos(n,1));/\S/.test(r.string)||(r=t.getTokenAt
(e.Pos(n,r.end+1)));if(r.type!="keyword"||r.string!="import")return null;for(var i=n,s=Math.min(t.lastLine(),n+10);i<=s;++i){var o=t.getLine(i),u=o.indexOf(";");if(u!=-1)return{startCh:r.end,end:e.Pos(i,u)}}}var n=n.line,i=r(n),s;if(!i||r(n-1)||(s=r(n-2))&&s.end.line==n-1)return null;for(var o=i.end;;){var u=r(o.line+1);if(u==null)break;o=u.end}return{from:t.clipPos(e.Pos(n,i.startCh+1)),to:o}}),e.registerHelper("fold","include",function(t,n){function r(n){if(n<t.firstLine()||n>t.lastLine())return null;var r=t.getTokenAt(e.Pos(n,1));/\S/.test(r.string)||(r=t.getTokenAt(e.Pos(n,r.end+1)));if(r.type=="meta"&&r.string.slice(0,8)=="#include")return r.start+8}var n=n.line,i=r(n);if(i==null||r(n-1)!=null)return null;for(var s=n;;){var o=r(s+1);if(o==null)break;++s}return{from:e.Pos(n,i+1),to:t.clipPos(e.Pos(s))}})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/fold/markdown-fold",["../../lib/codemirror"
],e):e(CodeMirror)}(function(e){e.registerHelper("fold","markdown",function(t,n){function i(n){var r=t.getTokenTypeAt(e.Pos(n,0));return r&&/\bheader\b/.test(r)}function s(e,t,n){var s=t&&t.match(/^#+/);return s&&i(e)?s[0].length:(s=n&&n.match(/^[=\-]+\s*$/),s&&i(e+1)?n[0]=="="?1:2:r)}var r=100,o=t.getLine(n.line),u=t.getLine(n.line+1),a=s(n.line,o,u);if(a===r)return undefined;var f=t.lastLine(),l=n.line,c=t.getLine(l+2);while(l<f){if(s(l+1,u,c)<=a)break;++l,u=c,c=t.getLine(l+2)}return{from:e.Pos(n.line,o.length),to:e.Pos(l,t.getLine(l).length)}})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/dialog/dialog",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t,n){var r=e.getWrapperElement(),i;return i=r.appendChild(document.createElement("div")),n?i.className="CodeMirror-dialog CodeMirror-dialog-bottom":i.className="CodeMirror-dialog CodeMirror-dialog-top",typeof t=="string"?
i.innerHTML=t:i.appendChild(t),i}function n(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}e.defineExtension("openDialog",function(r,i,s){function f(e){if(typeof e=="string")l.value=e;else{if(u)return;u=!0,o.parentNode.removeChild(o),a.focus(),s.onClose&&s.onClose(o)}}s||(s={}),n(this,null);var o=t(this,r,s.bottom),u=!1,a=this,l=o.getElementsByTagName("input")[0],c;if(l)s.value&&(l.value=s.value),s.onInput&&e.on(l,"input",function(e){s.onInput(e,l.value,f)}),s.onKeyUp&&e.on(l,"keyup",function(e){s.onKeyUp(e,l.value,f)}),e.on(l,"keydown",function(t){if(s&&s.onKeyDown&&s.onKeyDown(t,l.value,f))return;if(t.keyCode==27||s.closeOnEnter!==!1&&t.keyCode==13)l.blur(),e.e_stop(t),f();t.keyCode==13&&i(l.value)}),s.closeOnBlur!==!1&&e.on(l,"blur",f),l.focus();else if(c=o.getElementsByTagName("button")[0])e.on(c,"click",function(){f(),a.focus()}),s.closeOnBlur!==!1&&e.on(c,"blur",f),c.focus();return f}),e.defineExtension("openConfirm",function(
r,i,s){function c(){if(a)return;a=!0,o.parentNode.removeChild(o),f.focus()}n(this,null);var o=t(this,r,s&&s.bottom),u=o.getElementsByTagName("button"),a=!1,f=this,l=1;u[0].focus();for(var h=0;h<u.length;++h){var p=u[h];(function(t){e.on(p,"click",function(n){e.e_preventDefault(n),c(),t&&t(f)})})(i[h]),e.on(p,"blur",function(){--l,setTimeout(function(){l<=0&&c()},200)}),e.on(p,"focus",function(){++l})}}),e.defineExtension("openNotification",function(r,i){function f(){if(u)return;u=!0,clearTimeout(a),s.parentNode.removeChild(s)}n(this,f);var s=t(this,r,i&&i.bottom),o=i&&(i.duration===undefined?5e3:i.duration),u=!1,a;e.on(s,"click",function(t){e.e_preventDefault(t),f()}),o&&(a=setTimeout(f,i.duration))})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/search/searchcursor",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function n(e,n,i,s){this.atOccurrence=!1,this.doc=e,s==null&&typeof 
n=="string"&&(s=!1),i=i?e.clipPos(i):t(0,0),this.pos={from:i,to:i};if(typeof n!="string")n.global||(n=new RegExp(n.source,n.ignoreCase?"ig":"g")),this.matches=function(r,i){if(r){n.lastIndex=0;var s=e.getLine(i.line).slice(0,i.ch),o=0,u,a;for(;;){n.lastIndex=o;var f=n.exec(s);if(!f)break;u=f,a=u.index,o=u.index+(u[0].length||1);if(o==s.length)break}var l=u&&u[0].length||0;l||(a==0&&s.length==0?u=undefined:a!=e.getLine(i.line).length&&l++)}else{n.lastIndex=i.ch;var s=e.getLine(i.line),u=n.exec(s),l=u&&u[0].length||0,a=u&&u.index;a+l!=s.length&&!l&&(l=1)}if(u&&l)return{from:t(i.line,a),to:t(i.line,a+l),match:u}};else{var o=n;s&&(n=n.toLowerCase());var u=s?function(e){return e.toLowerCase()}:function(e){return e},a=n.split("\n");if(a.length==1)n.length?this.matches=function(i,s){if(i){var a=e.getLine(s.line).slice(0,s.ch),f=u(a),l=f.lastIndexOf(n);if(l>-1)return l=r(a,f,l),{from:t(s.line,l),to:t(s.line,l+o.length)}}else{var a=e.getLine(s.line).slice(s.ch),f=u(a),l=f.indexOf(n);if(l>-1)return l=
r(a,f,l)+s.ch,{from:t(s.line,l),to:t(s.line,l+o.length)}}}:this.matches=function(){};else{var f=o.split("\n");this.matches=function(n,r){var i=a.length-1;if(n){if(r.line-(a.length-1)<e.firstLine())return;if(u(e.getLine(r.line).slice(0,f[i].length))!=a[a.length-1])return;var s=t(r.line,f[i].length);for(var o=r.line-1,l=i-1;l>=1;--l,--o)if(a[l]!=u(e.getLine(o)))return;var c=e.getLine(o),h=c.length-f[0].length;if(u(c.slice(h))!=a[0])return;return{from:t(o,h),to:s}}if(r.line+(a.length-1)>e.lastLine())return;var c=e.getLine(r.line),h=c.length-f[0].length;if(u(c.slice(h))!=a[0])return;var p=t(r.line,h);for(var o=r.line+1,l=1;l<i;++l,++o)if(a[l]!=u(e.getLine(o)))return;if(u(e.getLine(o).slice(0,f[i].length))!=a[i])return;return{from:p,to:t(o,f[i].length)}}}}}function r(e,t,n){if(e.length==t.length)return n;for(var r=Math.min(n,e.length);;){var i=e.slice(0,r).toLowerCase().length;if(i<n)++r;else{if(!(i>n))return r;--r}}}var t=e.Pos;n.prototype={findNext:function(){return this.find(!1)},findPrevious
:function(){return this.find(!0)},find:function(e){function i(e){var r=t(e,0);return n.pos={from:r,to:r},n.atOccurrence=!1,!1}var n=this,r=this.doc.clipPos(e?this.pos.from:this.pos.to);for(;;){if(this.pos=this.matches(e,r))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!r.line)return i(0);r=t(r.line-1,this.doc.getLine(r.line-1).length)}else{var s=this.doc.lineCount();if(r.line==s-1)return i(s);r=t(r.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(n){if(!this.atOccurrence)return;var r=e.splitLines(n);this.doc.replaceRange(r,this.pos.from,this.pos.to),this.pos.to=t(this.pos.from.line+r.length-1,r[r.length-1].length+(r.length==1?this.pos.from.ch:0))}},e.defineExtension("getSearchCursor",function(e,t,r){return new n(this.doc,e,t,r)}),e.defineDocExtension("getSearchCursor",function(e,t,r){return new n(this,e,t,r)}),e.defineExtension("selectMatches",function(t,n){var r=[],i,s=this.getSearchCursor
(t,this.getCursor("from"),n);while(i=s.findNext()){if(e.cmpPos(s.to(),this.getCursor("to"))>0)break;r.push({anchor:s.from(),head:s.to()})}r.length&&this.setSelections(r,0)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):typeof define=="function"&&define.amd?define("cm/addon/search/search",["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(e){function t(e,t){return typeof e=="string"?e=new RegExp(e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),t?"gi":"g"):e.global||(e=new RegExp(e.source,e.ignoreCase?"gi":"g")),{token:function(t){e.lastIndex=t.pos;var n=e.exec(t.string);if(n&&n.index==t.pos)return t.pos+=n[0].length,"searching";n?t.pos=n.index:t.skipToEnd()}}}function n(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function r(e){return e.state.search||(e.state.search=new n)}function i(e){return typeof e=="string"&&e==e.toLowerCase
()}function s(e,t,n){return e.getSearchCursor(t,n,i(t))}function o(e,t,n,r,i){e.openDialog?e.openDialog(t,i,{value:r}):i(prompt(n,r))}function u(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function a(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);return t?(e=new RegExp(t[1],t[2].indexOf("i")==-1?"":"i"),e.test("")&&(e=/x^/)):e==""&&(e=/x^/),e}function l(e,n){var s=r(e);if(s.query)return c(e,n);o(e,f,"Search for:",e.getSelection(),function(r){e.operation(function(){if(!r||s.query)return;s.query=a(r),e.removeOverlay(s.overlay,i(s.query)),s.overlay=t(s.query,i(s.query)),e.addOverlay(s.overlay),s.posFrom=s.posTo=e.getCursor(),c(e,n)})})}function c(t,n){t.operation(function(){var i=r(t),o=s(t,i.query,n?i.posFrom:i.posTo);if(!o.find(n)){o=s(t,i.query,n?e.Pos(t.lastLine()):e.Pos(t.firstLine(),0));if(!o.find(n))return}t.setSelection(o.from(),o.to()),t.scrollIntoView({from:o.from(),to:o.to()}),i.posFrom=o.from(),i.posTo=o.to()})}function h(e){e.operation(function(){var t=r(e);if(!t.query
)return;t.query=null,e.removeOverlay(t.overlay)})}function m(e,t){if(e.getOption("readOnly"))return;o(e,p,"Replace:",e.getSelection(),function(n){if(!n)return;n=a(n),o(e,d,"Replace with:","",function(r){if(t)e.operation(function(){for(var t=s(e,n);t.findNext();)if(typeof n!="string"){var i=e.getRange(t.from(),t.to()).match(n);t.replace(r.replace(/\$(\d)/g,function(e,t){return i[t]}))}else t.replace(r)});else{h(e);var i=s(e,n,e.getCursor()),o=function(){var t=i.from(),r;if(!(r=i.findNext())){i=s(e,n);if(!(r=i.findNext())||t&&i.from().line==t.line&&i.from().ch==t.ch)return}e.setSelection(i.from(),i.to()),e.scrollIntoView({from:i.from(),to:i.to()}),u(e,v,"Replace?",[function(){a(r)},o])},a=function(e){i.replace(typeof n=="string"?r:r.replace(/\$(\d)/g,function(t,n){return e[n]})),o()};o()}})})}var f='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',p='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>'
,d='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',v="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";e.commands.find=function(e){h(e),l(e)},e.commands.findNext=l,e.commands.findPrev=function(e){l(e,!0)},e.commands.clearSearch=h,e.commands.replace=m,e.commands.replaceAll=function(e){m(e,!0)}}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/selection/active-line",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function r(e){for(var r=0;r<e.state.activeLines.length;r++)e.removeLineClass(e.state.activeLines[r],"wrap",t),e.removeLineClass(e.state.activeLines[r],"background",n)}function i(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function s(e,s){var o=[];for(var u=0;u<s.length;u++){var a=s[u];if(!a.empty())continue;var f=e.getLineHandleVisualStart(a.head.line);o[o.length-1
]!=f&&o.push(f)}if(i(e.state.activeLines,o))return;e.operation(function(){r(e);for(var i=0;i<o.length;i++)e.addLineClass(o[i],"wrap",t),e.addLineClass(o[i],"background",n);e.state.activeLines=o})}function o(e,t){s(e,t.ranges)}var t="CodeMirror-activeline",n="CodeMirror-activeline-background";e.defineOption("styleActiveLine",!1,function(t,n,i){var u=i&&i!=e.Init;n&&!u?(t.state.activeLines=[],s(t,t.listSelections()),t.on("beforeSelectionChange",o)):!n&&u&&(t.off("beforeSelectionChange",o),r(t),delete t.state.activeLines)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/display/rulers",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){for(var t=e.display.lineSpace.childNodes.length-1;t>=0;t--){var n=e.display.lineSpace.childNodes[t];/(^|\s)CodeMirror-ruler($|\s)/.test(n.className)&&n.parentNode.removeChild(n)}}function n(t){var n=t.getOption("rulers"),r=t.defaultCharWidth
(),i=t.charCoords(e.Pos(t.firstLine(),0),"div").left,s=t.display.scroller.offsetHeight+30;for(var o=0;o<n.length;o++){var u=document.createElement("div");u.className="CodeMirror-ruler";var a,f=null,l=n[o];typeof l=="number"?a=l:(a=l.column,l.className&&(u.className+=" "+l.className),l.color&&(u.style.borderColor=l.color),l.lineStyle&&(u.style.borderLeftStyle=l.lineStyle),l.width&&(u.style.borderLeftWidth=l.width),f=n[o].className),u.style.left=i+a*r+"px",u.style.top="-50px",u.style.bottom="-20px",u.style.minHeight=s+"px",t.display.lineSpace.insertBefore(u,t.display.cursorDiv)}}function r(e){t(e),n(e)}e.defineOption("rulers",!1,function(i,s,o){o&&o!=e.Init&&(t(i),i.off("refresh",r)),s&&s.length&&(n(i),i.on("refresh",r))})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/keymap/emacs",["../lib/codemirror"],e):e(CodeMirror)}(function(e){function n(e,t){return e.line==t.line&&e.ch==t.ch}function i
(e){r.push(e),r.length>50&&r.shift()}function s(e){if(!r.length)return i(e);r[r.length-1]+=e}function o(e){return r[r.length-(e?Math.min(e,1):1)]||""}function u(){return r.length>1&&r.pop(),o()}function f(e,t,r,o,u){u==null&&(u=e.getRange(t,r)),o&&a&&a.cm==e&&n(t,a.pos)&&e.isClean(a.gen)?s(u):i(u),e.replaceRange("",t,r,"+delete"),o?a={cm:e,pos:t,gen:e.changeGeneration()}:a=null}function l(e,t,n){return e.findPosH(t,n,"char",!0)}function c(e,t,n){return e.findPosH(t,n,"word",!0)}function h(e,t,n){return e.findPosV(t,n,"line",e.doc.sel.goalColumn)}function p(e,t,n){return e.findPosV(t,n,"page",e.doc.sel.goalColumn)}function d(e,n,r){var i=n.line,s=e.getLine(i),o=/\S/.test(r<0?s.slice(0,n.ch):s.slice(n.ch)),u=e.firstLine(),a=e.lastLine();for(;;){i+=r;if(i<u||i>a)return e.clipPos(t(i-r,r<0?0:null));s=e.getLine(i);var f=/\S/.test(s);if(f)o=!0;else if(o)return t(i,0)}}function v(e,n,r){var i=n.line,s=n.ch,o=e.getLine(n.line),u=!1;for(;;){var a=o.charAt(s+(r<0?-1:0));if(!a){if(i==(r<0?e.firstLine
():e.lastLine()))return t(i,s);o=e.getLine(i+r);if(!/\S/.test(o))return t(i,s);i+=r,s=r<0?o.length:0;continue}if(u&&/[!?.]/.test(a))return t(i,s+(r>0?1:0));u||(u=/\w/.test(a)),s+=r}}function m(e,r,i){var s;if(e.findMatchingBracket&&(s=e.findMatchingBracket(r,!0))&&s.match&&(s.forward?1:-1)==i)return i>0?t(s.to.line,s.to.ch+1):s.to;for(var o=!0;;o=!1){var u=e.getTokenAt(r),a=t(r.line,i<0?u.start:u.end);if(!(o&&i>0&&u.end==r.ch||!/\w/.test(u.string)))return a;var f=e.findPosH(a,i,"char");if(n(a,f))return r;r=f}}function g(e,t){var n=e.state.emacsPrefix;return n?(N(e),n=="-"?-1:Number(n)):t?null:1}function y(e){var t=typeof e=="string"?function(t){t.execCommand(e)}:e;return function(e){var n=g(e);t(e);for(var r=1;r<n;++r)t(e)}}function b(e,t,r){var i=e.getCursor(),s=g(e);s<0&&(r=-r,s=-s);for(var o=0;o<s;++o){var u=t(e,i,r);if(n(u,i))break;i=u}return i}function w(e,t){var n=function(n){n.extendSelection(b(n,e,t))};return n.motion=!0,n}function E(e,t,n){f(e,e.getCursor(),b(e,t,n),!0)}function S
(e,t){if(e.state.emacsPrefix){t!="-"&&(e.state.emacsPrefix+=t);return}e.state.emacsPrefix=t,e.on("keyHandled",T),e.on("inputRead",C)}function T(e,t){!e.state.emacsPrefixMap&&!x.hasOwnProperty(t)&&N(e)}function N(e){e.state.emacsPrefix=null,e.off("keyHandled",T),e.off("inputRead",C)}function C(e,t){var n=g(e);if(n>1&&t.origin=="+input"){var r=t.text.join("\n"),i="";for(var s=1;s<n;++s)i+=r;e.replaceSelection(i)}}function k(e){e.state.emacsPrefixMap=!0,e.addKeyMap(B),e.on("keyHandled",L),e.on("inputRead",L)}function L(e,t){if(!(typeof t!="string"||!/^\d$/.test(t)&&t!="Ctrl-U"))return;e.removeKeyMap(B),e.state.emacsPrefixMap=!1,e.off("keyHandled",L),e.off("inputRead",L)}function A(e){e.setCursor(e.getCursor()),e.setExtending(!e.getExtending()),e.on("change",function(){e.setExtending(!1)})}function O(e){e.setExtending(!1),e.setCursor(e.getCursor())}function M(e,t,n){e.openDialog?e.openDialog(t+': <input type="text" style="width: 10em"/>',n,{bottom:!0}):n(prompt(t,""))}function _(e,t){var n=
e.getCursor(),r=e.findPosH(n,1,"word");e.replaceRange(t(e.getRange(n,r)),n,r),e.setCursor(r)}function D(e){var n=e.getCursor(),r=n.line,i=n.ch,s=[];while(r>=e.firstLine()){var o=e.getLine(r);for(var u=i==null?o.length:i;u>0;){var i=o.charAt(--u);if(i==")")s.push("(");else if(i=="]")s.push("[");else if(i=="}")s.push("{");else if(/[\(\{\[]/.test(i)&&(!s.length||s.pop()!=i))return e.extendSelection(t(r,u))}--r,i=null}}function P(e){e.execCommand("clearSearch"),O(e)}function j(e){B[e]=function(t){S(t,e)},H["Ctrl-"+e]=function(t){S(t,e)},x["Ctrl-"+e]=!0}var t=e.Pos,r=[],a=null,x={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0},H=e.keyMap.emacs={"Ctrl-W":function(e){f(e,e.getCursor("start"),e.getCursor("end"))},"Ctrl-K":y(function(e){var n=e.getCursor(),r=e.clipPos(t(n.line)),i=e.getRange(n,r);/\S/.test(i)||(i+="\n",r=t(n.line+1,0)),f(e,n,r,!0,i)}),"Alt-W":function(e){i(e.getSelection()),O(e)},"Ctrl-Y":function(e){var t=e.getCursor();e.replaceRange(o(g(e)),t,t,"paste"),e.setSelection(t,e.getCursor
())},"Alt-Y":function(e){e.replaceSelection(u(),"around","paste")},"Ctrl-Space":A,"Ctrl-Shift-2":A,"Ctrl-F":w(l,1),"Ctrl-B":w(l,-1),Right:w(l,1),Left:w(l,-1),"Ctrl-D":function(e){E(e,l,1)},Delete:function(e){E(e,l,1)},"Ctrl-H":function(e){E(e,l,-1)},Backspace:function(e){E(e,l,-1)},"Alt-F":w(c,1),"Alt-B":w(c,-1),"Alt-D":function(e){E(e,c,1)},"Alt-Backspace":function(e){E(e,c,-1)},"Ctrl-N":w(h,1),"Ctrl-P":w(h,-1),Down:w(h,1),Up:w(h,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":w(p,-1),"Ctrl-V":w(p,1),PageUp:w(p,-1),PageDown:w(p,1),"Ctrl-Up":w(d,-1),"Ctrl-Down":w(d,1),"Alt-A":w(v,-1),"Alt-E":w(v,1),"Alt-K":function(e){E(e,v,1)},"Ctrl-Alt-K":function(e){E(e,m,1)},"Ctrl-Alt-Backspace":function(e){E(e,m,-1)},"Ctrl-Alt-F":w(m,1),"Ctrl-Alt-B":w(m,-1),"Shift-Ctrl-Alt-2":function(e){e.setSelection(b(e,m,1),e.getCursor())},"Ctrl-Alt-T":function(e){var t=m(e,e.getCursor(),-1),n=m(e,t,1),r=m(e,n,1),i=m(e,r,-1);e.replaceRange(e.getRange(i,r)+e.getRange(n,
i)+e.getRange(t,n),t,r)},"Ctrl-Alt-U":y(D),"Alt-Space":function(e){var n=e.getCursor(),r=n.ch,i=n.ch,s=e.getLine(n.line);while(r&&/\s/.test(s.charAt(r-1)))--r;while(i<s.length&&/\s/.test(s.charAt(i)))++i;e.replaceRange(" ",t(n.line,r),t(n.line,i))},"Ctrl-O":y(function(e){e.replaceSelection("\n","start")}),"Ctrl-T":y(function(e){e.execCommand("transposeChars")}),"Alt-C":y(function(e){_(e,function(e){var t=e.search(/\w/);return t==-1?e:e.slice(0,t)+e.charAt(t).toUpperCase()+e.slice(t+1).toLowerCase()})}),"Alt-U":y(function(e){_(e,function(e){return e.toUpperCase()})}),"Alt-L":y(function(e){_(e,function(e){return e.toLowerCase()})}),"Alt-;":"toggleComment","Ctrl-/":y("undo"),"Shift-Ctrl--":y("undo"),"Ctrl-Z":y("undo"),"Cmd-Z":y("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":P,"Shift-Alt-5":"replace","Alt-/":"autocomplete","Ctrl-J":"newlineAndIndent",Enter:!1,Tab:"indentAuto","Alt-G":function(e){e.setOption("keyMap","emacs-Alt-G"
)},"Ctrl-X":function(e){e.setOption("keyMap","emacs-Ctrl-X")},"Ctrl-Q":function(e){e.setOption("keyMap","emacs-Ctrl-Q")},"Ctrl-U":k};e.keyMap["emacs-Ctrl-X"]={Tab:function(e){e.indentSelection(g(e,!0)||e.getOption("indentUnit"))},"Ctrl-X":function(e){e.setSelection(e.getCursor("head"),e.getCursor("anchor"))},"Ctrl-S":"save","Ctrl-W":"save",S:"saveAll",F:"open",U:y("undo"),K:"close",Delete:function(e){f(e,e.getCursor(),v(e,e.getCursor(),1),!0)},auto:"emacs",nofallthrough:!0,disableInput:!0},e.keyMap["emacs-Alt-G"]={G:function(e){var t=g(e,!0);if(t!=null&&t>0)return e.setCursor(t-1);M(e,"Goto line",function(t){var n;t&&!isNaN(n=Number(t))&&n==n|0&&n>0&&e.setCursor(n-1)})},auto:"emacs",nofallthrough:!0,disableInput:!0},e.keyMap["emacs-Ctrl-Q"]={Tab:y("insertTab"),auto:"emacs",nofallthrough:!0};var B={"Ctrl-G":N};for(var F=0;F<10;++F)j(String(F));j("-")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define
("cm/addon/edit/matchbrackets",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function i(e,t,i,o){var u=e.getLineHandle(t.line),a=t.ch-1,f=a>=0&&r[u.text.charAt(a)]||r[u.text.charAt(++a)];if(!f)return null;var l=f.charAt(1)==">"?1:-1;if(i&&l>0!=(a==t.ch))return null;var c=e.getTokenTypeAt(n(t.line,a+1)),h=s(e,n(t.line,a+(l>0?1:0)),l,c||null,o);return h==null?null:{from:n(t.line,a),to:h&&h.pos,match:h&&h.ch==f.charAt(0),forward:l>0}}function s(e,t,i,s,o){var u=o&&o.maxScanLineLength||1e4,a=o&&o.maxScanLines||1e3,f=[],l=o&&o.bracketRegex?o.bracketRegex:/[(){}[\]]/,c=i>0?Math.min(t.line+a,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-a);for(var h=t.line;h!=c;h+=i){var p=e.getLine(h);if(!p)continue;var d=i>0?0:p.length-1,v=i>0?p.length:-1;if(p.length>u)continue;h==t.line&&(d=t.ch-(i<0?1:0));for(;d!=v;d+=i){var m=p.charAt(d);if(l.test(m)&&(s===undefined||e.getTokenTypeAt(n(h,d+1))==s)){var g=r[m];if(g.charAt(1)==">"==i>0)f.push(m);else{if(!f.length)return{pos:n(h,d),ch:m};f.pop()}}
}}return h-i==(i>0?e.lastLine():e.firstLine())?!1:null}function o(e,r,s){var o=e.state.matchBrackets.maxHighlightLineLength||1e3,u=[],a=e.listSelections();for(var f=0;f<a.length;f++){var l=a[f].empty()&&i(e,a[f].head,!1,s);if(l&&e.getLine(l.from.line).length<=o){var c=l.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(e.markText(l.from,n(l.from.line,l.from.ch+1),{className:c})),l.to&&e.getLine(l.to.line).length<=o&&u.push(e.markText(l.to,n(l.to.line,l.to.ch+1),{className:c}))}}if(u.length){t&&e.state.focused&&e.display.input.focus();var h=function(){e.operation(function(){for(var e=0;e<u.length;e++)u[e].clear()})};if(!r)return h;setTimeout(h,800)}}function a(e){e.operation(function(){u&&(u(),u=null),u=o(e,!1,e.state.matchBrackets)})}var t=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8),n=e.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},u=null;e.defineOption("matchBrackets",!1,function(t,n,r){r&&r!=e.Init&&
t.off("cursorActivity",a),n&&(t.state.matchBrackets=typeof n=="object"?n:{},t.on("cursorActivity",a))}),e.defineExtension("matchBrackets",function(){o(this,!0)}),e.defineExtension("findMatchingBracket",function(e,t,n){return i(this,e,t,n)}),e.defineExtension("scanForBracket",function(e,t,n,r){return s(this,e,t,n,r)})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):typeof define=="function"&&define.amd?define("cm/keymap/sublime",["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],e):e(CodeMirror)}(function(e){function o(t,n,i){if(i<0&&n.ch==0)return t.clipPos(r(n.line-1));var s=t.getLine(n.line);if(i>0&&n.ch>=s.length)return t.clipPos(r(n.line+1,0));var o="start",u;for(var a=n.ch,f=i<0?0:s.length,l=0;a!=f;a+=i,l++){var c=s.charAt(i<0?a-1:a),h=c!="_"&&e.isWordChar(c)?"w":"o";h=="w"&&c.toUpperCase()==c&&(h="W");if(o=="start")h!="o"&&(
o="in",u=h);else if(o=="in"&&u!=h){u=="w"&&h=="W"&&i<0&&a--;if(u=="W"&&h=="w"&&i>0){u="w";continue}break}}return r(n.line,a)}function u(e,t){e.extendSelectionsBy(function(n){return e.display.shift||e.doc.extend||n.empty()?o(e.doc,n.head,t):t<0?n.from():n.to()})}function a(e,t){e.operation(function(){var n=e.listSelections().length,i=[],s=-1;for(var o=0;o<n;o++){var u=e.listSelections()[o].head;if(u.line<=s)continue;var a=r(u.line+(t?0:1),0);e.replaceRange("\n",a,null,"+insertLine"),e.indentLine(a.line,null,!0),i.push({head:a,anchor:a}),s=u.line+1}e.setSelections(i)})}function f(t,n){var i=n.ch,s=i,o=t.getLine(n.line);while(i&&e.isWordChar(o.charAt(i-1)))--i;while(s<o.length&&e.isWordChar(o.charAt(s)))++s;return{from:r(n.line,i),to:r(n.line,s),word:o.slice(i,s)}}function c(e){var t=e.getCursor(),n=e.scanForBracket(t,-1);if(!n)return;for(;;){var i=e.scanForBracket(t,1);if(!i)return;if(i.ch==l.charAt(l.indexOf(n.ch)+1))return e.setSelection(r(n.pos.line,n.pos.ch+1),i.pos,!1),!0;t=r(i.pos.line
,i.pos.ch+1)}}function p(e,t){var n=e.listSelections(),i=[],s;for(var o=0;o<n.length;o++){var u=n[o];if(u.empty())continue;var a=u.from().line,f=u.to().line;while(o<n.length-1&&n[o+1].from().line==f)f=u[++o].to().line;i.push(a,f)}i.length?s=!0:i.push(e.firstLine(),e.lastLine()),e.operation(function(){var n=[];for(var o=0;o<i.length;o+=2){var u=i[o],a=i[o+1],f=r(u,0),l=r(a),c=e.getRange(f,l,!1);t?c.sort():c.sort(function(e,t){var n=e.toUpperCase(),r=t.toUpperCase();return n!=r&&(e=n,t=r),e<t?-1:e==t?0:1}),e.replaceRange(c,f,l),s&&n.push({anchor:f,head:l})}s&&e.setSelections(n,0)})}function v(t,n){t.operation(function(){var r=t.listSelections(),i=[],s=[];for(var o=0;o<r.length;o++){var u=r[o];u.empty()?(i.push(o),s.push("")):s.push(n(t.getRange(u.from(),u.to())))}t.replaceSelections(s,"around","case");for(var o=i.length-1,a;o>=0;o--){var u=r[i[o]];if(a&&e.cmpPos(u.head,a)>0)continue;var l=f(t,u.head);a=l.from,t.replaceRange(n(l.word),l.from,l.to)}})}function m(t){var n=t.getCursor("from")
,r=t.getCursor("to");if(e.cmpPos(n,r)==0){var i=f(t,n);if(!i.word)return;n=i.from,r=i.to}return{from:n,to:r,query:t.getRange(n,r),word:i}}function g(e,t){var n=m(e);if(!n)return;var i=n.query,s=e.getSearchCursor(i,t?n.to:n.from);(t?s.findNext():s.findPrevious())?e.setSelection(s.from(),s.to()):(s=e.getSearchCursor(i,t?r(e.firstLine(),0):e.clipPos(r(e.lastLine()))),(t?s.findNext():s.findPrevious())?e.setSelection(s.from(),s.to()):n.word&&e.setSelection(n.from,n.to))}var t=e.keyMap.sublime={fallthrough:"default"},n=e.commands,r=e.Pos,i=e.keyMap["default"]==e.keyMap.macDefault,s=i?"Cmd-":"Ctrl-";n[t["Alt-Left"]="goSubwordLeft"]=function(e){u(e,-1)},n[t["Alt-Right"]="goSubwordRight"]=function(e){u(e,1)},n[t[s+"Up"]="scrollLineUp"]=function(e){var t=e.getScrollInfo();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top+t.clientHeight,"local");e.getCursor().line>=n&&e.execCommand("goLineUp")}e.scrollTo(null,t.top-e.defaultTextHeight())},n[t[s+"Down"]="scrollLineDown"]=function(e){var t=e.getScrollInfo
();if(!e.somethingSelected()){var n=e.lineAtHeight(t.top,"local")+1;e.getCursor().line<=n&&e.execCommand("goLineDown")}e.scrollTo(null,t.top+e.defaultTextHeight())},n[t["Shift-"+s+"L"]="splitSelectionByLine"]=function(e){var t=e.listSelections(),n=[];for(var i=0;i<t.length;i++){var s=t[i].from(),o=t[i].to();for(var u=s.line;u<=o.line;++u)o.line>s.line&&u==o.line&&o.ch==0||n.push({anchor:u==s.line?s:r(u,0),head:u==o.line?o:r(u)})}e.setSelections(n,0)},t["Shift-Tab"]="indentLess",n[t.Esc="singleSelectionTop"]=function(e){var t=e.listSelections()[0];e.setSelection(t.anchor,t.head,{scroll:!1})},n[t[s+"L"]="selectLine"]=function(e){var t=e.listSelections(),n=[];for(var i=0;i<t.length;i++){var s=t[i];n.push({anchor:r(s.from().line,0),head:r(s.to().line+1,0)})}e.setSelections(n)},t["Shift-"+s+"K"]="deleteLine",n[t[s+"Enter"]="insertLineAfter"]=function(e){a(e,!1)},n[t["Shift-"+s+"Enter"]="insertLineBefore"]=function(e){a(e,!0)},n[t[s+"D"]="selectNextOccurrence"]=function(t){var n=t.getCursor("from"
),i=t.getCursor("to"),s=t.state.sublimeFindFullWord==t.doc.sel;if(e.cmpPos(n,i)==0){var o=f(t,n);if(!o.word)return;t.setSelection(o.from,o.to),s=!0}else{var u=t.getRange(n,i),a=s?new RegExp("\\b"+u+"\\b"):u,l=t.getSearchCursor(a,i);l.findNext()?t.addSelection(l.from(),l.to()):(l=t.getSearchCursor(a,r(t.firstLine(),0)),l.findNext()&&t.addSelection(l.from(),l.to()))}s&&(t.state.sublimeFindFullWord=t.doc.sel)};var l="(){}[]";n[t["Shift-"+s+"Space"]="selectScope"]=function(e){c(e)||e.execCommand("selectAll")},n[t["Shift-"+s+"M"]="selectBetweenBrackets"]=function(t){if(!c(t))return e.Pass},n[t[s+"M"]="goToBracket"]=function(t){t.extendSelectionsBy(function(n){var i=t.scanForBracket(n.head,1);if(i&&e.cmpPos(i.pos,n.head)!=0)return i.pos;var s=t.scanForBracket(n.head,-1);return s&&r(s.pos.line,s.pos.ch+1)||n.head})};var h=i?"Cmd-Ctrl-":"Shift-Ctrl-";n[t[h+"Up"]="swapLineUp"]=function(e){var t=e.listSelections(),n=[],i=e.firstLine()-1,s=[];for(var o=0;o<t.length;o++){var u=t[o],a=u.from().line-1
,f=u.to().line;s.push({anchor:r(u.anchor.line-1,u.anchor.ch),head:r(u.head.line-1,u.head.ch)}),u.to().ch==0&&!u.empty()&&--f,a>i?n.push(a,f):n.length&&(n[n.length-1]=f),i=f}e.operation(function(){for(var t=0;t<n.length;t+=2){var i=n[t],o=n[t+1],u=e.getLine(i);e.replaceRange("",r(i,0),r(i+1,0),"+swapLine"),o>e.lastLine()?e.replaceRange("\n"+u,r(e.lastLine()),null,"+swapLine"):e.replaceRange(u+"\n",r(o,0),null,"+swapLine")}e.setSelections(s),e.scrollIntoView()})},n[t[h+"Down"]="swapLineDown"]=function(e){var t=e.listSelections(),n=[],i=e.lastLine()+1;for(var s=t.length-1;s>=0;s--){var o=t[s],u=o.to().line+1,a=o.from().line;o.to().ch==0&&!o.empty()&&u--,u<i?n.push(u,a):n.length&&(n[n.length-1]=a),i=a}e.operation(function(){for(var t=n.length-2;t>=0;t-=2){var i=n[t],s=n[t+1],o=e.getLine(i);i==e.lastLine()?e.replaceRange("",r(i-1),r(i),"+swapLine"):e.replaceRange("",r(i,0),r(i+1,0),"+swapLine"),e.replaceRange(o+"\n",r(s,0),null,"+swapLine")}e.scrollIntoView()})},t[s+"/"]="toggleComment",n[t[
s+"J"]="joinLines"]=function(e){var t=e.listSelections(),n=[];for(var i=0;i<t.length;i++){var s=t[i],o=s.from(),u=o.line,a=s.to().line;while(i<t.length-1&&t[i+1].from().line==a)a=t[++i].to().line;n.push({start:u,end:a,anchor:!s.empty()&&o})}e.operation(function(){var t=0,i=[];for(var s=0;s<n.length;s++){var o=n[s],u=o.anchor&&r(o.anchor.line-t,o.anchor.ch),a;for(var f=o.start;f<=o.end;f++){var l=f-t;f==o.end&&(a=r(l,e.getLine(l).length+1)),l<e.lastLine()&&(e.replaceRange(" ",r(l),r(l+1,/^\s*/.exec(e.getLine(l+1))[0].length)),++t)}i.push({anchor:u||a,head:a})}e.setSelections(i,0)})},n[t["Shift-"+s+"D"]="duplicateLine"]=function(e){e.operation(function(){var t=e.listSelections().length;for(var n=0;n<t;n++){var i=e.listSelections()[n];i.empty()?e.replaceRange(e.getLine(i.head.line)+"\n",r(i.head.line,0)):e.replaceRange(e.getRange(i.from(),i.to()),i.from())}e.scrollIntoView()})},t[s+"T"]="transposeChars",n[t.F9="sortLines"]=function(e){p(e,!0)},n[t[s+"F9"]="sortLinesInsensitive"]=function(e
){p(e,!1)},n[t.F2="nextBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)while(t.length){var n=t.shift(),r=n.find();if(r)return t.push(n),e.setSelection(r.from,r.to)}},n[t["Shift-F2"]="prevBookmark"]=function(e){var t=e.state.sublimeBookmarks;if(t)while(t.length){t.unshift(t.pop());var n=t[t.length-1].find();if(!!n)return e.setSelection(n.from,n.to);t.pop()}},n[t[s+"F2"]="toggleBookmark"]=function(e){var t=e.listSelections(),n=e.state.sublimeBookmarks||(e.state.sublimeBookmarks=[]);for(var r=0;r<t.length;r++){var i=t[r].from(),s=t[r].to(),o=e.findMarks(i,s);for(var u=0;u<o.length;u++)if(o[u].sublimeBookmark){o[u].clear();for(var a=0;a<n.length;a++)n[a]==o[u]&&n.splice(a--,1);break}u==o.length&&n.push(e.markText(i,s,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},n[t["Shift-"+s+"F2"]="clearBookmarks"]=function(e){var t=e.state.sublimeBookmarks;if(t)for(var n=0;n<t.length;n++)t[n].clear();t.length=0},n[t["Alt-F2"]="selectBookmarks"]=function(e){var t=e.state.sublimeBookmarks,n=[];if(t
)for(var r=0;r<t.length;r++){var i=t[r].find();i?n.push({anchor:i.from,head:i.to}):t.splice(r--,0)}n.length&&e.setSelections(n,0)},t["Alt-Q"]="wrapLines";var d=e.keyMap["sublime-Ctrl-K"]={auto:"sublime",nofallthrough:!0};t[s+"K"]=function(e){e.setOption("keyMap","sublime-Ctrl-K")},d[s+"Backspace"]="delLineLeft",n[d[s+"K"]="delLineRight"]=function(e){e.operation(function(){var t=e.listSelections();for(var n=t.length-1;n>=0;n--)e.replaceRange("",t[n].anchor,r(t[n].to().line),"+delete");e.scrollIntoView()})},n[d[s+"U"]="upcaseAtCursor"]=function(e){v(e,function(e){return e.toUpperCase()})},n[d[s+"L"]="downcaseAtCursor"]=function(e){v(e,function(e){return e.toLowerCase()})},n[d[s+"Space"]="setSublimeMark"]=function(e){e.state.sublimeMark&&e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor())},n[d[s+"A"]="selectToSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&e.setSelection(e.getCursor(),t)},n[d[s+"W"]="deleteToSublimeMark"]=function(
t){var n=t.state.sublimeMark&&t.state.sublimeMark.find();if(n){var r=t.getCursor(),i=n;if(e.cmpPos(r,i)>0){var s=i;i=r,r=s}t.state.sublimeKilled=t.getRange(r,i),t.replaceRange("",r,i)}},n[d[s+"X"]="swapWithSublimeMark"]=function(e){var t=e.state.sublimeMark&&e.state.sublimeMark.find();t&&(e.state.sublimeMark.clear(),e.state.sublimeMark=e.setBookmark(e.getCursor()),e.setCursor(t))},n[d[s+"Y"]="sublimeYank"]=function(e){e.state.sublimeKilled!=null&&e.replaceSelection(e.state.sublimeKilled,null,"paste")},d[s+"G"]="clearBookmarks",n[d[s+"C"]="showInCenter"]=function(e){var t=e.cursorCoords(null,"local");e.scrollTo(null,(t.top+t.bottom)/2-e.getScrollInfo().clientHeight/2)},n[t["Shift-Alt-Up"]="selectLinesUpward"]=function(e){e.operation(function(){var t=e.listSelections();for(var n=0;n<t.length;n++){var i=t[n];i.head.line>e.firstLine()&&e.addSelection(r(i.head.line-1,i.head.ch))}})},n[t["Shift-Alt-Down"]="selectLinesDownward"]=function(e){e.operation(function(){var t=e.listSelections();for(var n=0
;n<t.length;n++){var i=t[n];i.head.line<e.lastLine()&&e.addSelection(r(i.head.line+1,i.head.ch))}})},n[t[s+"F3"]="findUnder"]=function(e){g(e,!0)},n[t["Shift-"+s+"F3"]="findUnderPrevious"]=function(e){g(e,!1)},n[t["Alt-F3"]="findAllUnder"]=function(e){var t=m(e);if(!t)return;var n=e.getSearchCursor(t.query),r=[],i=-1;while(n.findNext())r.push({anchor:n.from(),head:n.to()}),n.from().line<=t.from.line&&n.from().ch<=t.from.ch&&i++;e.setSelections(r,i)},t["Shift-"+s+"["]="fold",t["Shift-"+s+"]"]="unfold",d[s+"0"]=d[s+"j"]="unfoldAll",t[s+"I"]="findIncremental",t["Shift-"+s+"I"]="findIncrementalReverse",t[s+"H"]="replace",t.F3="findNext",t["Shift-F3"]="findPrev"}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/dialog/dialog"),require("../addon/edit/matchbrackets.js")):typeof define=="function"&&define.amd?define("cm/keymap/vim",["../lib/codemirror","../addon/search/searchcursor","../addon/dialog/dialog"
,"../addon/edit/matchbrackets"],e):e(CodeMirror)}(function(e){var t=[{keys:["<Left>"],type:"keyToKey",toKeys:["h"]},{keys:["<Right>"],type:"keyToKey",toKeys:["l"]},{keys:["<Up>"],type:"keyToKey",toKeys:["k"]},{keys:["<Down>"],type:"keyToKey",toKeys:["j"]},{keys:["<Space>"],type:"keyToKey",toKeys:["l"]},{keys:["<BS>"],type:"keyToKey",toKeys:["h"]},{keys:["<C-Space>"],type:"keyToKey",toKeys:["W"]},{keys:["<C-BS>"],type:"keyToKey",toKeys:["B"]},{keys:["<S-Space>"],type:"keyToKey",toKeys:["w"]},{keys:["<S-BS>"],type:"keyToKey",toKeys:["b"]},{keys:["<C-n>"],type:"keyToKey",toKeys:["j"]},{keys:["<C-p>"],type:"keyToKey",toKeys:["k"]},{keys:["<C-[>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["<C-c>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"],context:"normal"},{keys:["s"],type:"keyToKey",toKeys:["x","i"],context:"visual"},{keys:["S"],type:"keyToKey",toKeys:["c","c"],context:"normal"},{keys:["S"],type:"keyToKey",toKeys:["d","c","c"],context:"visual"},{keys:["<Home>"
],type:"keyToKey",toKeys:["0"]},{keys:["<End>"],type:"keyToKey",toKeys:["$"]},{keys:["<PageUp>"],type:"keyToKey",toKeys:["<C-b>"]},{keys:["<PageDown>"],type:"keyToKey",toKeys:["<C-f>"]},{keys:["<CR>"],type:"keyToKey",toKeys:["j","^"],context:"normal"},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward
:!1}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:["<C-f>"],type:"motion",motion:"moveByPage"
,motionArgs:{forward:!0}},{keys:["<C-b>"],type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:["<C-d>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:["<C-u>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol"
,motionArgs:{inclusive:!0}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward
:!1}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:["]","p"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:["[","p"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["o"],type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{},context:"visual"},{keys:["O"],type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change"},{keys:[">"],type:"operator"
,operator:"indent",operatorArgs:{indentRight:!0}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["C"],type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs
:{visualLine:!0}},{keys:["~"],type:"operatorMotion",operator:"swapcase",operatorArgs:{shouldMoveCursor:!0},motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["<C-i>"],type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:["<C-o>"],type:"action",action:"jumpListWalk",actionArgs:{forward:!1}},{keys:["<C-e>"],type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:["<C-y>"],type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:["a"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},context:"visual"},{keys:["i"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"}},{keys:["I"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"}},{keys:["o"],type:"action"
,action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:["<C-v>"],type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:["g","v"],type:"action",action:"reselectLastSelection"},{keys:["J"],type:"action",action:"joinLines",isEdit:!0},{keys:["p"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:["P"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:["r","character"],type:"action",action:"replace",isEdit:!0},{keys:["@","character"],type:"action",action:"replayMacro"},{keys:["q","character"],type:"action",action:"enterMacroRecordMode"},{keys:["R"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0}},{keys:["u"
],type:"action",action:"undo"},{keys:["u"],type:"action",action:"changeCase",actionArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:["U"],type:"action",action:"changeCase",actionArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:["<C-r>"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","<CR>"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"
},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["<C-a>"],type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:["<C-x>"],type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:["/"],type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:["?"],type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:["*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:["#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:["g","*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:["g","#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor"
,toJumplist:!0}},{keys:[":"],type:"ex"}],n=e.Pos,r=function(){function i(e){var t=e.state.vim;return t.onPasteFn||(t.onPasteFn=function(){t.insertMode||(e.setCursor(X(e.getCursor(),0,1)),U.enterInsertMode(e,{},t))}),t.onPasteFn}function a(e,t){var n=[];for(var r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}function m(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function g(e){return/^[a-z]$/.test(e)}function y(e){return"()[]{}".indexOf(e)!=-1}function b(e){return s.test(e)}function w(e){return/^[A-Z]$/.test(e)}function E(e){return/^\s*$/.test(e)}function S(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function T(e,t,n){if(t===undefined)throw Error("defaultValue is required");n||(n="string"),x[e]={type:n,defaultValue:t},N(e,t)}function N(e,t){var n=x[e];if(!n)throw Error("Unknown option: "+e);if(n.type=="boolean"){if(t&&t!==!0)throw Error("Invalid argument: "+e+"="+t);t!==!1&&(t=!0)}n.value=n.type=="boolean"?!!t:t}function C(e){var t=x[e];if(!t)throw Error("Unknown option: "+
e);return t.value}function A(){this.latestRegister=undefined,this.isPlaying=!1,this.isRecording=!1,this.replaySearchQueries=[],this.onRecordingDone=undefined,this.lastInsertModeChanges=L()}function O(e){return e.state.vim||(e.state.vim={inputState:new P,lastEditInputState:undefined,lastEditActionCommand:undefined,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:undefined,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,awaitingEscapeSecondCharacter:!1}),e.state.vim}function _(){M={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:undefined,jumpList:k(),macroModeState:new A,lastChararacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new j({}),searchHistoryController:new F({}),exCommandHistoryController:new F({})};for(var e in x){var t=x[e];t.value=t.defaultValue}}function P(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=
null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function H(t,n){t.state.vim.inputState=new P,e.signal(t,"vim-command-done",n)}function B(e,t,n){this.clear(),this.keyBuffer=[e||""],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!!t,this.blockwise=!!n}function j(e){this.registers=e,this.unnamedRegister=e['"']=new B,e["."]=new B,e[":"]=new B,e["/"]=new B}function F(){this.historyBuffer=[],this.iterator,this.initialPrefix=null}function z(e,t,r){var i=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),s=Y(e,i)-1;s=r?s+1:s;var o=Math.min(Math.max(0,t.ch),s);return n(i,o)}function W(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function X(e,t,r){return n(e.line+t,e.ch+r)}function V(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&t[n]!="character")return!1;return!0}function $(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function J(e){return n(e.line,e.ch)}function K(e,t){return e.ch==t.ch&&e.line==t.line}function Q(e,t){return e.line<
t.line?!0:e.line==t.line&&e.ch<t.ch?!0:!1}function G(e,t,n){var r=Q(e,t),i=Q(t,n);return r&&i}function Y(e,t){return e.getLine(t).length}function Z(e){return e.split("").reverse().join("")}function et(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function tt(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function nt(e,t,r){var i=Y(e,t),s=(new Array(r-i+1)).join(" ");e.setCursor(n(t,i)),e.replaceRange(s,e.getCursor())}function rt(e,t){var n=[],r=e.listSelections(),i=r[0].anchor,s=r[r.length-1].anchor,o,u,a,f,l=e.getCursor("head"),c=J(t);o=i.line,u=s.line,t.line<l.line?a="up":t.line>l.line?a="down":(t.ch!=l.ch&&(a=t.ch>l.ch?"right":"left"),f=e.getCursor("anchor"));var h=it(r,l);t=e.clipPos(t);var p=it(r,t)<0?!1:!0,d=!K(c,t),v=function(){if(d)l.ch>=f.ch&&f.ch++;else if(l.ch==Y(e,l.line)&&K(r[h].anchor,r[h].head)&&r.length>1){if(a=="up"){if(p||h>0)o=i.line,u=t.line,f=r[h-1].anchor}else if(p||h==0)u=s.line,o=t.line,f=r[h+1].anchor;t.ch>=f.ch&&f.ch--}};switch(a){case"up":o=p?i
.line:t.line,u=p?t.line:s.line,f=s,v();break;case"down":o=p?t.line:i.line,u=p?s.line:t.line,f=i,v();break;case"left":t.ch<=f.ch&&l.ch>f.ch&&(f.ch++,t.ch--);break;case"right":f.ch<=t.ch&&l.ch<f.ch&&(f.ch--,t.ch++);break;default:o=f.line,u=t.line}while(o<=u){var m={line:o,ch:f.ch},g={line:o,ch:t.ch},y={anchor:m,head:g};n.push(y),K(g,t)&&(h=n.indexOf(y)),o++}return t.ch=n[0].head.ch,f.ch=n[0].anchor.ch,K(t,n[0].head)?f.line=n[n.length-1].anchor.line:f.line=n[0].anchor.line,e.setSelections(n,h),f}function it(e,t,n){var r=-1;for(var i=0;i<e.length;i++){var s=K(e[i].anchor,t),o=K(e[i].head,t);n=="head"?r=o?i:r:n=="anchor"?r=s?i:r:r=s||o?i:r}return r}function st(e,t){var r=t.lastSelection,i=function(){var t=e.listSelections(),n=t[0],r=t[t.length-1],i=Q(n.anchor,n.head)?n.anchor:n.head,s=Q(r.anchor,r.head)?r.head:r.anchor;return[i,s]},s=function(){var t=e.getCursor(),i=e.getCursor(),s=r.visualBlock;if(s){var o=s.width,u=s.height;i=n(t.line+u,t.ch+o);var a=[];for(var f=t.line;f<i.line;f++){var l=
n(f,t.ch),c=n(f,i.ch),h={anchor:l,head:c};a.push(h)}e.setSelections(a)}else{var p=r.curStartMark.find(),d=r.curEndMark.find(),v=d.line-p.line,m=d.ch-p.ch;i={line:i.line+v,ch:v?i.ch:m+i.ch},r.visualLine&&(t=n(t.line,0),i=n(i.line,Y(e,i.line))),e.setSelection(t,i)}return[t,i]};return t.visualMode?i():s()}function ot(e,t,n,r){if(!n||!r)n=t.marks["<"].find()||e.getCursor("anchor"),r=t.marks[">"].find()||e.getCursor("head");t.lastPastedText&&(r=e.posFromIndex(e.indexFromPos(n)+t.lastPastedText.length),t.lastPastedText=null);var i=e.listSelections(),s=it(i,n,"head")>-1;if(t.visualBlock)var o=Math.abs(n.line-r.line)+1,u=Math.abs(n.ch-r.ch),a={height:o,width:u};t.lastSelection={curStartMark:e.setBookmark(s?r:n),curEndMark:e.setBookmark(s?n:r),visualMode:t.visualMode,visualLine:t.visualLine,visualBlock:a}}function ut(t){t.off("mousedown",ut);var n=t.state.vim,r=t.getCursor("anchor"),i=t.getCursor("head");n.visualBlock&&Q(r,i)&&i.ch--,ot(t,n),n.visualMode=!1,n.visualLine=!1,n.visualBlock=!1,K(r,i
)||t.setCursor(z(t,i)),e.signal(t,"vim-mode-change",{mode:"normal"}),n.fakeCursor&&n.fakeCursor.clear()}function at(e,t,n){var r=e.getRange(t,n);if(/\n\s*$/.test(r)){var i=r.split("\n");i.pop();var s;for(var s=i.pop();i.length>0&&s&&E(s);s=i.pop())n.line--,n.ch=0;s?(n.line--,n.ch=Y(e,n.line)):n.ch=0}}function ft(e,t,n){t.ch=0,n.ch=0,n.line++}function lt(e){if(!e)return 0;var t=e.search(/\S/);return t==-1?e.length:t}function ct(e,t,r,i,s){var o=e.getCursor(),u=e.getLine(o.line),a=o.ch,f=u.substring(a),l;s?l=f.search(/\w/):l=f.search(/\S/);if(l==-1)return null;a+=l,f=u.substring(a);var c=u.substring(0,a),h;i?h=/^\S+/:/\w/.test(u.charAt(a))?h=/^\w+/:h=/^[^\w\s]+/;var p=h.exec(f),d=a,v=a+p[0].length,m=Z(c),g=h.exec(m);g&&(d-=g[0].length);if(t){var y=u.substring(v),b=y.match(/^\s*/)[0].length;if(b>0)v+=b;else{var w=m.length-d,E=m.substring(w),S=E.match(/^\s*/)[0].length;d-=S}}return{start:n(o.line,d),end:n(o.line,v)}}function ht(e,t,n){K(t,n)||M.jumpList.add(e,t,n)}function pt(e,t){M.lastChararacterSearch
.increment=e,M.lastChararacterSearch.forward=t.forward,M.lastChararacterSearch.selectedCharacter=t.selectedCharacter}function mt(e,t,r,i){var s=J(e.getCursor()),o=r?1:-1,u=r?e.lineCount():-1,a=s.ch,f=s.line,l=e.getLine(f),c={lineText:l,nextCh:l.charAt(a),lastCh:null,index:a,symb:i,reverseSymb:(r?{")":"(","}":"{"}:{"(":")","{":"}"})[i],forward:r,depth:0,curMoveThrough:!1},h=dt[i];if(!h)return s;var p=vt[h].init,d=vt[h].isComplete;p&&p(c);while(f!==u&&t){c.index+=o,c.nextCh=c.lineText.charAt(c.index);if(!c.nextCh){f+=o,c.lineText=e.getLine(f)||"";if(o>0)c.index=0;else{var v=c.lineText.length;c.index=v>0?v-1:0}c.nextCh=c.lineText.charAt(c.index)}d(c)&&(s.line=f,s.ch=c.index,t--)}return c.nextCh||c.curMoveThrough?n(f,c.index):s}function gt(e,t,n,r,i){var s=t.line,a=t.ch,f=e.getLine(s),l=n?1:-1,c=r?u:o;if(i&&f==""){s+=l,f=e.getLine(s);if(!m(e,s))return null;a=n?0:f.length}for(;;){if(i&&f=="")return{from:0,to:0,line:s};var h=l>0?f.length:-1,p=h,d=h;while(a!=h){var v=!1;for(var g=0;g<c.length&&!
v;++g)if(c[g].test(f.charAt(a))){p=a;while(a!=h&&c[g].test(f.charAt(a)))a+=l;d=a,v=p!=d;if(p==t.ch&&s==t.line&&d==p+l)continue;return{from:Math.min(p,d+1),to:Math.max(p,d),line:s}}v||(a+=l)}s+=l;if(!m(e,s))return null;f=e.getLine(s),a=l>0?0:f.length}throw new Error("The impossible happened.")}function yt(e,t,r,i,s){var o=e.getCursor(),u=J(o),a=[];(r&&!i||!r&&i)&&t++;var f=!r||!i;for(var l=0;l<t;l++){var c=gt(e,o,r,s,f);if(!c){var h=Y(e,e.lastLine());a.push(r?{line:e.lastLine(),from:h,to:h}:{line:0,from:0,to:0});break}a.push(c),o=n(c.line,r?c.to-1:c.from)}var p=a.length!=t,d=a[0],v=a.pop();return r&&!i?(!p&&(d.from!=u.ch||d.line!=u.line)&&(v=a.pop()),n(v.line,v.from)):r&&i?n(v.line,v.to-1):!r&&i?(!p&&(d.to!=u.ch||d.line!=u.line)&&(v=a.pop()),n(v.line,v.to)):n(v.line,v.from)}function bt(e,t,r,i){var s=e.getCursor(),o=s.ch,u;for(var a=0;a<t;a++){var f=e.getLine(s.line);u=St(o,f,i,r,!0);if(u==-1)return null;o=u}return n(e.getCursor().line,u)}function wt(e,t){var r=e.getCursor().line;return z
(e,n(r,t-1))}function Et(e,t,n,r){if(!S(n,d))return;t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r)}function St(e,t,n,r,i){var s;return r?(s=t.indexOf(n,e+1),s!=-1&&!i&&(s-=1)):(s=t.lastIndexOf(n,e-1),s!=-1&&!i&&(s+=1)),s}function xt(e,t,r){var i=e.getCursor(),s,o,u={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/}[t],a={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{"}[t],f=e.getLine(i.line).charAt(i.ch),l=f===a?1:0;s=e.scanForBracket(n(i.line,i.ch+l),-1,null,{bracketRegex:u}),o=e.scanForBracket(n(i.line,i.ch+l),1,null,{bracketRegex:u});if(!s||!o)return{start:i,end:i};s=s.pos,o=o.pos;if(s.line==o.line&&s.ch>o.ch||s.line>o.line){var c=s;s=o,o=c}return r?o.ch+=1:s.ch+=1,{start:s,end:o}}function Tt(e,t,r){var i=J(e.getCursor()),s=e.getLine(i.line),o=s.split(""),u,a,f,l,c=o.indexOf(t);i.ch<c?i.ch=c:c<i.ch&&o[i.ch]==t&&(a=i.ch,--i.ch);if(o[i.ch]==t&&!a)u=i.ch+1;else for(f=i.ch;f>-1&&!u;f--)o[f]==t&&(u=f+1);if(u&&!a)for(f=u,l=o.length;f<l&&!a;f++)o[f]==t&&(a=f);
return!u||!a?{start:i,end:i}:(r&&(--u,++a),{start:n(i.line,u),end:n(i.line,a)})}function Nt(){}function Ct(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new Nt)}function kt(e,t,n,r,i){e.openDialog?e.openDialog(t,r,{bottom:!0,value:i.value,onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp}):r(prompt(n,""))}function Lt(e){var t=At(e)||[];if(!t.length)return[];var n=[];if(t[0]!==0)return;for(var r=0;r<t.length;r++)typeof t[r]=="number"&&n.push(e.substring(t[r]+1,t[r+1]));return n}function At(e){var t=!1,n=[];for(var r=0;r<e.length;r++){var i=e.charAt(r);!t&&i=="/"&&n.push(r),t=!t&&i=="\\"}return n}function Ot(e){var t="|(){",n="}",r=!1,i=[];for(var s=-1;s<e.length;s++){var o=e.charAt(s)||"",u=e.charAt(s+1)||"",a=u&&t.indexOf(u)!=-1;r?((o!=="\\"||!a)&&i.push(o),r=!1):o==="\\"?(r=!0,u&&n.indexOf(u)!=-1&&(a=!0),(!a||u==="\\")&&i.push(o)):(i.push(o),a&&u!=="\\"&&i.push("\\"))}return i.join("")}function Mt(e){var t=!1,n=[];for(var r=-1;r<e.length;r++){var i=e.charAt(r)||"",s=e.charAt(r+1)||""
;t?(n.push(i),t=!1):i==="\\"?(t=!0,b(s)||s==="$"?n.push("$"):s!=="/"&&s!=="\\"&&n.push("\\")):(i==="$"&&n.push("$"),n.push(i),s==="/"&&n.push("\\"))}return n.join("")}function _t(t){var n=new e.StringStream(t),r=[];while(!n.eol()){while(n.peek()&&n.peek()!="\\")r.push(n.next());n.match("\\/",!0)?r.push("/"):n.match("\\\\",!0)?r.push("\\"):r.push(n.next())}return r.join("")}function Dt(e,t,n){var r=M.registerController.getRegister("/");r.setText(e);if(e instanceof RegExp)return e;var i=At(e),s,o;if(!i.length)s=e;else{s=e.substring(0,i[0]);var u=e.substring(i[0]);o=u.indexOf("i")!=-1}if(!s)return null;C("pcre")||(s=Ot(s)),n&&(t=/^[^A-Z]*$/.test(s));var a=new RegExp(s,t||o?"i":undefined);return a}function Pt(e,t){e.openNotification?e.openNotification('<span style="color: red">'+t+"</span>",{bottom:!0,duration:5e3}):alert(t)}function Ht(e,t){var n="";return e&&(n+='<span style="font-family: monospace">'+e+"</span>"),n+='<input type="text"/> <span style="color: #888">',t&&(n+='<span style="color: #888">'
,n+=t,n+="</span>"),n}function jt(e,t){var n=(t.prefix||"")+" "+(t.desc||""),r=Ht(t.prefix,t.desc);kt(e,r,n,t.onClose,t)}function Ft(e,t){if(e instanceof RegExp&&t instanceof RegExp){var n=["global","multiline","ignoreCase","source"];for(var r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}return!1}function It(e,t,n,r){if(!t)return;var i=Ct(e),s=Dt(t,!!n,!!r);if(!s)return;return Rt(e,s),Ft(s,i.getQuery())?s:(i.setQuery(s),s)}function qt(e){if(e.source.charAt(0)=="^")var t=!0;return{token:function(n){if(t&&!n.sol()){n.skipToEnd();return}var r=n.match(e,!1);if(r){if(r[0].length==0)return n.next(),"searching";if(!n.sol()){n.backUp(1);if(!e.exec(n.next()+r[0]))return n.next(),null}return n.match(e),"searching"}while(!n.eol()){n.next();if(n.match(e,!1))break}},query:e}}function Rt(e,t){var n=Ct(e).getOverlay();if(!n||t!=n.query)n&&e.removeOverlay(n),n=qt(t),e.addOverlay(n),Ct(e).setOverlay(n)}function Ut(e,t,r,i){return i===undefined&&(i=1),e.operation(function(){var s=e.getCursor
(),o=e.getSearchCursor(r,s);for(var u=0;u<i;u++){var a=o.find(t);u==0&&a&&K(o.from(),s)&&(a=o.find(t));if(!a){o=e.getSearchCursor(r,t?n(e.lastLine()):n(e.firstLine(),0));if(!o.find(t))return}}return o.from()})}function zt(e){e.removeOverlay(Ct(e).getOverlay()),Ct(e).setOverlay(null)}function Wt(e,t,n){return typeof e!="number"&&(e=e.line),t instanceof Array?S(e,t):n?e>=t&&e<=n:e==t}function Xt(e){var t=e.getScrollInfo(),n=6,r=10,i=e.coordsChar({left:0,top:n+t.top},"local"),s=t.clientHeight-r+t.top,o=e.coordsChar({left:0,top:s},"local");return{top:i.line,bottom:o.line}}function $t(e){var t,n,r=[];while(e){n=/<\w+-.+?>|<\w+>|./.exec(e);if(n===null)break;t=n[0],e=e.substring(n.index+t.length),r.push(t)}return r}function Qt(t,n,r,i,s,o,u,a,f){function h(){t.operation(function(){while(!l)p(),d();v()})}function p(){var e=t.getRange(o.from(),o.to()),n=e.replace(u,a);o.replace(n)}function d(){var e;while(e=o.findNext()&&Wt(o.from(),i,s)){if(!r&&c&&o.from().line==c.line)continue;t.scrollIntoView
(o.from(),30),t.setSelection(o.from(),o.to()),c=o.from(),l=!1;return}l=!0}function v(e){e&&e(),t.focus();if(c){t.setCursor(c);var n=t.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=c.ch}f&&f()}function m(n,r,i){e.e_stop(n);var s=e.keyName(n);switch(s){case"Y":p(),d();break;case"N":d();break;case"A":var o=f;f=undefined,t.operation(h),f=o;break;case"L":p();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":v(i)}l&&v(i)}t.state.vim.exMode=!0;var l=!1,c=o.from();d();if(l){Pt(t,"No matches for "+u.source);return}if(!n){h(),f&&f();return}jt(t,{prefix:"replace with <strong>"+a+"</strong> (y/n/a/q/l)",onKeyDown:m})}function Gt(){function t(e,t){var n=e;w(n)&&t=="Ctrl"&&(n=n.toLowerCase()),t&&(n=t.charAt(0)+"-"+n);var r={Enter:"CR",Backspace:"BS",Delete:"Del"}[n];return n=r?r:n,n=n.length>1?"<"+n+">":n,n}function n(t){return function(n){e.signal(n,"vim-keypress",t),e.Vim.handleKey(n,t)}}function i(e,i){for(var s=0;s<e.length;s++){var o=e[s];!i&&o.length==1&&(o="'"+o+"'");var u=t(e[s],i),a=i?i+"-"+o:o;r[a
]=n(u)}}var r={nofallthrough:!0,style:"fat-cursor"};return i(f),i(l),i(f,"Ctrl"),i(h),i(h,"Ctrl"),i(c),i(c,"Ctrl"),i(p),i(p,"Ctrl"),r}function Yt(t){var n=t.state.vim,r=M.macroModeState,i=M.registerController.getRegister("."),s=r.isPlaying,o=r.lastInsertModeChanges,u=[];if(!s){var a=o.inVisualBlock?n.lastSelection.visualBlock.height:1,f=o.changes,u=[],l=0;while(l<f.length)u.push(f[l]),f[l]instanceof an?l++:l+=a;o.changes=u,t.off("change",on),e.off(t.getInputField(),"keydown",fn)}!s&&n.insertModeRepeat>1&&(ln(t,n,n.insertModeRepeat-1,!0),n.lastEditInputState.repeatOverride=n.insertModeRepeat),delete n.insertModeRepeat,n.insertMode=!1,t.setCursor(t.getCursor().line,t.getCursor().ch-1),t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.toggleOverwrite(!1),i.setText(o.changes.join("")),e.signal(t,"vim-mode-change",{mode:"normal"}),r.isRecording&&rn(r)}function Zt(t){return function(n){var r=C("insertModeEscKeys"),i=r&&r.length>1&&r.charAt(0);if(!C("enableInsertModeEscKeys")||i!==t
)return e.Pass;n.replaceRange(t,n.getCursor(),n.getCursor(),"+input"),n.setOption("keyMap","await-second"),n.state.vim.awaitingEscapeSecondCharacter=!0,setTimeout(function(){n.state.vim.awaitingEscapeSecondCharacter&&(n.state.vim.awaitingEscapeSecondCharacter=!1,n.setOption("keyMap","vim-insert"))},C("insertModeEscKeysTimeout"))}}function en(t){return function(n){var r=C("insertModeEscKeys"),i=r&&r.length>1&&r.charAt(1);if(!C("enableInsertModeEscKeys")||i!==t)return e.Pass;if(n.state.vim.insertMode){var s=M.macroModeState.lastInsertModeChanges;s&&s.changes.length&&s.changes.pop()}n.state.vim.awaitingEscapeSecondCharacter=!1,n.replaceRange("",{ch:n.getCursor().ch-1,line:n.getCursor().line},n.getCursor(),"+input"),Yt(n)}}function tn(t,n,r,i){var s=M.registerController.getRegister(i),o=s.keyBuffer,u=0;r.isPlaying=!0,r.replaySearchQueries=s.searchQueries.slice(0);for(var a=0;a<o.length;a++){var f=o[a],l,c;while(f){l=/<\w+-.+?>|<\w+>|./.exec(f),c=l[0],f=f.substring(l.index+c.length),e.Vim.handleKey
(t,c);if(n.insertMode){var h=s.insertModeChanges[u++].changes;M.macroModeState.lastInsertModeChanges.changes=h,cn(t,h,1),Yt(t)}}}r.isPlaying=!1}function nn(e,t){if(e.isPlaying)return;var n=e.latestRegister,r=M.registerController.getRegister(n);r&&r.pushText(t)}function rn(e){if(e.isPlaying)return;var t=e.latestRegister,n=M.registerController.getRegister(t);n&&n.pushInsertModeChanges(e.lastInsertModeChanges)}function sn(e,t){if(e.isPlaying)return;var n=e.latestRegister,r=M.registerController.getRegister(n);r&&r.pushSearchQuery(t)}function on(e,t){var n=M.macroModeState,r=n.lastInsertModeChanges;if(!n.isPlaying)while(t){r.expectCursorActivityForChange=!0;if(t.origin=="+input"||t.origin=="paste"||t.origin===undefined){var i=t.text.join("\n");r.changes.push(i)}t=t.next}}function un(e){var t=e.state.vim;if(t.insertMode){var r=M.macroModeState;if(r.isPlaying)return;var i=r.lastInsertModeChanges;i.expectCursorActivityForChange?i.expectCursorActivityForChange=!1:i.changes=[]}else e.doc.history.
lastSelOrigin=="*mouse"&&(t.lastHPos=e.doc.getCursor().ch,e.somethingSelected()&&(t.visualMode=!0));if(t.visualMode){var s,o;s=o=e.getCursor("head");var u=e.getCursor("anchor"),a=n(o.line,s.ch+(Q(u,o)?-1:1));if(Q(a,s)){var f=s;s=a,a=f}t.fakeCursor&&t.fakeCursor.clear(),t.fakeCursor=e.markText(s,a,{className:"cm-animate-fat-cursor"})}}function an(e){this.keyName=e}function fn(t){function s(){return r.changes.push(new an(i)),!0}var n=M.macroModeState,r=n.lastInsertModeChanges,i=e.keyName(t);(i.indexOf("Delete")!=-1||i.indexOf("Backspace")!=-1)&&e.lookupKey(i,["vim-insert"],s)}function ln(e,t,n,r){function u(){s?I.processAction(e,t,t.lastEditActionCommand):I.evalInput(e,t)}function a(n){if(i.lastInsertModeChanges.changes.length>0){n=t.lastEditActionCommand?n:1;var r=i.lastInsertModeChanges;cn(e,r.changes,n)}}var i=M.macroModeState;i.isPlaying=!0;var s=!!t.lastEditActionCommand,o=t.inputState;t.inputState=t.lastEditInputState;if(s&&t.lastEditActionCommand.interlaceInsertRepeat)for(var f=0;f<
n;f++)u(),a(1);else r||u(),a(n);t.inputState=o,t.insertMode&&!r&&Yt(e),i.isPlaying=!1}function cn(t,r,i){function s(n){return typeof n=="string"?e.commands[n](t):n(t),!0}var o=t.getCursor(),u=M.macroModeState.lastInsertModeChanges.inVisualBlock;if(u){var a=t.state.vim,f=a.lastSelection.visualBlock,l=n(o.line+f.height-1,o.ch);t.setCursor(o),rt(t,l),i=t.listSelections().length,t.setCursor(o)}for(var c=0;c<i;c++){for(var h=0;h<r.length;h++){var p=r[h];if(p instanceof an)e.lookupKey(p.keyName,["vim-insert"],s);else{var d=t.getCursor();t.replaceRange(p,d,d)}}u&&(o.line++,t.setCursor(o))}}e.defineOption("vimMode",!1,function(t,n){n?(t.setOption("keyMap","vim"),t.setOption("disableInput",!0),t.setOption("showCursorWhenSelecting",!1),e.signal(t,"vim-mode-change",{mode:"normal"}),t.on("cursorActivity",un),O(t),e.on(t.getInputField(),"paste",i(t))):t.state.vim&&(t.setOption("keyMap","default"),t.setOption("disableInput",!1),t.off("cursorActivity",un),e.off(t.getInputField(),"paste",i(t)),t.state.
vim=null)});var s=/[\d]/,o=[/\w/,/[^\w\s]/],u=[/\S/],f=a(65,26),l=a(97,26),c=a(48,10),h="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'".split(""),p=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"],d=[].concat(f,l,c,["<",">"]),v=[].concat(f,l,c,["-",'"',".",":","/"]),x={},k=function(){function s(s,o,u){function l(n){var r=++t%e,o=i[r];o&&o.clear(),i[r]=s.setBookmark(n)}var a=t%e,f=i[a];if(f){var c=f.find();c&&!K(c,o)&&l(o)}else l(o);l(u),n=t,r=t-e+1,r<0&&(r=0)}function o(s,o){t+=o,t>n?t=n:t<r&&(t=r);var u=i[(e+t)%e];if(u&&!u.find()){var a=o>0?1:-1,f,l=s.getCursor();do{t+=a,u=i[(e+t)%e];if(u&&(f=u.find())&&!K(l,f))break}while(t<n&&t>r)}return u}var e=100,t=-1,n=0,r=0,i=new Array(e);return{cachedCursor:undefined,add:s,move:o}},L=function(e){return e?{changes:e.changes,expectCursorActivityForChange:e.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};A.prototype={exitMacroRecordMode:function(){var e=M.macroModeState;e.onRecordingDone&&
e.onRecordingDone(),e.onRecordingDone=undefined,e.isRecording=!1},enterMacroRecordMode:function(e,t){var n=M.registerController.getRegister(t);n&&(n.clear(),this.latestRegister=t,e.openDialog&&(this.onRecordingDone=e.openDialog("(recording)["+t+"]",null,{bottom:!0})),this.isRecording=!0)}};var M,D={buildKeyMap:function(){},getRegisterController:function(){return M.registerController},resetVimGlobalState_:_,getVimGlobalState_:function(){return M},maybeInitVimState_:O,InsertModeKey:an,map:function(e,t,n){Kt.map(e,t,n)},setOption:N,getOption:C,defineOption:T,defineEx:function(e,t,n){if(e.indexOf(t)!==0)throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered');Jt[e]=n,Kt.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(n,r){var i,s=O(n),o=M.macroModeState;if(o.isRecording&&r=="q"){o.exitMacroRecordMode(),H(n);return}if(r=="<Esc>"){H(n),s.visualMode&&ut(n);return}!s.visualMode&&!K(n.getCursor("head"),n.getCursor("anchor"))&&(s.visualMode=!0
,s.visualLine=!1,e.signal(n,"vim-mode-change",{mode:"visual"}),n.on("mousedown",ut));if(r!="0"||r=="0"&&s.inputState.getRepeat()===0)i=I.matchCommand(r,t,s);if(!i){b(r)&&s.inputState.pushRepeatDigit(r),o.isRecording&&nn(o,r);return}if(i.type=="keyToKey")for(var u=0;u<i.toKeys.length;u++)this.handleKey(n,i.toKeys[u]);else o.isRecording&&nn(o,r),I.processCommand(n,s,i)},handleEx:function(e,t){Kt.processCommand(e,t)}};P.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},P.prototype.getRepeat=function(){var e=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0)e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10));return e},B.prototype={setText:function(e,t,n){this.keyBuffer=[e||""],this.linewise=!!t,this.blockwise=!!n},pushText:function(e,t){t&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0
),this.keyBuffer.push(e)},pushInsertModeChanges:function(e){this.insertModeChanges.push(L(e))},pushSearchQuery:function(e){this.searchQueries.push(e)},clear:function(){this.keyBuffer=[],this.insertModeChanges=[],this.searchQueries=[],this.linewise=!1},toString:function(){return this.keyBuffer.join("")}},j.prototype={pushText:function(e,t,n,r,i){r&&n.charAt(0)=="\n"&&(n=n.slice(1)+"\n"),r&&n.charAt(n.length-1)!=="\n"&&(n+="\n");var s=this.isValidRegister(e)?this.getRegister(e):null;if(!s){switch(t){case"yank":this.registers[0]=new B(n,r,i);break;case"delete":case"change":n.indexOf("\n")==-1?this.registers["-"]=new B(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new B(n,r))}this.unnamedRegister.setText(n,r,i);return}var o=w(e);o?s.pushText(n,r):s.setText(n,r,i),this.unnamedRegister.setText(s.toString(),r)},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new B),this.registers[e]):this.unnamedRegister},isValidRegister:function(
e){return e&&S(e,v)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}},F.prototype={nextMatch:function(e,t){var n=this.historyBuffer,r=t?-1:1;this.initialPrefix===null&&(this.initialPrefix=e);for(var i=this.iterator+r;t?i>=0:i<n.length;i+=r){var s=n[i];for(var o=0;o<=s.length;o++)if(this.initialPrefix==s.substring(0,o))return this.iterator=i,s}if(i>=n.length)return this.iterator=n.length,this.initialPrefix;if(i<0)return e},pushInput:function(e){var t=this.historyBuffer.indexOf(e);t>-1&&this.historyBuffer.splice(t,1),e.length&&this.historyBuffer.push(e)},reset:function(){this.initialPrefix=null,this.iterator=this.historyBuffer.length}};var I={matchCommand:function(e,t,n){function f(t){return i.length<t.keys.length?(r.keyBuffer.push(e),null):(t.keys[i.length-1]=="character"&&(r.selectedCharacter=o),r.keyBuffer=[],t)}var r=n.inputState,i=r.keyBuffer.concat(e),s=[],o;for(var u=0;u<t.length;u++){var a=t[u];if(V(i,a.keys)){if(r.operator&&a.type=="action"
)continue;if(a.keys[i.length-1]=="character"){o=i[i.length-1];if(o.length>1)switch(o){case"<CR>":o="\n";break;case"<Space>":o=" ";break;default:continue}}s.push(a)}}if(!s.length)return r.keyBuffer=[],null;if(s.length==1)return f(s[0]);var l=n.visualMode?"visual":"normal",c;for(var u=0;u<s.length;u++){var h=s[u];if(h.context==l){c=h;break}!c&&!h.context&&(c=h)}return f(c)},processCommand:function(e,t,n){t.inputState.repeatOverride=n.repeatOverride;switch(n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n);break;default:}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=W(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator){r.motion="expandToLine"
,r.motionArgs={linewise:!0},this.evalInput(e,t);return}H(e)}r.operator=n.operator,r.operatorArgs=W(n.operatorArgs),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,i=W(n.operatorMotionArgs);i&&r&&i.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,i=r.getRepeat(),s=!!i,o=W(n.actionArgs)||{};r.selectedCharacter&&(o.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),o.repeat=i||1,o.repeatIsExplicit=s,o.registerName=r.registerName,H(e),t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,r,n),U[n.action](e,o,t)},processSearch:function(t,n,r){function f(e,i,s){M.searchHistoryController.pushInput(e),M.searchHistoryController.reset();try{It(t,e,i,s)}catch(o){Pt(t,"Invalid regex: "+e);return}I.processMotion(t,n,{type:"motion",motion:"findNext",motionArgs:{forward
:!0,toJumplist:r.searchArgs.toJumplist}})}function l(e){t.scrollTo(a.left,a.top),f(e,!0,!0);var n=M.macroModeState;n.isRecording&&sn(n,e)}function c(n,r,s){var o=e.keyName(n),u;o=="Up"||o=="Down"?(u=o=="Up"?!0:!1,r=M.searchHistoryController.nextMatch(r,u)||"",s(r)):o!="Left"&&o!="Right"&&o!="Ctrl"&&o!="Alt"&&o!="Shift"&&M.searchHistoryController.reset();var f;try{f=It(t,r,!0,!0)}catch(n){}f?t.scrollIntoView(Ut(t,!i,f),30):(zt(t),t.scrollTo(a.left,a.top))}function h(n,r,i){var s=e.keyName(n);if(s=="Esc"||s=="Ctrl-C"||s=="Ctrl-[")M.searchHistoryController.pushInput(r),M.searchHistoryController.reset(),It(t,u),zt(t),t.scrollTo(a.left,a.top),e.e_stop(n),i(),t.focus()}if(!t.getSearchCursor)return;var i=r.searchArgs.forward,s=r.searchArgs.wholeWordOnly;Ct(t).setReversed(!i);var o=i?"/":"?",u=Ct(t).getQuery(),a=t.getScrollInfo();switch(r.searchArgs.querySrc){case"prompt":var p=M.macroModeState;if(p.isPlaying){var d=p.replaySearchQueries.shift();f(d,!0,!1)}else jt(t,{onClose:l,prefix:o,desc:Bt,
onKeyUp:c,onKeyDown:h});break;case"wordUnderCursor":var v=ct(t,!1,!0,!1,!0),m=!0;v||(v=ct(t,!1,!0,!1,!1),m=!1);if(!v)return;var d=t.getLine(v.start.line).substring(v.start.ch,v.end.ch);m&&s?d="\\b"+d+"\\b":d=tt(d),M.jumpList.cachedCursor=t.getCursor(),t.setCursor(v.start),f(d,!0,!1)}},processEx:function(t,n,r){function i(e){M.exCommandHistoryController.pushInput(e),M.exCommandHistoryController.reset(),Kt.processCommand(t,e)}function s(n,r,i){var s=e.keyName(n),o;if(s=="Esc"||s=="Ctrl-C"||s=="Ctrl-[")M.exCommandHistoryController.pushInput(r),M.exCommandHistoryController.reset(),e.e_stop(n),i(),t.focus();s=="Up"||s=="Down"?(o=s=="Up"?!0:!1,r=M.exCommandHistoryController.nextMatch(r,o)||"",i(r)):s!="Left"&&s!="Right"&&s!="Ctrl"&&s!="Alt"&&s!="Shift"&&M.exCommandHistoryController.reset()}r.type=="keyToEx"?Kt.processCommand(t,r.exArgs.input):n.visualMode?jt(t,{onClose:i,prefix:":",value:"'<,'>",onKeyDown:s}):jt(t,{onClose:i,prefix:":",onKeyDown:s})},evalInput:function(e,t){var r=t.inputState
,i=r.motion,s=r.motionArgs||{},o=r.operator,u=r.operatorArgs||{},a=r.registerName,f=J(e.getCursor("head")),l=J(e.getCursor("anchor")),c=J(f),h=J(c),p,d;o&&this.recordLastEdit(t,r),r.repeatOverride!==undefined?d=r.repeatOverride:d=r.getRepeat();if(d>0&&s.explicitRepeat)s.repeatIsExplicit=!0;else if(s.noRepeat||!s.explicitRepeat&&d===0)d=1,s.repeatIsExplicit=!1;r.selectedCharacter&&(s.selectedCharacter=u.selectedCharacter=r.selectedCharacter),s.repeat=d,H(e);if(i){var v=q[i](e,s,t);t.lastMotion=q[i];if(!v)return;if(s.toJumplist){var m=M.jumpList,g=m.cachedCursor;g?(ht(e,g,v),delete m.cachedCursor):ht(e,h,v)}v instanceof Array?(c=v[0],p=v[1]):p=v,p||(p=n(c.line,c.ch));if(t.visualMode){var y=0;Q(l,f)&&(K(l,p)||Q(p,l))?(l.ch+=1,y=-1):Q(f,l)&&(K(l,p)||Q(l,p))&&(l.ch-=1,y=1),!t.visualBlock&&!(v instanceof Array)&&(p.ch+=y),t.lastHPos!=Infinity&&(t.lastHPos=p.ch),f=p,l=v instanceof Array?c:l;if(t.visualLine)if(Q(l,f)){l.ch=0;var b=e.lastLine();f.line>b&&(f.line=b),f.ch=Y(e,f.line)}else f.ch=0,l
.ch=Y(e,l.line);else t.visualBlock&&(l=rt(e,f));t.visualBlock||e.setSelection(l,f),Et(e,t,"<",Q(l,f)?l:f),Et(e,t,">",Q(l,f)?f:l)}else o||(p=z(e,p),e.setCursor(p.line,p.ch))}if(o){var w=!1;t.lastMotion=null;var E=t.lastSelection;u.repeat=d,t.visualMode&&(c=l,p=f,s.inclusive=!0,u.shouldMoveCursor=!1);if(p&&Q(p,c)){var S=c;c=p,p=S,w=!0}else p||(p=J(c));s.inclusive&&!t.visualMode&&p.ch++;if(u.selOffset){p.line=c.line+u.selOffset.line,u.selOffset.line?p.ch=u.selOffset.ch:p.ch=c.ch+u.selOffset.ch;if(E&&E.visualBlock){var x=E.visualBlock,T=x.width,N=x.height;p=n(c.line+N,c.ch+T);var C=[];for(var k=c.line;k<p.line;k++){var L=n(k,c.ch),A=n(k,p.ch),O={anchor:L,head:A};C.push(O)}e.setSelections(C);var _=!0}}else if(t.visualMode){var D=n();D.line=p.line-c.line,D.line?D.ch=p.ch:D.ch=p.ch-c.ch,u.selOffset=D}var P=s.linewise||t.visualMode&&t.visualLine||u.linewise;P?ft(e,c,p):s.forward&&at(e,c,p),u.registerName=a,u.linewise=P,!t.visualBlock&&!_&&e.setSelection(c,p),R[o](e,u,t,c,p,h),t.visualMode&&ut(e
)}},recordLastEdit:function(e,t,n){var r=M.macroModeState;if(r.isPlaying)return;e.lastEditInputState=t,e.lastEditActionCommand=n,r.lastInsertModeChanges.changes=[],r.lastInsertModeChanges.expectCursorActivityForChange=!1}},q={moveToTopLine:function(e,t){var r=Xt(e).top+t.repeat-1;return n(r,lt(e.getLine(r)))},moveToMiddleLine:function(e){var t=Xt(e),r=Math.floor((t.top+t.bottom)*.5);return n(r,lt(e.getLine(r)))},moveToBottomLine:function(e,t){var r=Xt(e).bottom-t.repeat+1;return n(r,lt(e.getLine(r)))},expandToLine:function(e,t){var r=e.getCursor();return n(r.line+t.repeat-1,Infinity)},findNext:function(e,t){var n=Ct(e),r=n.getQuery();if(!r)return;var i=!t.forward;return i=n.isReversed()?!i:i,Rt(e,r),Ut(e,i,r,t.repeat)},goToMark:function(e,t,n){var r=n.marks[t.selectedCharacter];if(r){var i=r.find();return t.linewise?{line:i.line,ch:lt(e.getLine(i.line))}:i}return null},moveToOtherHighlightedEnd:function(e,t,r){var i=e.listSelections(),s=e.getCursor("head"),o=i[0].anchor,u=K(i[0].head,s)?
i.length-1:0;return t.sameLine&&r.visualBlock?(o=n(s.line,i[u].anchor.ch),s=n(i[u].head.line,s.ch)):o=i[u].anchor,e.setCursor(s),[s,o]},jumpToMark:function(e,t,r){var i=e.getCursor();for(var s=0;s<t.repeat;s++){var o=i;for(var u in r.marks){if(!g(u))continue;var a=r.marks[u].find(),f=t.forward?Q(a,o):Q(o,a);if(f)continue;if(t.linewise&&a.line==o.line)continue;var l=K(o,i),c=t.forward?G(o,a,i):G(i,a,o);if(l||c)i=a}}return t.linewise&&(i=n(i.line,lt(e.getLine(i.line)))),i},moveByCharacters:function(e,t){var r=e.getCursor(),i=t.repeat,s=t.forward?r.ch+i:r.ch-i;return n(r.line,s)},moveByLines:function(e,t,r){var i=e.getCursor(),s=i.ch;switch(r.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:s=r.lastHPos;break;default:r.lastHPos=s}var o=t.repeat+(t.repeatOffset||0),u=t.forward?i.line+o:i.line-o,a=e.firstLine(),f=e.lastLine();if(u<a&&i.line==a||u>f&&i.line==f)return;return t.toFirstChar&&(s=lt(e.getLine(u)),r.lastHPos=
s),r.lastHSPos=e.charCoords(n(u,s),"div").left,n(u,s)},moveByDisplayLines:function(e,t,r){var i=e.getCursor();switch(r.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:r.lastHSPos=e.charCoords(i,"div").left}var s=t.repeat,o=e.findPosV(i,t.forward?s:-s,"line",r.lastHSPos);if(o.hitSide)if(t.forward)var u=e.charCoords(o,"div"),a={top:u.top+8,left:r.lastHSPos},o=e.coordsChar(a,"div");else{var f=e.charCoords(n(e.firstLine(),0),"div");f.left=r.lastHSPos,o=e.coordsChar(f,"div")}return r.lastHPos=o.ch,o},moveByPage:function(e,t){var n=e.getCursor(),r=t.repeat;return e.findPosV(n,t.forward?r:-r,"page")},moveByParagraph:function(e,t){var r=e.getCursor().line,i=t.repeat,s=t.forward?1:-1;for(var o=0;o<i;o++){if(!t.forward&&r===e.firstLine()||t.forward&&r==e.lastLine())break;r+=s;while(r!==e.firstLine()&&r!=e.lastLine()&&e.getLine(r))r+=s}return n(r,0)},moveByScroll:function(e,t,n){var r=e.getScrollInfo(),i=
null,s=t.repeat;s||(s=r.clientHeight/(2*e.defaultTextHeight()));var o=e.charCoords(e.getCursor(),"local");t.repeat=s;var i=q.moveByDisplayLines(e,t,n);if(!i)return null;var u=e.charCoords(i,"local");return e.scrollTo(null,r.top+u.top-o.top),i},moveByWords:function(e,t){return yt(e,t.repeat,!!t.forward,!!t.wordEnd,!!t.bigWord)},moveTillCharacter:function(e,t){var n=t.repeat,r=bt(e,n,t.forward,t.selectedCharacter),i=t.forward?-1:1;return pt(i,t),r?(r.ch+=i,r):null},moveToCharacter:function(e,t){var n=t.repeat;return pt(0,t),bt(e,n,t.forward,t.selectedCharacter)||e.getCursor()},moveToSymbol:function(e,t){var n=t.repeat;return mt(e,n,t.forward,t.selectedCharacter)||e.getCursor()},moveToColumn:function(e,t,n){var r=t.repeat;return n.lastHPos=r-1,n.lastHSPos=e.charCoords(e.getCursor(),"div").left,wt(e,r)},moveToEol:function(e,t,r){var i=e.getCursor();r.lastHPos=Infinity;var s=n(i.line+t.repeat-1,Infinity),o=e.clipPos(s);return o.ch--,r.lastHSPos=e.charCoords(o,"div").left,s},moveToFirstNonWhiteSpaceCharacter
:function(e){var t=e.getCursor();return n(t.line,lt(e.getLine(t.line)))},moveToMatchedSymbol:function(e){var t=e.getCursor(),r=t.line,i=t.ch,s=e.getLine(r),o;do{o=s.charAt(i++);if(o&&y(o)){var u=e.getTokenTypeAt(n(r,i));if(u!=="string"&&u!=="comment")break}}while(o);if(o){var a=e.findMatchingBracket(n(r,i));return a.to}return t},moveToStartOfLine:function(e){var t=e.getCursor();return n(t.line,0)},moveToLineOrEdgeOfDocument:function(e,t){var r=t.forward?e.lastLine():e.firstLine();return t.repeatIsExplicit&&(r=t.repeat-e.getOption("firstLineNumber")),n(r,lt(e.getLine(r)))},textObjectManipulation:function(e,t){var n={"(":")",")":"(","{":"}","}":"{","[":"]","]":"["},r={"'":!0,'"':!0},i=t.selectedCharacter;i=="b"?i="(":i=="B"&&(i="{");var s=!t.textObjectInner,o;if(n[i])o=xt(e,i,s);else if(r[i])o=Tt(e,i,s);else if(i==="W")o=ct(e,s,!0,!0);else{if(i!=="w")return null;o=ct(e,s,!0,!1)}return[o.start,o.end]},repeatLastCharacterSearch:function(e,t){var n=M.lastChararacterSearch,r=t.repeat,i=t.forward===
n.forward,s=(n.increment?1:0)*(i?-1:1);e.moveH(-s,"char"),t.inclusive=i?!0:!1;var o=bt(e,r,i,n.selectedCharacter);return o?(o.ch+=s,o):(e.moveH(s,"char"),e.getCursor())}},R={change:function(e,t,r){var i=e.listSelections(),s=i[0],o=i[i.length-1],u=Q(s.anchor,s.head)?s.anchor:s.head,a=Q(o.anchor,o.head)?o.head:o.anchor,f=e.getSelection(),l=r.visualBlock;r.lastSelection&&!r.visualMode&&(l=r.lastSelection.visualBlock?!0:l);var c=M.macroModeState.lastInsertModeChanges;c.inVisualBlock=l;var h=(new Array(i.length)).join("1").split("1"),p=r.marks[">"]?r.marks[">"].find():e.getCursor("head");M.registerController.pushText(t.registerName,"change",f,t.linewise);if(t.linewise)if(l){var d=u.line;while(d<=a.line){var v=Y(e,d),m=n(d,v),g=n(d,u.ch);d++,e.replaceRange("",g,m)}}else h="\n",a.line==u.line&&a.line==e.lastLine()&&(h=""),e.replaceRange(h,u,a),e.indentLine(u.line,"smart"),u.ch=null,e.setCursor(u);else{var f=e.getRange(u,a);if(!E(f)){var y=/\s+$/.exec(f);y&&(a=X(a,0,-y[0].length))}l?e.replaceSelections
(h):(e.setCursor(u),e.replaceRange("",u,a))}r.marks[">"]=e.setBookmark(p),U.enterInsertMode(e,{},e.state.vim)},"delete":function(e,t,n){var r=e.listSelections(),i=r[0],s=r[r.length-1],o=Q(i.anchor,i.head)?i.anchor:i.head,u=Q(s.anchor,s.head)?s.head:s.anchor,a,f,l=n.visualBlock;n.visualMode?(a=n.marks[">"].find(),f=n.marks["<"].find()):n.lastSelection&&(a=n.lastSelection.curStartMark.find(),f=n.lastSelection.curEndMark.find(),l=n.lastSelection.visualBlock);var c=e.getSelection();M.registerController.pushText(t.registerName,"delete",c,t.linewise,l);var h=(new Array(r.length)).join("1").split("1");if(t.linewise&&u.line==e.lastLine()&&o.line==u.line){var p=J(u);o.line--,o.ch=Y(e,o.line),u=p,e.replaceRange("",o,u)}else e.replaceSelections(h);if(a){var d=e.setBookmark(f),v=e.setBookmark(a);n.visualMode?(n.marks["<"]=d,n.marks[">"]=v):(n.lastSelection.curStartMark=d,n.lastSelection.curEndMark=v)}t.linewise?e.setCursor(q.moveToFirstNonWhiteSpaceCharacter(e)):e.setCursor(o)},indent:function(e,t,
n,r,i){var s=r.line,o=i.line,u=n.visualMode?t.repeat:1;t.linewise&&o--;for(var a=s;a<=o;a++)for(var f=0;f<u;f++)e.indentLine(a,t.indentRight);e.setCursor(r),e.setCursor(q.moveToFirstNonWhiteSpaceCharacter(e))},swapcase:function(e,t,n,r,i,s){var o=e.getSelections(),u=e.listSelections(),a=[];for(var f=0;f<o.length;f++){var l=o[f],c="";for(var h=0;h<l.length;h++){var p=l.charAt(h);c+=w(p)?p.toLowerCase():p.toUpperCase()}a.push(c)}e.replaceSelections(a);var d=u[0].anchor,v=u[0].head;t.shouldMoveCursor||e.setCursor(Q(d,v)?d:v)},yank:function(e,t,n,r,i,s){var o=e.getSelection();M.registerController.pushText(t.registerName,"yank",o,t.linewise,n.visualBlock),e.setCursor(s)}},U={jumpListWalk:function(e,t,n){if(n.visualMode)return;var r=t.repeat,i=t.forward,s=M.jumpList,o=s.move(e,i?r:-r),u=o?o.find():undefined;u=u?u:e.getCursor(),e.setCursor(u)},scroll:function(e,t,n){if(n.visualMode)return;var r=t.repeat||1,i=e.defaultTextHeight(),s=e.getScrollInfo().top,o=i*r,u=t.forward?s+o:s-o,a=J(e.getCursor
()),f=e.charCoords(a,"local");if(t.forward)u>f.top?(a.line+=(u-f.top)/i,a.line=Math.ceil(a.line),e.setCursor(a),f=e.charCoords(a,"local"),e.scrollTo(null,f.top)):e.scrollTo(null,u);else{var l=u+e.getScrollInfo().clientHeight;l<f.bottom?(a.line-=(f.bottom-l)/i,a.line=Math.floor(a.line),e.setCursor(a),f=e.charCoords(a,"local"),e.scrollTo(null,f.bottom-e.getScrollInfo().clientHeight)):e.scrollTo(null,u)}},scrollToCursor:function(e,t){var r=e.getCursor().line,i=e.charCoords(n(r,0),"local"),s=e.getScrollInfo().clientHeight,o=i.top,u=i.bottom-o;switch(t.position){case"center":o=o-s/2+u;break;case"bottom":o=o-s+u*1.4;break;case"top":o+=u*.4}e.scrollTo(null,o)},replayMacro:function(e,t,n){var r=t.selectedCharacter,i=t.repeat,s=M.macroModeState;r=="@"&&(r=s.latestRegister);while(i--)tn(e,n,s,r)},enterMacroRecordMode:function(e,t){var n=M.macroModeState,r=t.selectedCharacter;n.enterMacroRecordMode(e,r)},enterInsertMode:function(t,r,i){if(t.getOption("readOnly"))return;i.insertMode=!0,i.insertModeRepeat=
r&&r.repeat||1;var s=r?r.insertAt:null;if(i.visualMode)var o=st(t,i),u=o[0],a=o[1];if(s=="eol"){var f=t.getCursor();f=n(f.line,Y(t,f.line)),t.setCursor(f)}else if(s=="charAfter")t.setCursor(X(t.getCursor(),0,1));else if(s=="firstNonBlank")i.visualMode&&!i.visualBlock?(a.line<u.line?t.setCursor(a):(u=n(u.line,0),t.setCursor(u)),t.setCursor(q.moveToFirstNonWhiteSpaceCharacter(t))):i.visualBlock?(a=n(a.line,u.ch),t.setCursor(u),rt(t,a)):t.setCursor(q.moveToFirstNonWhiteSpaceCharacter(t));else if(s=="endOfSelectedArea")i.visualBlock?(u=n(u.line,a.ch),t.setCursor(u),rt(t,a)):a.line<u.line&&(a=n(u.line,0),t.setCursor(a));else if(s=="inplace"&&i.visualMode)return;t.setOption("keyMap","vim-insert"),t.setOption("disableInput",!1),r&&r.replace?(t.toggleOverwrite(!0),t.setOption("keyMap","vim-replace"),e.signal(t,"vim-mode-change",{mode:"replace"})):(t.setOption("keyMap","vim-insert"),e.signal(t,"vim-mode-change",{mode:"insert"})),M.macroModeState.isPlaying||(t.on("change",on),e.on(t.getInputField
(),"keydown",fn)),i.visualMode&&ut(t)},toggleVisualMode:function(t,r,i){var s=r.repeat,o=t.getCursor(),u,a=t.listSelections();i.visualMode?(o=t.getCursor("anchor"),u=t.getCursor("head"),i.visualLine?(r.blockwise?(i.visualBlock=!0,rt(t,u),e.signal(t,"vim-mode-change",{mode:"visual",subMode:"blockwise"})):r.linewise?ut(t):e.signal(t,"vim-mode-change",{mode:"visual"}),i.visualLine=!1):i.visualBlock?(r.linewise?(i.visualLine=!0,o=n(a[0].anchor.line,0),u=n(a[a.length-1].anchor.line,Y(t,a[a.length-1].anchor.line)),t.setSelection(o,u),e.signal(t,"vim-mode-change",{mode:"visual",subMode:"linewise"})):r.blockwise?ut(t):(u!=a[0].head?o=a[0].anchor:o=a[a.length-1].anchor,t.setSelection(o,u),e.signal(t,"vim-mode-change",{mode:"visual"})),i.visualBlock=!1):r.linewise?(i.visualLine=!0,o.ch=Q(o,u)?0:Y(t,o.line),u.ch=Q(o,u)?Y(t,u.line):0,t.setSelection(o,u),e.signal(t,"vim-mode-change",{mode:"visual",subMode:"linewise"})):r.blockwise?(i.visualBlock=!0,rt(t,u),e.signal(t,"vim-mode-change",{mode:"visual"
,subMode:"blockwise"})):ut(t)):(t.on("mousedown",ut),i.visualMode=!0,i.visualLine=!!r.linewise,i.visualBlock=!!r.blockwise,i.visualLine?(o.ch=0,u=z(t,n(o.line+s-1,Y(t,o.line)),!0)):u=z(t,n(o.line,o.ch+s),!0),t.setSelection(o,u),e.signal(t,"vim-mode-change",{mode:"visual",subMode:i.visualLine?"linewise":""})),Et(t,i,"<",Q(o,u)?o:u),Et(t,i,">",Q(o,u)?u:o)},reselectLastSelection:function(t,n,r){var i=r.marks["<"].find(),s=r.marks[">"].find(),o=r.lastSelection;if(o){var u=o.curStartMark.find(),a=o.curEndMark.find(),f=o.visualBlock;ot(t,r,i,s),f?(t.setCursor(u),u=rt(t,a)):(t.setSelection(u,a),u=t.getCursor("anchor"),a=t.getCursor("head")),r.visualMode&&(Et(t,r,"<",Q(u,a)?u:a),Et(t,r,">",Q(u,a)?a:u)),r.visualMode=!0,o.visualLine?(r.visualLine=!0,r.visualBlock=!1):o.visualBlock?(r.visualLine=!1,r.visualBlock=!0):r.visualBlock=r.visualLine=!1,e.signal(t,"vim-mode-change",{mode:"visual",subMode:r.visualLine?"linewise":""})}},joinLines:function(e,t,r){var i,s;if(r.visualMode)i=e.getCursor("anchor"
),s=e.getCursor("head"),s.ch=Y(e,s.line)-1;else{var o=Math.max(t.repeat,2);i=e.getCursor(),s=z(e,n(i.line+o-1,Infinity))}var u=0;e.operation(function(){for(var t=i.line;t<s.line;t++){u=Y(e,i.line);var r=n(i.line+1,Y(e,i.line+1)),o=e.getRange(i,r);o=o.replace(/\n\s*/g," "),e.replaceRange(o,i,r)}var a=n(i.line,u);e.setCursor(a)})},newLineAndEnterInsertMode:function(t,r,i){i.insertMode=!0;var s=J(t.getCursor());if(s.line===t.firstLine()&&!r.after)t.replaceRange("\n",n(t.firstLine(),0)),t.setCursor(t.firstLine(),0);else{s.line=r.after?s.line:s.line-1,s.ch=Y(t,s.line),t.setCursor(s);var o=e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent;o(t)}this.enterInsertMode(t,{repeat:r.repeat},i)},paste:function(e,t,r){var i=J(e.getCursor()),s=M.registerController.getRegister(t.registerName),o=s.toString();if(!o)return;if(t.matchIndent){var u=function(t){var n=t.split("	").length-1,r=t.split(" ").length-1;return n*e.options.tabSize+r*1},a=e.getLine(e.getCursor().line),f=u(a.match(/^\s*/
)[0]),l=o.replace(/\n$/,""),c=o!==l,h=u(o.match(/^\s*/)[0]),o=l.replace(/^\s*/gm,function(t){var n=f+(u(t)-h);if(n<0)return"";if(e.options.indentWithTabs){var r=Math.floor(n/e.options.tabSize);return Array(r+1).join("	")}return Array(n+1).join(" ")});o+=c?"\n":""}if(t.repeat>1)var o=Array(t.repeat+1).join(o);var p=s.linewise,d=s.blockwise;if(p)r.visualMode?o=r.visualLine?o.slice(0,-1):"\n"+o.slice(0,o.length-1)+"\n":t.after?(o="\n"+o.slice(0,o.length-1),i.ch=Y(e,i.line)):i.ch=0;else{if(d){o=o.split("\n");for(var v=0;v<o.length;v++)o[v]=o[v]==""?" ":o[v]}i.ch+=t.after?1:0}var m,g;if(r.visualMode){r.lastPastedText=o;var y,b=st(e,r),w=b[0],E=b[1],S=e.getSelection(),x=e.listSelections(),T=(new Array(x.length)).join("1").split("1");r.lastSelection&&(y=r.lastSelection.curEndMark.find()),M.registerController.unnamedRegister.setText(S),d?(e.replaceSelections(T),E=n(w.line+o.length-1,w.ch),e.setCursor(w),rt(e,E),e.replaceSelections(o),m=w):r.visualBlock?(e.replaceSelections(T),e.setCursor(w),e.replaceRange
(o,w,w),m=w):(e.replaceRange(o,w,E),m=e.posFromIndex(e.indexFromPos(w)+o.length-1)),y&&(r.lastSelection.curEndMark=e.setBookmark(y)),p&&(m.ch=0)}else if(d){e.setCursor(i);for(var v=0;v<o.length;v++){var N=i.line+v;N>e.lastLine()&&e.replaceRange("\n",n(N,0));var C=Y(e,N);C<i.ch&&nt(e,N,i.ch)}e.setCursor(i),rt(e,n(i.line+o.length-1,i.ch)),e.replaceSelections(o),m=i}else e.replaceRange(o,i),p&&t.after?m=n(i.line+1,lt(e.getLine(i.line+1))):p&&!t.after?m=n(i.line,lt(e.getLine(i.line))):!p&&t.after?(g=e.indexFromPos(i),m=e.posFromIndex(g+o.length-1)):(g=e.indexFromPos(i),m=e.posFromIndex(g+o.length));e.setCursor(m),r.visualMode&&ut(e)},undo:function(t,n){t.operation(function(){$(t,e.commands.undo,n.repeat)(),t.setCursor(t.getCursor("anchor"))})},redo:function(t,n){$(t,e.commands.redo,n.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){var r=t.selectedCharacter;Et(e,n,r,e.getCursor())},replace:function(t,r,i){var s=r.selectedCharacter
,o=t.getCursor(),u,a,f=t.listSelections();if(i.visualMode)o=t.getCursor("start"),a=t.getCursor("end");else{var l=t.getLine(o.line);u=o.ch+r.repeat,u>l.length&&(u=l.length),a=n(o.line,u)}if(s=="\n")i.visualMode||t.replaceRange("",o,a),(e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent)(t);else{var c=t.getRange(o,a);c=c.replace(/[^\n]/g,s);if(i.visualBlock){var h=(new Array(t.options.tabSize+1)).join(" ");c=t.getSelection(),c=c.replace(/\t/g,h).replace(/[^\n]/g,s).split("\n"),t.replaceSelections(c)}else t.replaceRange(c,o,a);i.visualMode?(o=Q(f[0].anchor,f[0].head)?f[0].anchor:f[0].head,t.setCursor(o),ut(t)):t.setCursor(X(a,0,-1))}},incrementNumberToken:function(e,t){var r=e.getCursor(),i=e.getLine(r.line),s=/-?\d+/g,o,u,a,f,l;while((o=s.exec(i))!==null){l=o[0],u=o.index,a=u+l.length;if(r.ch<a)break}if(!t.backtrack&&a<=r.ch)return;if(!l)return;var c=t.increase?1:-1,h=parseInt(l)+c*t.repeat,p=n(r.line,u),d=n(r.line,a);f=h.toString(),e.replaceRange(f,p,d),e.setCursor(n
(r.line,u+f.length-1))},repeatLastEdit:function(e,t,n){var r=n.lastEditInputState;if(!r)return;var i=t.repeat;i&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=i:i=n.lastEditInputState.repeatOverride||i,ln(e,n,i,!1)},changeCase:function(e,t,n){var r=st(e,n)[0],i=e.getSelection(),s,o;n.lastSelection&&(s=n.lastSelection.curEndMark.find(),o=n.lastSelection.visualBlock);var u=t.toLower;i=u?i.toLowerCase():i.toUpperCase(),e.replaceSelections(n.visualBlock||o?i.split("\n"):[i]),s&&(n.lastSelection.curEndMark=e.setBookmark(s)),e.setCursor(r),n.visualMode&&ut(e)}},dt={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},vt={bracket:{isComplete:function(e){if(e.nextCh===e.symb){e.depth++;if(e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return e.index===0&&
e.nextCh===e.symb}},comment:{isComplete:function(e){var t=e.lastCh==="*"&&e.nextCh==="/";return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb=e.symb==="m"?"{":"}",e.reverseSymb=e.symb==="{"?"}":"{"},isComplete:function(e){return e.nextCh===e.symb?!0:!1}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if(e.nextCh==="#"){var t=e.lineText.match(/#(\w+)/)[1];if(t==="endif"){if(e.forward&&e.depth===0)return!0;e.depth++}else if(t==="if"){if(!e.forward&&e.depth===0)return!0;e.depth--}if(t==="else"&&e.depth===0)return!0}return!1}}};T("pcre",!0,"boolean"),Nt.prototype={getQuery:function(){return M.query},setQuery:function(e){M.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return M.isReversed},setReversed:function(e){M.isReversed=e}};var Bt="(Javascript regexp)",Vt=[{name:"map"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName
:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"set"},{name:"sort",shortName:"sor"},{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}];r.ExCommandDispatcher=function(){this.buildCommandMap_()},r.ExCommandDispatcher.prototype={processCommand:function(t,n,r){var i=t.state.vim,s=M.registerController.getRegister(":"),o=s.toString();i.visualMode&&ut(t);var u=new e.StringStream(n);s.setText(n);var a=r||{};a.input=n;try{this.parseInput_(t,u,a)}catch(f){throw Pt(t,f),f}var l,c;if(!a.commandName)a.line!==undefined&&(c="move");else{l=this.matchCommand_(a.commandName);if(l){c=l.name,l.excludeFromCommandHistory&&s.setText(o),this.parseCommandArgs_(u,a,l);if(l.type=="exToKey"){for(var h=0;h<l.toKeys.length;h++)e.Vim.handleKey(t,l.toKeys[h]);return}if(l.type=="exToEx"){this.processCommand(t,l.toInput);return}}}if(!c){Pt(t,'Not an editor command ":'+
n+'"');return}try{Jt[c](t,a),(!l||!l.possiblyAsync)&&a.callback&&a.callback()}catch(f){throw Pt(t,f),f}},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),n.line!==undefined&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+)/);return r?n.commandName=r[1]:n.commandName=t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return e.getCursor().line;case"$":return e.lastLine();case"'":var r=e.state.vim.marks[t.next()];if(r&&r.find())return r.find().line;throw new Error("Mark not set");default:return t.backUp(1),undefined}},parseCommandArgs_:function(e,t,n){if(e.eol())return;t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,i=et(t.argString).split(r);i.length&&i[0]&&(t.args=i)},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(
r.name.indexOf(e)===0)return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<Vt.length;e++){var t=Vt[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(e,n,r){if(e!=":"&&e.charAt(0)==":"){if(r)throw Error("Mode not supported for ex mappings");var i=e.substring(1);n!=":"&&n.charAt(0)==":"?this.commandMap_[i]={name:i,type:"exToEx",toInput:n.substring(1),user:!0}:this.commandMap_[i]={name:i,type:"exToKey",toKeys:$t(n),user:!0}}else if(n!=":"&&n.charAt(0)==":"){var s={keys:$t(e),type:"keyToEx",exArgs:{input:n.substring(1)},user:!0};r&&(s.context=r),t.unshift(s)}else{var s={keys:$t(e),type:"keyToKey",toKeys:$t(n),user:!0};r&&(s.context=r),t.unshift(s)}},unmap:function(e,n){var r=function(e,t){if(e===t)return!0;if(e==null||t==null)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};if(e!=":"&&e.charAt(0)==":"){if(n)throw Error("Mode not supported for ex mappings");var i=e.substring(1);if(this.commandMap_
[i]&&this.commandMap_[i].user){delete this.commandMap_[i];return}}else{var s=$t(e);for(var o=0;o<t.length;o++)if(r(s,t[o].keys)&&t[o].context===n&&t[o].user){t.splice(o,1);return}}throw Error("No such mapping.")}};var Jt={map:function(e,t,n){var r=t.args;if(!r||r.length<2){e&&Pt(e,"Invalid mapping: "+t.input);return}Kt.map(r[0],r[1],n)},nmap:function(e,t){this.map(e,t,"normal")},vmap:function(e,t){this.map(e,t,"visual")},unmap:function(e,t,n){var r=t.args;if(!r||r.length<1){e&&Pt(e,"No such mapping: "+t.input);return}Kt.unmap(r[0],n)},move:function(e,t){I.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},set:function(e,t){var n=t.args;if(!n||n.length<1){e&&Pt(e,"Invalid mapping: "+t.input);return}var r=n[0].split("="),i=r[0],s=r[1],o=!1;if(i.charAt(i.length-1)=="?"){if(s)throw Error("Trailing characters: "+t.argString);i=i.substring(0,i.length-1),o=!0}s===undefined&&i.substring
(0,2)=="no"&&(i=i.substring(2),s=!1);var u=x[i]&&x[i].type=="boolean";u&&s==undefined&&(s=!0);if(!u&&!s||o){var a=C(i);a===!0||a===!1?Pt(e," "+(a?"":"no")+i):Pt(e,"  "+i+"="+a)}else N(i,s)},registers:function(e,t){var n=t.args,r=M.registerController.registers,i="----------Registers----------<br><br>";if(!n)for(var s in r){var o=r[s].toString();o.length&&(i+='"'+s+"    "+o+"<br>")}else{var s;n=n.join("");for(var u=0;u<n.length;u++){s=n.charAt(u);if(!M.registerController.isValidRegister(s))continue;var a=r[s]||new B;i+='"'+s+"    "+a.toString()+"<br>"}}Pt(e,i)},sort:function(t,r){function a(){if(r.argString){var t=new e.StringStream(r.argString);t.eat("!")&&(i=!0);if(t.eol())return;if(!t.eatSpace())return"Invalid arguments";var n=t.match(/[a-z]+/);if(n){n=n[0],s=n.indexOf("i")!=-1,o=n.indexOf("u")!=-1;var a=n.indexOf("d")!=-1&&1,f=n.indexOf("x")!=-1&&1,l=n.indexOf("o")!=-1&&1;if(a+f+l>1)return"Invalid arguments";u=a&&"decimal"||f&&"hex"||l&&"octal"}t.eatSpace()&&t.match(/\/.*\//)&&"patterns not supported"
}}function w(e,t){if(i){var n;n=e,e=t,t=n}s&&(e=e.toLowerCase(),t=t.toLowerCase());var r=u&&v.exec(e),o=u&&v.exec(t);return r?(r=parseInt((r[1]+r[2]).toLowerCase(),m),o=parseInt((o[1]+o[2]).toLowerCase(),m),r-o):e<t?-1:1}var i,s,o,u,f=a();if(f){Pt(t,f+": "+r.argString);return}var l=r.line||t.firstLine(),c=r.lineEnd||r.line||t.lastLine();if(l==c)return;var h=n(l,0),p=n(c,Y(t,c)),d=t.getRange(h,p).split("\n"),v=u=="decimal"?/(-?)([\d]+)/:u=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:u=="octal"?/([0-7]+)/:null,m=u=="decimal"?10:u=="hex"?16:u=="octal"?8:null,g=[],y=[];if(u)for(var b=0;b<d.length;b++)v.exec(d[b])?g.push(d[b]):y.push(d[b]);else y=d;g.sort(w),y.sort(w),d=i?g.concat(y):y.concat(g);if(o){var E=d,S;d=[];for(var b=0;b<E.length;b++)E[b]!=S&&d.push(E[b]),S=E[b]}t.replaceRange(d.join("\n"),h,p)},global:function(e,t){var n=t.argString;if(!n){Pt(e,"Regular Expression missing from global");return}var r=t.line!==undefined?t.line:e.firstLine(),i=t.lineEnd||t.line||e.lastLine(),s=Lt(n),o=n,u;s.length&&
(o=s[0],u=s.slice(1,s.length).join("/"));if(o)try{It(e,o,!0,!0)}catch(a){Pt(e,"Invalid regex: "+o);return}var f=Ct(e).getQuery(),l=[],c="";for(var h=r;h<=i;h++){var p=f.test(e.getLine(h));p&&(l.push(h+1),c+=e.getLine(h)+"<br>")}if(!u){Pt(e,c);return}var d=0,v=function(){if(d<l.length){var t=l[d]+u;Kt.processCommand(e,t,{callback:v})}d++};v()},substitute:function(e,t){if(!e.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var r=t.argString,i=r?Lt(r):[],s,o="",u,a,f,l=!1,c=!1;if(i.length)s=i[0],o=i[1],o!==undefined&&(C("pcre")?o=_t(o):o=Mt(o),M.lastSubstituteReplacePart=o),u=i[2]?i[2].split(" "):[];else if(r&&r.length){Pt(e,"Substitutions should be of the form :s/pattern/replace/");return}u&&(a=u[0],f=parseInt(u[1]),a&&(a.indexOf("c")!=-1&&(l=!0,a.replace("c","")),a.indexOf("g")!=-1&&(c=!0,a.replace("g","")),s=s+"/"+a));if(s)try{It(e,s,!0,!0)}catch(h){Pt(e,"Invalid regex: "+s);return}o=o||M.lastSubstituteReplacePart
;if(o===undefined){Pt(e,"No previous substitute regular expression");return}var p=Ct(e),d=p.getQuery(),v=t.line!==undefined?t.line:e.getCursor().line,m=t.lineEnd||v;f&&(v=m,m=v+f-1);var g=z(e,n(v,0)),y=e.getSearchCursor(d,g);Qt(e,l,c,v,m,y,d,o,t.callback)},redo:e.commands.redo,undo:e.commands.undo,write:function(t){e.commands.save?e.commands.save(t):t.save()},nohlsearch:function(e){zt(e)},delmarks:function(t,n){if(!n.argString||!et(n.argString)){Pt(t,"Argument required");return}var r=t.state.vim,i=new e.StringStream(et(n.argString));while(!i.eol()){i.eatSpace();var s=i.pos;if(!i.match(/[a-zA-Z]/,!1)){Pt(t,"Invalid argument: "+n.argString.substring(s));return}var o=i.next();if(i.match("-",!0)){if(!i.match(/[a-zA-Z]/,!1)){Pt(t,"Invalid argument: "+n.argString.substring(s));return}var u=o,a=i.next();if(!(g(u)&&g(a)||w(u)&&w(a))){Pt(t,"Invalid argument: "+u+"-");return}var f=u.charCodeAt(0),l=a.charCodeAt(0);if(f>=l){Pt(t,"Invalid argument: "+n.argString.substring(s));return}for(var c=0;c<=
l-f;c++){var h=String.fromCharCode(f+c);delete r.marks[h]}}else delete r.marks[o]}}},Kt=new r.ExCommandDispatcher;return e.keyMap.vim=Gt(),T("enableInsertModeEscKeys",!1,"boolean"),T("insertModeEscKeys","kj","string"),T("insertModeEscKeysTimeout",200,"number"),e.keyMap["vim-insert"]={Esc:Yt,"Ctrl-[":Yt,"Ctrl-C":Yt,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(t){var n=e.commands.newlineAndIndentContinueComment||e.commands.newlineAndIndent;n(t)},"'i'":Zt("i"),"'j'":Zt("j"),"'k'":Zt("k"),fallthrough:["default"]},e.keyMap["await-second"]={"'i'":en("i"),"'j'":en("j"),"'k'":en("k"),fallthrough:["vim-insert"]},e.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"]},_(),D};e.Vim=r()}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/xml/xml",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("xml",function(t,n){function l(e,t){function n(n)
{return t.tokenize=n,n(e,t)}var r=e.next();if(r=="<")return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(p("atom","]]>")):null:e.match("--")?n(p("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(d(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=p("meta","?>"),"meta"):(a=e.eat("/")?"closeTag":"openTag",t.tokenize=c,"tag bracket");if(r=="&"){var i;return e.eat("#")?e.eat("x")?i=e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):i=e.eatWhile(/[\d]/)&&e.eat(";"):i=e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),i?"atom":"error"}return e.eatWhile(/[^&<]/),null}function c(e,t){var n=e.next();if(n==">"||n=="/"&&e.eat(">"))return t.tokenize=l,a=n==">"?"endTag":"selfcloseTag","tag bracket";if(n=="=")return a="equals",null;if(n=="<"){t.tokenize=l,t.state=y,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=h(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(e){
var t=function(t,n){while(!t.eol())if(t.next()==e){n.tokenize=c;break}return"string"};return t.isInAttribute=!0,t}function p(e,t){return function(n,r){while(!n.eol()){if(n.match(t)){r.tokenize=l;break}n.next()}return e}}function d(e){return function(t,n){var r;while((r=t.next())!=null){if(r=="<")return n.tokenize=d(e+1),n.tokenize(t,n);if(r==">"){if(e==1){n.tokenize=l;break}return n.tokenize=d(e-1),n.tokenize(t,n)}}return"meta"}}function v(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n;if(o.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)this.noIndent=!0}function m(e){e.context&&(e.context=e.context.prev)}function g(e,t){var n;for(;;){if(!e.context)return;n=e.context.tagName;if(!o.contextGrabbers.hasOwnProperty(n)||!o.contextGrabbers[n].hasOwnProperty(t))return;m(e)}}function y(e,t,n){return e=="openTag"?(n.tagStart=t.column(),b):e=="closeTag"?w:y}function b(e,t,n){return e=="word"?(n.tagName=t.current(),f="tag",x):(f="error",b)}function w
(e,t,n){if(e=="word"){var r=t.current();return n.context&&n.context.tagName!=r&&o.implicitlyClosed.hasOwnProperty(n.context.tagName)&&m(n),n.context&&n.context.tagName==r?(f="tag",E):(f="tag error",S)}return f="error",S}function E(e,t,n){return e!="endTag"?(f="error",E):(m(n),y)}function S(e,t,n){return f="error",E(e,t,n)}function x(e,t,n){if(e=="word")return f="attribute",T;if(e=="endTag"||e=="selfcloseTag"){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,e=="selfcloseTag"||o.autoSelfClosers.hasOwnProperty(r)?g(n,r):(g(n,r),n.context=new v(n,r,i==n.indented)),y}return f="error",x}function T(e,t,n){return e=="equals"?N:(o.allowMissing||(f="error"),x(e,t,n))}function N(e,t,n){return e=="string"?C:e=="word"&&o.allowUnquoted?(f="string",x):(f="error",x(e,t,n))}function C(e,t,n){return e=="string"?C:x(e,t,n)}var r=t.indentUnit,i=n.multilineTagIndentFactor||1,s=n.multilineTagIndentPastTag;s==null&&(s=!0);var o=n.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0
,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},u=n.alignCDATA,a,f;return{startState:function(){return{tokenize:l,state:y,indented:0,tagName:null,tagStart:null,context:
null}},token:function(e,t){!t.tagName&&e.sol()&&(t.indented=e.indentation());if(e.eatSpace())return null;a=null;var n=t.tokenize(e,t);return(n||a)&&n!="comment"&&(f=null,t.state=t.state(a||n,e,t),f&&(n=f=="error"?n+" error":f)),n},indent:function(t,n,a){var f=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+r;if(f&&f.noIndent)return e.Pass;if(t.tokenize!=c&&t.tokenize!=l)return a?a.match(/^(\s*)/)[0].length:0;if(t.tagName)return s?t.tagStart+t.tagName.length+2:t.tagStart+r*i;if(u&&/<!\[CDATA\[/.test(n))return 0;var h=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(h&&h[1])while(f){if(f.tagName==h[2]){f=f.prev;break}if(!o.implicitlyClosed.hasOwnProperty(f.tagName))break;f=f.prev}else if(h)while(f){var p=o.contextGrabbers[f.tagName];if(!p||!p.hasOwnProperty(h[2]))break;f=f.prev}while(f&&!f.startOfLine)f=f.prev;return f?f.indent+r:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:n.htmlMode?"html":"xml",helperType
:n.htmlMode?"html":"xml"}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror",require("../xml/xml"))):typeof define=="function"&&define.amd?define("cm/mode/markdown/markdown",["../../lib/codemirror","../xml/xml"],e):e(CodeMirror)}(function(e){e.defineMode("markdown",function(t,n){function O(e,t,n){return t.f=t.inline=n,n(e,t)}function M(e,t,n){return t.f=t.block=n,n(e,t)}function _(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,!r&&e.f==P&&(e.f=F,e.block=D),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.thisLineHasContent=!1,null}function D(e,t){var r=e.sol(),i=t.list!==!1;t.list!==!1&&t.indentationDiff>=0?(t.indentationDiff<4&&(t.indentation-=t.indentationDiff),t.list=null):t.list!==!1&&t.indentation>0?(t.list=null,t.listDepth=Math.floor(t.indentation/4)):t.list!==!1&&(t.list=!1
,t.listDepth=0);var s=null;if(t.indentationDiff>=4)return t.indentation-=4,e.skipToEnd(),f;if(e.eatSpace())return null;if(s=e.match(k))return t.header=s[0].length<=6?s[0].length:6,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,B(t);if(t.prevLineHasContent&&(s=e.match(L)))return t.header=s[0].charAt(0)=="="?1:2,n.highlightFormatting&&(t.formatting="header"),t.f=t.inline,B(t);if(e.eat(">"))return t.indentation++,t.quote=r?1:t.quote+1,n.highlightFormatting&&(t.formatting="quote"),e.eatSpace(),B(t);if(e.peek()==="[")return O(e,t,U);if(e.match(x,!0))return d;if((!t.prevLineHasContent||i)&&(e.match(T,!1)||e.match(N,!1))){var u=null;return e.match(T,!0)?u="ul":(e.match(N,!0),u="ol"),t.indentation+=4,t.list=!0,t.listDepth++,n.taskLists&&e.match(C,!1)&&(t.taskList=!0),t.f=t.inline,n.highlightFormatting&&(t.formatting=["list","list-"+u]),B(t)}return n.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0)?(t.localMode=o(RegExp.$1),t.localMode&&(t.localState=t.localMode.startState()),M(e,t,H),
n.highlightFormatting&&(t.formatting="code-block"),t.code=!0,B(t)):O(e,t,t.inline)}function P(e,t){var n=i.token(e,t.htmlState);if(r&&t.htmlState.tagStart===null&&!t.htmlState.context||t.md_inside&&e.current().indexOf(">")>-1)t.f=F,t.block=D,t.htmlState=null;return n}function H(e,t){if(e.sol()&&e.match(/^```/,!0)){t.localMode=t.localState=null,t.f=F,t.block=D,n.highlightFormatting&&(t.formatting="code-block"),t.code=!0;var r=B(t);return t.code=!1,r}return t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),f)}function B(e){var t=[];if(e.formatting){t.push(m),typeof e.formatting=="string"&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(m+"-"+e.formatting[r]),e.formatting[r]==="header"&&t.push(m+"-"+e.formatting[r]+"-"+e.header),e.formatting[r]==="quote"&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(m+"-"+e.formatting[r]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.
push("property"),t.length?t.join(" "):null;if(e.linkHref)return t.push(w),t.length?t.join(" "):null;e.strong&&t.push(S),e.em&&t.push(E),e.linkText&&t.push(b),e.code&&t.push(f),e.header&&(t.push(a),t.push(a+"-"+e.header)),e.quote&&(t.push(l),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(l+"-"+e.quote):t.push(l+"-"+n.maxBlockquoteDepth));if(e.list!==!1){var i=(e.listDepth-1)%3;i?i===1?t.push(h):t.push(p):t.push(c)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function j(e,t){return e.match(A,!0)?B(t):undefined}function F(t,r){var s=r.text(t,r);if(typeof s!="undefined")return s;if(r.list)return r.list=null,B(r);if(r.taskList){var o=t.match(C,!0)[1]!=="x";return o?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,B(r)}r.taskOpen=!1,r.taskClosed=!1;if(r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"
),B(r);var a=t.sol(),f=t.next();if(r.escape)return r.escape=!1,B(r);if(f==="\\")return n.highlightFormatting&&(r.formatting="escape"),r.escape=!0,B(r);if(r.linkTitle){r.linkTitle=!1;var l=f;f==="("&&(l=")"),l=(l+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var c="^\\s*(?:[^"+l+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(c),!0))return w}if(f==="`"){var h=r.formatting;n.highlightFormatting&&(r.formatting="code");var p=B(r),d=t.pos;t.eatWhile("`");var m=1+t.pos-d;return r.code?m===u?(r.code=!1,p):(r.formatting=h,B(r)):(u=m,r.code=!0,B(r))}if(r.code)return B(r);if(f==="!"&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return t.match(/\[[^\]]*\]/),r.inline=r.f=q,v;if(f==="["&&t.match(/.*\](\(| ?\[)/,!1))return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),B(r);if(f==="]"&&r.linkText){n.highlightFormatting&&(r.formatting="link");var b=B(r);return r.linkText=!1,r.inline=r.f=q,b}if(f==="<"&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=I,n.highlightFormatting&&(r.formatting="link"
);var b=B(r);return b?b+=" ":b="",b+g}if(f==="<"&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=I,n.highlightFormatting&&(r.formatting="link");var b=B(r);return b?b+=" ":b="",b+y}if(f==="<"&&t.match(/^\w/,!1)){if(t.string.indexOf(">")!=-1){var E=t.string.substring(1,t.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(E)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(i),M(t,r,P)}if(f==="<"&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var S=!1;if(!n.underscoresBreakWords&&f==="_"&&t.peek()!=="_"&&t.match(/(\w)/,!1)){var x=t.pos-2;if(x>=0){var T=t.string.charAt(x);T!=="_"&&T.match(/(\w)/,!1)&&(S=!0)}}if(f==="*"||f==="_"&&!S){if(!a||t.peek()!==" "){if(r.strong===f&&t.eat(f)){n.highlightFormatting&&(r.formatting="strong");var p=B(r);return r.strong=!1,p}if(!r.strong&&t.eat(f))return r.strong=f,n.highlightFormatting&&(r.formatting="strong"),B(r);if(r.em===f){n.highlightFormatting&&(r.formatting="em");var p=B(r);return r.em=!1,p}if(!r.em)return r.em=f
,n.highlightFormatting&&(r.formatting="em"),B(r)}}else if(f===" ")if(t.eat("*")||t.eat("_")){if(t.peek()===" ")return B(r);t.backUp(1)}return f===" "&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),B(r)}function I(e,t){var r=e.next();if(r===">"){t.f=t.inline=F,n.highlightFormatting&&(t.formatting="link");var i=B(t);return i?i+=" ":i="",i+g}return e.match(/^[^>]+/,!0),g}function q(e,t){if(e.eatSpace())return null;var r=e.next();return r==="("||r==="["?(t.f=t.inline=R(r==="("?")":"]"),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,B(t)):"error"}function R(e){return function(t,r){var i=t.next();if(i===e){r.f=r.inline=F,n.highlightFormatting&&(r.formatting="link-string");var s=B(r);return r.linkHref=!1,s}return t.match(V(e),!0)&&t.backUp(1),r.linkHref=!0,B(r)}}function U(e,t){return e.match(/^[^\]]*\]:/,!1)?(t.f=z,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,B(t)):O(e,t,F)}function z(e,t){if(e.match(/^\]:/,!0)){t.
f=t.inline=W,n.highlightFormatting&&(t.formatting="link");var r=B(t);return t.linkText=!1,r}return e.match(/^[^\]]+/,!0),b}function W(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),e.peek()===undefined?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=F,w)}function V(e){return X[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),X[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),X[e]}var r=e.modes.hasOwnProperty("xml"),i=e.getMode(t,r?{name:"xml",htmlMode:!0}:"text/plain"),s={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},o=function(){var n,r={},i={},o,u=[];for(var a in e.modes)e.modes.propertyIsEnumerable(a)&&u.push(a);for(n=0;n<u.length;n++)r[u[n]]=u[n];var f=[];for(var a in e.mimeModes)e.mimeModes.propertyIsEnumerable(a)&&f.push({mime:a,mode:e.mimeModes[a]});for(n=0;n<f.length
;n++)o=f[n].mime,i[o]=f[n].mime;for(var l in s)if(s[l]in r||s[l]in i)r[l]=s[l];return function(n){return r[n]?e.getMode(t,r[n]):null}}();n.highlightFormatting===undefined&&(n.highlightFormatting=!1),n.maxBlockquoteDepth===undefined&&(n.maxBlockquoteDepth=0),n.underscoresBreakWords===undefined&&(n.underscoresBreakWords=!0),n.fencedCodeBlocks===undefined&&(n.fencedCodeBlocks=!1),n.taskLists===undefined&&(n.taskLists=!1);var u=0,a="header",f="comment",l="quote",c="variable-2",h="variable-3",p="keyword",d="hr",v="tag",m="formatting",g="link",y="link",b="link",w="string",E="em",S="strong",x=/^([*\-=_])(?:\s*\1){2,}\s*$/,T=/^[*\-+]\s+/,N=/^[0-9]+\.\s+/,C=/^\[(x| )\](?=\s)/,k=/^#+/,L=/^(?:\={1,}|-{1,})$/,A=/^[^#!\[\]*_\\<>` "'(]+/,X=[],$={startState:function(){return{f:D,prevLineHasContent:!1,thisLineHasContent:!1,block:D,htmlState:null,indentation:0,inline:F,text:j,escape:!1,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace
:0,trailingSpaceNewLine:!1}},copyState:function(t){return{f:t.f,prevLineHasContent:t.prevLineHasContent,thisLineHasContent:t.thisLineHasContent,block:t.block,htmlState:t.htmlState&&e.copyState(i,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,escape:!1,formatting:!1,linkTitle:t.linkTitle,em:t.em,strong:t.strong,header:t.header,taskList:t.taskList,list:t.list,listDepth:t.listDepth,quote:t.quote,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside}},token:function(e,t){t.formatting=!1;if(e.sol()){var n=e.match(/^\s*$/,!0)||t.header;t.header=0;if(n)return t.prevLineHasContent=!1,_(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.escape=!1,t.taskList=!1,t.code=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,i=Math.floor((r-t.indentation)/4)*4;i>4&&(i=4);var s=
t.indentation+i;t.indentationDiff=s-t.indentation,t.indentation=s;if(r>0)return null}var o=t.f(e,t);return e.start==e.pos?this.token(e,t):o},innerMode:function(e){return e.block==P?{state:e.htmlState,mode:i}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:$}},blankLine:_,getType:B,fold:"markdown"};return $},"xml"),e.defineMIME("text/x-markdown","markdown")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/addon/mode/overlay",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.overlayMode=function(t,n,r){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,lineSeen:null}},copyState:function(r){return{base:e.copyState(t,r.base),overlay:e.copyState(n,r.overlay),basePos:r.basePos,baseCur:null,overlayPos:r.overlayPos,overlayCur:null}},token:function(e,i){if(e.sol()||e.string!=i.lineSeen||Math.min
(i.basePos,i.overlayPos)<e.start)i.lineSeen=e.string,i.basePos=i.overlayPos=e.start;return e.start==i.basePos&&(i.baseCur=t.token(e,i.base),i.basePos=e.pos),e.start==i.overlayPos&&(e.pos=e.start,i.overlayCur=n.token(e,i.overlay),i.overlayPos=e.pos),e.pos=Math.min(i.basePos,i.overlayPos),i.overlayCur==null?i.baseCur:i.baseCur!=null&&i.overlay.combineTokens||r&&i.overlay.combineTokens==null?i.baseCur+" "+i.overlayCur:i.overlayCur},indent:t.indent&&function(e,n){return t.indent(e.base,n)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){t.blankLine&&t.blankLine(e.base),n.blankLine&&n.blankLine(e.overlay)}}}}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("../markdown/markdown"),require("../../addon/mode/overlay")):typeof define=="function"&&define.amd?define("cm/mode/gfm/gfm",["../../lib/codemirror","../markdown/markdown","../../addon/mode/overlay"],e):e(CodeMirror)}(function(e){
e.defineMode("gfm",function(t,n){function i(e){return e.code=!1,null}var r=0,s={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){t.combineTokens=null;if(t.codeBlock)return e.match(/^```/)?(t.codeBlock=!1,null):(e.skipToEnd(),null);e.sol()&&(t.code=!1);if(e.sol()&&e.match(/^```/))return e.skipToEnd(),t.codeBlock=!0,null;if(e.peek()==="`"){e.next();var n=e.pos;e.eatWhile("`");var i=1+e.pos-n;return t.code?i===r&&(t.code=!1):(r=i,t.code=!0),null}if(t.code)return e.next(),null;if(e.eatSpace())return t.ateSpace=!0,null;if(e.sol()||t.ateSpace){t.ateSpace=!1;if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?:[a-f0-9]{7,40}\b)/))return t.combineTokens=!0,"link";if(e.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return t.combineTokens=!0,"link"}return e.match(/^((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/i
)&&e.string.slice(e.start-2,e.start)!="]("?(t.combineTokens=!0,"link"):(e.next(),null)},blankLine:i},o={underscoresBreakWords:!1,taskLists:!0,fencedCodeBlocks:!0};for(var u in n)o[u]=n[u];return o.name="markdown",e.defineMIME("gfmBase",o),e.overlayMode(e.getMode(t,"gfmBase"),s)},"markdown")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/lua/lua",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("lua",function(e,t){function r(e){return new RegExp("^(?:"+e.join("|")+")","i")}function i(e){return new RegExp("^(?:"+e.join("|")+")$","i")}function c(e){var t=0;while(e.eat("="))++t;return e.eat("["),t}function h(e,t){var n=e.next();return n=="-"&&e.eat("-")?e.eat("[")&&e.eat("[")?(t.cur=p(c(e),"comment"))(e,t):(e.skipToEnd(),"comment"):n=='"'||n=="'"?(t.cur=d(n))(e,t):n=="["&&/[\[=]/.test(e.peek())?(t.cur=p(c(e),"string"))(e,t):/\d/.test(n)?(e.eatWhile(/[\w.%]/),"number")
:/[\w_]/.test(n)?(e.eatWhile(/[\w\\\-_.]/),"variable"):null}function p(e,t){return function(n,r){var i=null,s;while((s=n.next())!=null)if(i==null)s=="]"&&(i=0);else if(s=="=")++i;else{if(s=="]"&&i==e){r.cur=h;break}i=null}return t}}function d(e){return function(t,n){var r=!1,i;while((i=t.next())!=null){if(i==e&&!r)break;r=!r&&i=="\\"}return r||(n.cur=h),"string"}}var n=e.indentUnit,s=i(t.specials||[]),o=i(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable"
,"debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match"
,"string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]),u=i(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]),a=i(["function","if","repeat","do","\\(","{"]),f=i(["end","until","\\)","}"]),l=r(["end","until","\\)","}","else","elseif"]);return{startState:function(e){return{basecol:e||0,indentDepth:0,cur:h}},token:function(e,t){if(e.eatSpace())return null;var n=t.cur(e,t),r=e.current();return n=="variable"&&(u.test(r)?n="keyword":o.test(r)?n="builtin":s.test(r)&&(n="variable-2")),n!="comment"&&n!="string"&&(a.test(r)?++t.indentDepth:f.test(r)&&--t.indentDepth),n},indent:function(e,t){var r=l.test(t);return e.basecol+n*(e.indentDepth-(r?1:0))},lineComment:"--",blockCommentStart:"--[[",blockCommentEnd:"]]"}}),e.defineMIME("text/x-lua","lua")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"
)):typeof define=="function"&&define.amd?define("cm/mode/javascript/javascript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("javascript",function(t,n){function h(e){var t=!1,n,r=!1;while((n=e.next())!=null){if(!t){if(n=="/"&&!r)return;n=="["?r=!0:r&&n=="]"&&(r=!1)}t=!t&&n=="\\"}}function v(e,t,n){return p=e,d=n,t}function m(e,t){var n=e.next();if(n=='"'||n=="'")return t.tokenize=g(n),t.tokenize(e,t);if(n=="."&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return v("number","number");if(n=="."&&e.match(".."))return v("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return v(n);if(n=="="&&e.eat(">"))return v("=>","operator");if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),v("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),v("number","number");if(n=="/")return e.eat("*")?(t.tokenize=y,y(e,t)):e.eat("/")?(e.skipToEnd(),v("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||t.lastType=="sof"||/^[\[{}\(,;:]$/.test(t.lastType
)?(h(e),e.eatWhile(/[gimy]/),v("regexp","string-2")):(e.eatWhile(l),v("operator","operator",e.current()));if(n=="`")return t.tokenize=b,b(e,t);if(n=="#")return e.skipToEnd(),v("error","error");if(l.test(n))return e.eatWhile(l),v("operator","operator",e.current());if(a.test(n)){e.eatWhile(a);var r=e.current(),i=f.propertyIsEnumerable(r)&&f[r];return i&&t.lastType!="."?v(i.type,i.style,r):v("variable","variable",r)}}function g(e){return function(t,n){var r=!1,i;if(s&&t.peek()=="@"&&t.match(c))return n.tokenize=m,v("jsonld-keyword","meta");while((i=t.next())!=null){if(i==e&&!r)break;r=!r&&i=="\\"}return r||(n.tokenize=m),v("string","string")}}function y(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=m;break}n=r=="*"}return v("comment","comment")}function b(e,t){var n=!1,r;while((r=e.next())!=null){if(!n&&(r=="`"||r=="$"&&e.eat("{"))){t.tokenize=m;break}n=!n&&r=="\\"}return v("quasi","string-2",e.current())}function E(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf
("=>",e.start);if(n<0)return;var r=0,i=!1;for(var s=n-1;s>=0;--s){var o=e.string.charAt(s),u=w.indexOf(o);if(u>=0&&u<3){if(!r){++s;break}if(--r==0)break}else if(u>=3&&u<6)++r;else if(a.test(o))i=!0;else if(i&&!r){++s;break}}i&&!r&&(t.fatArrowAt=s)}function x(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function T(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function N(e,t,n,r,i){var s=e.cc;C.state=e,C.stream=i,C.marked=null,C.cc=s,C.style=t,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=s.length?s.pop():o?j:B;if(u(n,r)){while(s.length&&s[s.length-1].lex)s.pop()();return C.marked?C.marked:n=="variable"&&T(e,r)?"variable-2":t}}}function k(){for(var e=arguments.length-1;e>=0;e--)C.cc.push(arguments[e])}function L(){return k.apply(null,arguments),!0}function A(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0
;return!1}var r=C.state;if(r.context){C.marked="def";if(t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function M(){C.state.context={prev:C.state.context,vars:C.state.localVars},C.state.localVars=O}function _(){C.state.localVars=C.state.context.vars,C.state.context=C.state.context.prev}function D(e,t){var n=function(){var n=C.state,r=n.indented;if(n.lexical.type=="stat")r=n.lexical.indented;else for(var i=n.lexical;i&&i.type==")"&&i.align;i=i.prev)r=i.indented;n.lexical=new x(r,C.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function P(){var e=C.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function H(e){function t(n){return n==e?L():e==";"?k():L(t)}return t}function B(e,t){return e=="var"?L(D("vardef",t.length),it,H(";"),P):e=="keyword a"?L(D("form"),j,B,P):e=="keyword b"?L(D("form"),B,P):e=="{"?L(D("}"),tt,P):e==";"?L():e=="if"?
(C.state.lexical.info=="else"&&C.state.cc[C.state.cc.length-1]==P&&C.state.cc.pop()(),L(D("form"),j,B,P,ft)):e=="function"?L(vt):e=="for"?L(D("form"),lt,B,P):e=="variable"?L(D("stat"),J):e=="switch"?L(D("form"),j,D("}","switch"),H("{"),tt,P,P):e=="case"?L(j,H(":")):e=="default"?L(H(":")):e=="catch"?L(D("form"),M,H("("),mt,H(")"),B,P,_):e=="module"?L(D("form"),M,Et,_,P):e=="class"?L(D("form"),gt,P):e=="export"?L(D("form"),St,P):e=="import"?L(D("form"),xt,P):k(D("stat"),j,H(";"),P)}function j(e){return I(e,!1)}function F(e){return I(e,!0)}function I(e,t){if(C.state.fatArrowAt==C.stream.start){var n=t?$:V;if(e=="(")return L(M,D(")"),Z(st,")"),P,H("=>"),n,_);if(e=="variable")return k(M,st,H("=>"),n,_)}var r=t?z:U;return S.hasOwnProperty(e)?L(r):e=="function"?L(vt,r):e=="keyword c"?L(t?R:q):e=="("?L(D(")"),q,Lt,H(")"),P,r):e=="operator"||e=="spread"?L(t?F:j):e=="["?L(D("]"),Ct,P,r):e=="{"?et(Q,"}",null,r):e=="quasi"?k(W,r):L()}function q(e){return e.match(/[;\}\)\],]/)?k():k(j)}function R(e)
{return e.match(/[;\}\)\],]/)?k():k(F)}function U(e,t){return e==","?L(j):z(e,t,!1)}function z(e,t,n){var r=n==0?U:z,i=n==0?j:F;if(t=="=>")return L(M,n?$:V,_);if(e=="operator")return/\+\+|--/.test(t)?L(r):t=="?"?L(j,H(":"),i):L(i);if(e=="quasi")return k(W,r);if(e==";")return;if(e=="(")return et(F,")","call",r);if(e==".")return L(K,r);if(e=="[")return L(D("]"),q,H("]"),P,r)}function W(e,t){return e!="quasi"?k():t.slice(t.length-2)!="${"?L(W):L(j,X)}function X(e){if(e=="}")return C.marked="string-2",C.state.tokenize=b,L(W)}function V(e){return E(C.stream,C.state),e=="{"?k(B):k(j)}function $(e){return E(C.stream,C.state),e=="{"?k(B):k(F)}function J(e){return e==":"?L(P,B):k(U,H(";"),P)}function K(e){if(e=="variable")return C.marked="property",L()}function Q(e,t){if(e=="variable"||C.style=="keyword")return C.marked="property",t=="get"||t=="set"?L(G):L(Y);if(e=="number"||e=="string")return C.marked=s?"property":C.style+" property",L(Y);if(e=="jsonld-keyword")return L(Y);if(e=="[")return L(j,
H("]"),Y)}function G(e){return e!="variable"?k(Y):(C.marked="property",L(vt))}function Y(e){if(e==":")return L(F);if(e=="(")return k(vt)}function Z(e,t){function n(r){if(r==","){var i=C.state.lexical;return i.info=="call"&&(i.pos=(i.pos||0)+1),L(e,n)}return r==t?L():L(H(t))}return function(r){return r==t?L():k(e,n)}}function et(e,t,n){for(var r=3;r<arguments.length;r++)C.cc.push(arguments[r]);return L(D(t,n),Z(e,t),P)}function tt(e){return e=="}"?L():k(B,tt)}function nt(e){if(u&&e==":")return L(rt)}function rt(e){if(e=="variable")return C.marked="variable-3",L()}function it(){return k(st,nt,ut,at)}function st(e,t){if(e=="variable")return A(t),L();if(e=="[")return et(st,"]");if(e=="{")return et(ot,"}")}function ot(e,t){return e=="variable"&&!C.stream.match(/^\s*:/,!1)?(A(t),L(ut)):(e=="variable"&&(C.marked="property"),L(H(":"),st,ut))}function ut(e,t){if(t=="=")return L(F)}function at(e){if(e==",")return L(it)}function ft(e,t){if(e=="keyword b"&&t=="else")return L(D("form","else"),B,P)}function lt
(e){if(e=="(")return L(D(")"),ct,H(")"),P)}function ct(e){return e=="var"?L(it,H(";"),pt):e==";"?L(pt):e=="variable"?L(ht):k(j,H(";"),pt)}function ht(e,t){return t=="in"||t=="of"?(C.marked="keyword",L(j)):L(U,pt)}function pt(e,t){return e==";"?L(dt):t=="in"||t=="of"?(C.marked="keyword",L(j)):k(j,H(";"),dt)}function dt(e){e!=")"&&L(j)}function vt(e,t){if(t=="*")return C.marked="keyword",L(vt);if(e=="variable")return A(t),L(vt);if(e=="(")return L(M,D(")"),Z(mt,")"),P,B,_)}function mt(e){return e=="spread"?L(mt):k(st,nt)}function gt(e,t){if(e=="variable")return A(t),L(yt)}function yt(e,t){if(t=="extends")return L(j,yt);if(e=="{")return L(D("}"),bt,P)}function bt(e,t){if(e=="variable"||C.style=="keyword")return C.marked="property",t=="get"||t=="set"?L(wt,vt,bt):L(vt,bt);if(t=="*")return C.marked="keyword",L(bt);if(e==";")return L(bt);if(e=="}")return L()}function wt(e){return e!="variable"?k():(C.marked="property",L())}function Et(e,t){if(e=="string")return L(B);if(e=="variable")return A(t)
,L(Nt)}function St(e,t){return t=="*"?(C.marked="keyword",L(Nt,H(";"))):t=="default"?(C.marked="keyword",L(j,H(";"))):k(B)}function xt(e){return e=="string"?L():k(Tt,Nt)}function Tt(e,t){return e=="{"?et(Tt,"}"):(e=="variable"&&A(t),L())}function Nt(e,t){if(t=="from")return C.marked="keyword",L(j)}function Ct(e){return e=="]"?L():k(F,kt)}function kt(e){return e=="for"?k(Lt,H("]")):e==","?L(Z(F,"]")):k(Z(F,"]"))}function Lt(e){if(e=="for")return L(lt,Lt);if(e=="if")return L(j,Lt)}var r=t.indentUnit,i=n.statementIndent,s=n.jsonld,o=n.json||s,u=n.typescript,a=n.wordCharacters||/[\w$]/,f=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),s={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"debugger":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch"
:e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":s,"false":s,"null":s,"undefined":s,NaN:s,Infinity:s,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),yield:r,"export":e("export"),"import":e("import"),"extends":r};if(u){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:a,number:a,bool:a,any:a};for(var l in f)o[l]=f[l]}return o}(),l=/[+\-*&%=<>!?|~^]/,c=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,p,d,w="([{}])",S={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},C={state:null,column:null,marked:null,cc:null},O={name:"this",next:{name:"arguments"}};return P.lex=!0,{startState:function(e){var t={tokenize:m,lastType:"sof",cc:[],lexical:new x((e||0)-r,0,"block",!1),localVars:n.localVars
,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&typeof n.globalVars=="object"&&(t.globalVars=n.globalVars),t},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),E(e,t));if(t.tokenize!=y&&e.eatSpace())return null;var n=t.tokenize(e,t);return p=="comment"?n:(t.lastType=p!="operator"||d!="++"&&d!="--"?p:"incdec",N(t,n,p,d,e))},indent:function(t,s){if(t.tokenize==y)return e.Pass;if(t.tokenize!=m)return 0;var o=s&&s.charAt(0),u=t.lexical;if(!/^\s*else\b/.test(s))for(var a=t.cc.length-1;a>=0;--a){var f=t.cc[a];if(f==P)u=u.prev;else if(f!=ft)break}u.type=="stat"&&o=="}"&&(u=u.prev),i&&u.type==")"&&u.prev.type=="stat"&&(u=u.prev);var l=u.type,c=o==l;return l=="vardef"?u.indented+(t.lastType=="operator"||t.lastType==","?u.info+1:0):l=="form"&&o=="{"?u.indented:l=="form"?u.indented+r:l=="stat"?u.indented+(t.lastType=="operator"||t.lastType==","?i||r:0):u.info=="switch"&&!c&&n.doubleIndentSwitch!=0?u.indented+(/^(?:case|default)\b/
.test(s)?r:2*r):u.align?u.column+(c?0:1):u.indented+(c?0:r)},electricChars:":{}",blockCommentStart:o?null:"/*",blockCommentEnd:o?null:"*/",lineComment:o?null:"//",fold:"brace",helperType:o?"json":"javascript",jsonldMode:s,jsonMode:o}}),e.registerHelper("wordChars","javascript",/[\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/x-javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?
define("cm/mode/css/css",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function g(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=null;break}n=r=="*"}return["comment","comment"]}function y(e,t){return e.skipTo("-->")?(e.match("-->"),t.tokenize=null):e.skipToEnd(),["comment","comment"]}e.defineMode("css",function(t,n){function v(e,t){return p=t,e}function m(e,t){var n=e.next();if(i[n]){var r=i[n](e,t);if(r!==!1)return r}if(n=="@")return e.eatWhile(/[\w\\\-]/),v("def",e.current());if(n=="="||(n=="~"||n=="|")&&e.eat("="))return v(null,"compare");if(n=='"'||n=="'")return t.tokenize=g(n),t.tokenize(e,t);if(n=="#")return e.eatWhile(/[\w\\\-]/),v("atom","hash");if(n=="!")return e.match(/^\s*\w*/),v("keyword","important");if(/\d/.test(n)||n=="."&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),v("number","unit");if(n!=="-")return/[,+>*\/]/.test(n)?v(null,"select-op"):n=="."&&e.match(/^-?[_a-z][_a-z0-9-]*/i
)?v("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(n)?v(null,n):n=="u"&&e.match("rl(")?(e.backUp(1),t.tokenize=y,v("property","word")):/[\w\\\-]/.test(n)?(e.eatWhile(/[\w\\\-]/),v("property","word")):v(null,null);if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),v("number","unit");if(e.match(/^\w+-/))return v("meta","meta")}function g(e){return function(t,n){var r=!1,i;while((i=t.next())!=null){if(i==e&&!r){e==")"&&t.backUp(1);break}r=!r&&i=="\\"}if(i==e||!r&&e!=")")n.tokenize=null;return v("string","string")}}function y(e,t){return e.next(),e.match(/\s*[\"\')]/,!1)?t.tokenize=null:t.tokenize=g(")"),v(null,"(")}function b(e,t,n){this.type=e,this.indent=t,this.prev=n}function w(e,t,n){return e.context=new b(n,t.indentation()+r,e.context),n}function E(e){return e.context=e.context.prev,e.context.type}function S(e,t,n){return N[n.context.type](e,t,n)}function x(e,t,n,r){for(var i=r||1;i>0;i--)n.context=n.context.prev;return S(e,t,n)}function T(e){var t=e.current().toLowerCase();l.hasOwnProperty
(t)?d="atom":f.hasOwnProperty(t)?d="keyword":d="variable"}n.propertyKeywords||(n=e.resolveMode("text/css"));var r=t.indentUnit,i=n.tokenHooks,s=n.mediaTypes||{},o=n.mediaFeatures||{},u=n.propertyKeywords||{},a=n.nonStandardPropertyKeywords||{},f=n.colorKeywords||{},l=n.valueKeywords||{},c=n.fontProperties||{},h=n.allowNested,p,d,N={};return N.top=function(e,t,n){if(e=="{")return w(n,t,"block");if(e=="}"&&n.context.prev)return E(n);if(e=="@media")return w(n,t,"media");if(e=="@font-face")return"font_face_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(e))return"keyframes";if(e&&e.charAt(0)=="@")return w(n,t,"at");if(e=="hash")d="builtin";else if(e=="word")d="tag";else{if(e=="variable-definition")return"maybeprop";if(e=="interpolation")return w(n,t,"interpolation");if(e==":")return"pseudo";if(h&&e=="(")return w(n,t,"parens")}return n.context.type},N.block=function(e,t,n){if(e=="word"){var r=t.current().toLowerCase();return u.hasOwnProperty(r)?(d="property","maybeprop"):a.hasOwnProperty
(r)?(d="string-2","maybeprop"):h?(d=t.match(/^\s*:/,!1)?"property":"tag","block"):(d+=" error","maybeprop")}return e=="meta"?"block":!!h||e!="hash"&&e!="qualifier"?N.top(e,t,n):(d="error","block")},N.maybeprop=function(e,t,n){return e==":"?w(n,t,"prop"):S(e,t,n)},N.prop=function(e,t,n){if(e==";")return E(n);if(e=="{"&&h)return w(n,t,"propBlock");if(e=="}"||e=="{")return x(e,t,n);if(e=="(")return w(n,t,"parens");if(e=="hash"&&!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t.current()))d+=" error";else if(e=="word")T(t);else if(e=="interpolation")return w(n,t,"interpolation");return"prop"},N.propBlock=function(e,t,n){return e=="}"?E(n):e=="word"?(d="property","maybeprop"):n.context.type},N.parens=function(e,t,n){return e=="{"||e=="}"?x(e,t,n):e==")"?E(n):e=="("?w(n,t,"parens"):(e=="word"&&T(t),"parens")},N.pseudo=function(e,t,n){return e=="word"?(d="variable-3",n.context.type):S(e,t,n)},N.media=function(e,t,n){if(e=="(")return w(n,t,"media_parens");if(e=="}")return x(e,t,n);if(e=="{")return E
(n)&&w(n,t,h?"block":"top");if(e=="word"){var r=t.current().toLowerCase();r=="only"||r=="not"||r=="and"?d="keyword":s.hasOwnProperty(r)?d="attribute":o.hasOwnProperty(r)?d="property":d="error"}return n.context.type},N.media_parens=function(e,t,n){return e==")"?E(n):e=="{"||e=="}"?x(e,t,n,2):N.media(e,t,n)},N.font_face_before=function(e,t,n){return e=="{"?w(n,t,"font_face"):S(e,t,n)},N.font_face=function(e,t,n){return e=="}"?E(n):e=="word"?(c.hasOwnProperty(t.current().toLowerCase())?d="property":d="error","maybeprop"):"font_face"},N.keyframes=function(e,t,n){return e=="word"?(d="variable","keyframes"):e=="{"?w(n,t,"top"):S(e,t,n)},N.at=function(e,t,n){return e==";"?E(n):e=="{"||e=="}"?x(e,t,n):(e=="word"?d="tag":e=="hash"&&(d="builtin"),"at")},N.interpolation=function(e,t,n){return e=="}"?E(n):e=="{"||e==";"?x(e,t,n):(e!="variable"&&(d="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",context:new b("top",e||0,null)}},token:function(e,t){if(!t.tokenize&&
e.eatSpace())return null;var n=(t.tokenize||m)(e,t);return n&&typeof n=="object"&&(p=n[1],n=n[0]),d=n,t.state=N[t.state](p,e,t),d},indent:function(e,t){var n=e.context,i=t&&t.charAt(0),s=n.indent;return n.type=="prop"&&(i=="}"||i==")")&&(n=n.prev),n.prev&&(i=="}"&&(n.type=="block"||n.type=="top"||n.type=="interpolation"||n.type=="font_face")||i==")"&&(n.type=="parens"||n.type=="media_parens")||i=="{"&&(n.type=="at"||n.type=="media"))&&(s=n.indent-r,n=n.prev),s},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var n=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],r=t(n),i=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index"
,"max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid"],s=t(i),o=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice"
,"border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells"
,"fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift"
,"line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent"
,"resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align"
,"visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],u=t(o),a=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color"
,"scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],f=t(a),l=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow"
,"lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],c=t(l),h=["above","absolute","activeborder","activecaption","afar","after-white-space","ahead","alias","all","all-scroll"
,"alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","contain","content","content-box","context-menu","continuous","copy","cover","crop","cross","crosshair","currentcolor","cursive","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc"
,"discard","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ew-resize","expanded","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground"
,"infotext","inherit","initial","inline","inline-axis","inline-block","inline-table","inset","inside","intrinsic","invert","italic","justify","kannada","katakana","katakana-iroha","keep-all","khmer","landscape","lao","large","larger","left","level","lighter","line-through","linear","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic"
,"mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded"
,"separate","serif","show","sidama","single","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman"
,"uppercase","urdu","url","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","x-large","x-small","xor","xx-large","xx-small"],p=t(h),d=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],v=t(d),m=n.concat(i).concat(o).concat(a).concat(l).concat(h);e.registerHelper("hintWords","css",m),e.defineMIME("text/css",{mediaTypes:r,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:f,colorKeywords:c,valueKeywords:p,fontProperties:v,tokenHooks:{"<":function(e,t){return e.match("!--")?(t.tokenize=y,y(e,t)):!1},"/":function(e,t){return e.eat("*")?(t.tokenize=g,g(e,t)):!1}},name:"css"}),e.defineMIME("text/x-scss",{mediaTypes:r,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:f,colorKeywords:c,valueKeywords:p,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(
),["comment","comment"]):e.eat("*")?(t.tokenize=g,g(e,t)):["operator","operator"]},":":function(e){return e.match(/\s*\{/)?[null,"{"]:!1},$:function(e){return e.match(/^[\w-]+/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(e){return e.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),e.defineMIME("text/x-less",{mediaTypes:r,mediaFeatures:s,propertyKeywords:u,nonStandardPropertyKeywords:f,colorKeywords:c,valueKeywords:p,fontProperties:v,allowNested:!0,tokenHooks:{"/":function(e,t){return e.eat("/")?(e.skipToEnd(),["comment","comment"]):e.eat("*")?(t.tokenize=g,g(e,t)):["operator","operator"]},"@":function(e){return e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"})}),function(e
){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):typeof define=="function"&&define.amd?define("cm/mode/htmlmixed/htmlmixed",["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],e):e(CodeMirror)}(function(e){e.defineMode("htmlmixed",function(t,n){function f(e,t){var n=t.htmlState.tagName,o=r.token(e,t.htmlState);if(n=="script"&&/\btag\b/.test(o)&&e.current()==">"){var u=e.string.slice(Math.max(0,e.pos-100),e.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i);u=u?u[1]:"",u&&/[\"\']/.test(u.charAt(0))&&(u=u.slice(1,u.length-1));for(var a=0;a<s.length;++a){var f=s[a];if(typeof f.matches=="string"?u==f.matches:f.matches.test(u)){f.mode&&(t.token=c,t.localMode=f.mode,t.localState=f.mode.startState&&f.mode.startState(r.indent(t.htmlState,"")));break}}}else n=="style"&&/\btag\b/.test(o)&&e.current()==">"&&(t.token=h,t.localMode=i,t.localState=i.startState
(r.indent(t.htmlState,"")));return o}function l(e,t,n){var r=e.current(),i=r.search(t),s;if(i>-1)e.backUp(r.length-i);else if(s=r.match(/<\/?$/))e.backUp(r.length),e.match(t,!1)||e.match(r);return n}function c(e,t){return e.match(/^<\/\s*script\s*>/i,!1)?(t.token=f,t.localState=t.localMode=null,f(e,t)):l(e,/<\/\s*script\s*>/,t.localMode.token(e,t.localState))}function h(e,t){return e.match(/^<\/\s*style\s*>/i,!1)?(t.token=f,t.localState=t.localMode=null,f(e,t)):l(e,/<\/\s*style\s*>/,i.token(e,t.localState))}var r=e.getMode(t,{name:"xml",htmlMode:!0,multilineTagIndentFactor:n.multilineTagIndentFactor,multilineTagIndentPastTag:n.multilineTagIndentPastTag}),i=e.getMode(t,"css"),s=[],o=n&&n.scriptTypes;s.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:e.getMode(t,"javascript")});if(o)for(var u=0;u<o.length;++u){var a=o[u];s.push({matches:a.matches,mode:a.mode&&e.getMode(t,a.mode)})}return s.push({matches:/./,mode:e.getMode(t,"text/plain")}),{startState:function()
{var e=r.startState();return{token:f,localMode:null,localState:null,htmlState:e}},copyState:function(t){if(t.localState)var n=e.copyState(t.localMode,t.localState);return{token:t.token,localMode:t.localMode,localState:n,htmlState:e.copyState(r,t.htmlState)}},token:function(e,t){return t.token(e,t)},indent:function(t,n){return!t.localMode||/^\s*<\//.test(n)?r.indent(t.htmlState,n):t.localMode.indent?t.localMode.indent(t.localState,n):e.Pass},innerMode:function(e){return{state:e.localState||e.htmlState,mode:e.localMode||r}}}},"xml","javascript","css"),e.defineMIME("text/html","htmlmixed")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed")):typeof define=="function"&&define.amd?define("cm/mode/htmlembedded/htmlembedded",["../../lib/codemirror","../htmlmixed/htmlmixed"],e):e(CodeMirror)}(function(e){e.defineMode("htmlembedded",function(t,n){function u(e,t){return e.match(r,!1)?(t.token=a,s.token(e,t.scriptState
)):o.token(e,t.htmlState)}function a(e,t){return e.match(i,!1)?(t.token=u,o.token(e,t.htmlState)):s.token(e,t.scriptState)}var r=n.scriptStartRegex||/^<%/i,i=n.scriptEndRegex||/^%>/i,s,o;return{startState:function(){return s=s||e.getMode(t,n.scriptingModeSpec),o=o||e.getMode(t,"htmlmixed"),{token:n.startOpen?a:u,htmlState:e.startState(o),scriptState:e.startState(s)}},token:function(e,t){return t.token(e,t)},indent:function(e,t){if(e.token==u)return o.indent(e.htmlState,t);if(s.indent)return s.indent(e.scriptState,t)},copyState:function(t){return{token:t.token,htmlState:e.copyState(o,t.htmlState),scriptState:e.copyState(s,t.scriptState)}},innerMode:function(e){return e.token==a?{state:e.scriptState,mode:s}:{state:e.htmlState,mode:o}}}},"htmlmixed"),e.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"}),e.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"}),e.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec
:"text/x-java"}),e.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/shell/shell",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("shell",function(){function t(t,n){var r=n.split(" ");for(var i=0;i<r.length;i++)e[r[i]]=t}function n(t,n){if(t.eatSpace())return null;var o=t.sol(),u=t.next();if(u==="\\")return t.next(),null;if(u==="'"||u==='"'||u==="`")return n.tokens.unshift(r(u)),s(t,n);if(u==="#")return o&&t.eat("!")?(t.skipToEnd(),"meta"):(t.skipToEnd(),"comment");if(u==="$")return n.tokens.unshift(i),s(t,n);if(u==="+"||u==="=")return"operator";if(u==="-")return t.eat("-"),t.eatWhile(/\w/),"attribute";if(/\d/.test(u)){t.eatWhile(/\d/);if(t.eol()||!/\w/.test(t.peek()))return"number"}t.eatWhile(/[\w-]/);var a=t.current();return t.peek()==="="&&/\w+/.test(a)?"def":e.hasOwnProperty(a)?e[a]:null
}function r(e){return function(t,n){var r,s=!1,o=!1;while((r=t.next())!=null){if(r===e&&!o){s=!0;break}if(r==="$"&&!o&&e!=="'"){o=!0,t.backUp(1),n.tokens.unshift(i);break}o=!o&&r==="\\"}return(s||!o)&&n.tokens.shift(),e==="`"||e===")"?"quote":"string"}}function s(e,t){return(t.tokens[0]||n)(e,t)}var e={};t("atom","true false"),t("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function"),t("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");var i=function(e,t){t.tokens.length>1&&e.eat("$");var n=e.next(),i=/\w/;return n==="{"&&(i=/[^}]/),n==="("?(t.tokens[0]=r(")"),s(e,t)):(/\d/.test(n)||(e.eatWhile(i),e.eat("}")),t.tokens.shift(),"def")};return{startState:function(){return{tokens
:[]}},token:function(e,t){return s(e,t)}}}),e.defineMIME("text/x-sh","shell")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/ruby/ruby",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("ruby",function(e){function t(e){var t={};for(var n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function u(e,t,n){return n.tokenize.push(e),e(t,n)}function a(e,t){o=null;if(e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(p),"comment";if(e.eatSpace())return null;var n=e.next(),r;if(n=="`"||n=="'"||n=='"')return u(c(n,"string",n=='"'||n=="`"),e,t);if(n=="/"){var i=e.current().length;if(e.skipTo("/")){var a=e.current().length;e.backUp(e.current().length-i);var f=0;while(e.current().length<a){var l=e.next();l=="("?f+=1:l==")"&&(f-=1);if(f<0)break}e.backUp(e.current().length-i);if(f==0)return u(c(n,"string-2",!0),e,t)}return"operator"}if(n=="%"){var d="string",v=!0;e.eat("s")?d="atom"
:e.eat(/[WQ]/)?d="string":e.eat(/[r]/)?d="string-2":e.eat(/[wxq]/)&&(d="string",v=!1);var m=e.eat(/[^\w\s=]/);return m?(s.propertyIsEnumerable(m)&&(m=s[m]),u(c(m,d,v,!0),e,t)):"operator"}if(n=="#")return e.skipToEnd(),"comment";if(n=="<"&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return u(h(r[1]),e,t);if(n=="0")return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(n))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(n=="?"){while(e.match(/^\\[CM]-/));return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}if(n==":")return e.eat("'")?u(c("'","atom",!1),e,t):e.eat('"')?u(c('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_]/)?(e.eatWhile(/[\w]/),e.eat(/[\?\!\=]/),"atom"):"operator";if(n=="@"&&e.match(/^@?[a-zA-Z_]/))return e.eat("@"),e.eatWhile(/[\w]/),"variable-2";if(n=="$")return e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/
)?e.eat(/\d/):e.next(),"variable-3";if(/[a-zA-Z_]/.test(n))return e.eatWhile(/[\w]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident";if(n!="|"||!t.varList&&t.lastTok!="{"&&t.lastTok!="do"){if(/[\(\)\[\]{}\\;]/.test(n))return o=n,null;if(n=="-"&&e.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(n)){var g=e.eatWhile(/[=+\-\/*:\.^%<>~|]/);return n=="."&&!g&&(o="."),"operator"}return null}return o="|",null}function f(){var e=1;return function(t,n){if(t.peek()=="}"){e--;if(e==0)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else t.peek()=="{"&&e++;return a(t,n)}}function l(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,a(t,n))}}function c(e,t,n,r){return function(i,s){var o=!1,u;s.context.type==="read-quoted-paused"&&(s.context=s.context.prev,i.eat("}"));while((u=i.next())!=null){if(u==e&&(r||!o)){s.tokenize.pop();break}if(n&&u=="#"&&!o){if(i.eat("{")){e=="}"&&(s.context={prev:s.context,type:"read-quoted-paused"}),s.tokenize
.push(f());break}if(/[@\$]/.test(i.peek())){s.tokenize.push(l());break}}o=!o&&u=="\\"}return t}}function h(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function p(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var n=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),r=t(["def","class","case","for","while","module","then","catch","loop","proc","begin"]),i=t(["end","until"]),s={"[":"]","{":"}","(":")"},o;return{startState:function(){return{tokenize:[a],indented:0,context:{type:"top",indented
:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var s=t.tokenize[t.tokenize.length-1](e,t),u,a=o;if(s=="ident"){var f=e.current();s=t.lastTok=="."?"property":n.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(f)?"tag":t.lastTok=="def"||t.lastTok=="class"||t.varList?"def":"variable",s=="keyword"&&(a=f,r.propertyIsEnumerable(f)?u="indent":i.propertyIsEnumerable(f)?u="dedent":f!="if"&&f!="unless"||e.column()!=e.indentation()?f=="do"&&t.context.indented<t.indented&&(u="indent"):u="indent")}if(o||s&&s!="comment")t.lastTok=a;return o=="|"&&(t.varList=!t.varList),u=="indent"||/[\(\[\{]/.test(o)?t.context={prev:t.context,type:o||s,indented:t.indented}:(u=="dedent"||/[\)\]\}]/.test(o))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine=o=="\\"||s=="operator"),s},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=a)return 0;var r=n&&n.charAt(0),i=t.context,o=i.type==s[r]||i.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/
.test(n);return i.indented+(o?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de",lineComment:"#"}}),e.defineMIME("text/x-ruby","ruby")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/clike/clike",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function r(e,t){if(!t.startOfLine)return!1;for(;;){if(!e.skipTo("\\")){e.skipToEnd(),t.tokenize=null;break}e.next();if(e.eol()){t.tokenize=r;break}}return"meta"}function i(e,t){e.backUp(1);if(e.match(/(R|u8R|uR|UR|LR)/)){var n=e.match(/"([^\s\\()]{0,16})\(/);return n?(t.cpp11RawStringDelim=n[1],t.tokenize=o,o(e,t)):!1}return e.match(/(u8|u|U|L)/)?e.match(/["']/,!1)?"string":!1:(e.next(),!1)}function s(e,t){var n;while((n=e.next())!=null)if(n=='"'&&!e.eat('"')){t.tokenize=null;break}return"string"}function o(e,t){var n=t.cpp11RawStringDelim
.replace(/[^\w\s]/g,"\\$&"),r=e.match(new RegExp(".*?\\)"+n+'"'));return r?t.tokenize=null:e.skipToEnd(),"string"}function u(t,n){function i(e){if(e)for(var t in e)e.hasOwnProperty(t)&&r.push(t)}typeof t=="string"&&(t=[t]);var r=[];i(n.keywords),i(n.builtin),i(n.atoms),r.length&&(n.helperType=t[0],e.registerHelper("hintWords",t[0],r));for(var s=0;s<t.length;++s)e.defineMIME(t[s],n)}e.defineMode("clike",function(t,n){function d(e,t){var n=e.next();if(l[n]){var r=l[n](e,t);if(r!==!1)return r}if(n=='"'||n=="'")return t.tokenize=v(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return p=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if(n=="/"){if(e.eat("*"))return t.tokenize=m,m(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(h.test(n))return e.eatWhile(h),"operator";e.eatWhile(/[\w\$_]/);var i=e.current();return o.propertyIsEnumerable(i)?(a.propertyIsEnumerable(i)&&(p="newstatement"),"keyword"):u.propertyIsEnumerable(i)?(a.propertyIsEnumerable(i)&&(p="newstatement"),"builtin"
):f.propertyIsEnumerable(i)?"atom":"variable"}function v(e){return function(t,n){var r=!1,i,s=!1;while((i=t.next())!=null){if(i==e&&!r){s=!0;break}r=!r&&i=="\\"}if(s||!r&&!c)n.tokenize=null;return"string"}}function m(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=null;break}n=r=="*"}return"comment"}function g(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function y(e,t,n){var r=e.indented;return e.context&&e.context.type=="statement"&&(r=e.context.indented),e.context=new g(r,t,n,null,e.context)}function b(e){var t=e.context.type;if(t==")"||t=="]"||t=="}")e.indented=e.context.indented;return e.context=e.context.prev}var r=t.indentUnit,i=n.statementIndentUnit||r,s=n.dontAlignCalls,o=n.keywords||{},u=n.builtin||{},a=n.blockKeywords||{},f=n.atoms||{},l=n.hooks||{},c=n.multiLineStrings,h=/[+\-*&%=<>!?|\/]/,p;return{startState:function(e){return{tokenize:null,context:new g((e||0)-r,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.
context;e.sol()&&(n.align==null&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0);if(e.eatSpace())return null;p=null;var r=(t.tokenize||d)(e,t);if(r=="comment"||r=="meta")return r;n.align==null&&(n.align=!0);if(p!=";"&&p!=":"&&p!=","||n.type!="statement")if(p=="{")y(t,e.column(),"}");else if(p=="[")y(t,e.column(),"]");else if(p=="(")y(t,e.column(),")");else if(p=="}"){while(n.type=="statement")n=b(t);n.type=="}"&&(n=b(t));while(n.type=="statement")n=b(t)}else p==n.type?b(t):((n.type=="}"||n.type=="top")&&p!=";"||n.type=="statement"&&p=="newstatement")&&y(t,e.column(),"statement");else b(t);return t.startOfLine=!1,r},indent:function(t,n){if(t.tokenize!=d&&t.tokenize!=null)return e.Pass;var o=t.context,u=n&&n.charAt(0);o.type=="statement"&&u=="}"&&(o=o.prev);var a=u==o.type;return o.type=="statement"?o.indented+(u=="{"?0:i):o.align&&(!s||o.type!=")")?o.column+(a?0:1):o.type==")"&&!a?o.indented+i:o.indented+(a?0:r)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment
:"//",fold:"brace"}});var n="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";u(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:t(n),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":r},modeProps:{fold:["brace","include"]}}),u(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:t(n+" asm dynamic_cast namespace reinterpret_cast try bool explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final "+"static_assert override"),blockKeywords:t("catch class do else finally for if struct switch try while"),atoms:t("true false null"),hooks:{"#":r,u:i,U:i,L:i,R:i},modeProps:{fold:["brace","include"]}})
,u("text/x-java",{name:"clike",keywords:t("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:t("catch class do else finally for if switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),u("text/x-csharp",{name:"clike",keywords:t("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"
),blockKeywords:t("catch class do else finally for foreach if struct switch try while"),builtin:t("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:t("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=s,s(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),u("text/x-scala",{name:"clike",keywords:t("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"
),multiLineStrings:!0,blockKeywords:t("catch class do else finally for forSome if match switch try while"),atoms:t("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),u(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:t("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:t("for while do if else struct"),builtin:t("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"
),atoms:t("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"
),hooks:{"#":r},modeProps:{fold:["brace","include"]}}),u("text/x-nesc",{name:"clike",keywords:t(n+"as atomic async call command component components configuration event generic "+"implementation includes interface module new norace nx_struct nx_union post provides "+"signal task uses abstract extends"),blockKeywords:t("case do else for if switch while struct"),atoms:t("null"),hooks:{"#":r},modeProps:{fold:["brace","include"]}})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/coffeescript/coffeescript",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("coffeescript",function(e){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function v(e,n){if(e.sol()){n.scope.align===null&&(n.scope.align=!1);var a=n.scope.offset;if(e.eatSpace()){var f=e.indentation();return f>a&&n.scope.type=="coffee"?"indent":f<a?"dedent":null}a>0&&b(e,n)}if(e.eatSpace())return null;var p=
e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return n.tokenize=g,n.tokenize(e,n);if(p==="#")return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var v=!1;e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(v=!0),e.match(/^-?\d+\.\d*/)&&(v=!0),e.match(/^-?\.\d+/)&&(v=!0);if(v)return e.peek()=="."&&e.backUp(1),"number";var y=!1;e.match(/^-?0x[0-9a-f]+/i)&&(y=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(y=!0),e.match(/^-?0(?![\dx])/i)&&(y=!0);if(y)return"number"}if(e.match(c))return n.tokenize=m(e.current(),!1,"string"),n.tokenize(e,n);if(e.match(h)){if(e.current()!="/"||e.match(/^.*\//,!1))return n.tokenize=m(e.current(),!0,"string-2"),n.tokenize(e,n);e.backUp(1)}return e.match(r)||e.match(u)?"operator":e.match(i)?"punctuation":e.match(d)?"atom":e.match(l)?"keyword":e.match(s)?"variable":e.match(o)?"property":(e.next(),t)}function m(n,r,i){return function(s,o){while(!s.eol()){s.eatWhile(/[^'"\/\\]/);if(s.eat("\\")){s.next();if(r&&s.eol())return i}else{if(s.match(n
))return o.tokenize=v,i;s.eat(/['"\/]/)}}return r&&(e.mode.singleLineStringErrors?i=t:o.tokenize=v),i}}function g(e,t){while(!e.eol()){e.eatWhile(/[^#]/);if(e.match("###")){t.tokenize=v;break}e.eatWhile("#")}return"comment"}function y(t,n,r){r=r||"coffee";var i=0,s=!1,o=null;for(var u=n.scope;u;u=u.prev)if(u.type==="coffee"){i=u.offset+e.indentUnit;break}r!=="coffee"?(s=null,o=t.column()+t.current().length):n.scope.align&&(n.scope.align=!1),n.scope={offset:i,type:r,prev:n.scope,align:s,alignOffset:o}}function b(e,t){if(!t.scope.prev)return;if(t.scope.type==="coffee"){var n=e.indentation(),r=!1;for(var i=t.scope;i;i=i.prev)if(n===i.offset){r=!0;break}if(!r)return!0;while(t.scope.prev&&t.scope.offset!==n)t.scope=t.scope.prev;return!1}return t.scope=t.scope.prev,!1}function w(e,n){var r=n.tokenize(e,n),i=e.current();if(i===".")return r=n.tokenize(e,n),i=e.current(),/^\.[\w$]+$/.test(i)?"variable":t;i==="return"&&(n.dedent+=1),((i==="->"||i==="=>")&&!n.lambda&&!e.peek()||r==="indent")&&y(e,
n);var s="[({".indexOf(i);s!==-1&&y(e,n,"])}".slice(s,s+1)),a.exec(i)&&y(e,n),i=="then"&&b(e,n);if(r==="dedent"&&b(e,n))return t;s="])}".indexOf(i);if(s!==-1){while(n.scope.type=="coffee"&&n.scope.prev)n.scope=n.scope.prev;n.scope.type==i&&(n.scope=n.scope.prev)}return n.dedent>0&&e.eol()&&n.scope.type=="coffee"&&(n.scope.prev&&(n.scope=n.scope.prev),n.dedent-=1),r}var t="error",r=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?)/,i=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,s=/^[_A-Za-z$][_A-Za-z$0-9]*/,o=/^(@|this\.)[_A-Za-z$][_A-Za-z$0-9]*/,u=n(["and","or","not","is","isnt","in","instanceof","typeof"]),a=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],f=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","throw","when","until"],l=n(a.concat(f));a=n(a);var c=/^('{3}|\"{3}|['\"])/,h=/^(\/{3}|\/)/,p=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],d=n(p),E=
{startState:function(e){return{tokenize:v,scope:{offset:e||0,type:"coffee",prev:null,align:!1},lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=t.scope.align===null&&t.scope;n&&e.sol()&&(n.align=!1);var r=w(e,t);return n&&r&&r!="comment"&&(n.align=!0),t.lastToken={style:r,content:e.current()},e.eol()&&e.lambda&&(t.lambda=!1),r},indent:function(e,t){if(e.tokenize!=v)return 0;var n=e.scope,r=t&&"])}".indexOf(t.charAt(0))>-1;if(r)while(n.type=="coffee"&&n.prev)n=n.prev;var i=r&&n.type===t.charAt(0);return n.align?n.alignOffset-(i?1:0):(i?n.prev:n).offset},lineComment:"#",fold:"indent"};return E}),e.defineMIME("text/x-coffeescript","coffeescript")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/diff/diff",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("diff",function(){var e={"+":"positive","-":"negative","@":"meta"};return{token:function(t){var n=t.string
.search(/[\t ]+?$/);if(!t.sol()||n===0)return t.skipToEnd(),("error "+(e[t.string.charAt(0)]||"")).replace(/ $/,"");var r=e[t.peek()]||t.skipToEnd();return n===-1?t.skipToEnd():t.pos=n,r}}}),e.defineMIME("text/x-diff","diff")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/erlang/erlang",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMIME("text/x-erlang","erlang"),e.defineMode("erlang",function(t){function g(e,t){if(t.in_string)return t.in_string=!w(e),N(t,e,"string");if(t.in_atom)return t.in_atom=!E(e),N(t,e,"atom");if(e.eatSpace())return N(t,e,"whitespace");if(!A(t)&&e.match(/-\s*[a-z\u00df-\u00f6\u00f8-\u00ff][\w\u00d8-\u00de\u00c0-\u00d6\u00df-\u00f6\u00f8-\u00ff]*/))return T(e.current(),n)?N(t,e,"type"):N(t,e,"attribute");var g=e.next();if(g=="%")return e.skipToEnd(),N(t,e,"comment");if(g==":")return N(t,e,"colon");if(g=="?")return e.eatSpace(),e.eatWhile(v),N(t,
e,"macro");if(g=="#")return e.eatSpace(),e.eatWhile(v),N(t,e,"record");if(g=="$")return e.next()=="\\"&&!e.match(m)?N(t,e,"error"):N(t,e,"number");if(g==".")return N(t,e,"dot");if(g=="'"){if(!(t.in_atom=!E(e))){if(e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),N(t,e,"fun");if(e.match(/\s*\(/,!1)||e.match(/\s*:/,!1))return N(t,e,"function")}return N(t,e,"atom")}if(g=='"')return t.in_string=!w(e),N(t,e,"string");if(/[A-Z_\u00d8-\u00de\u00c0-\u00d6]/.test(g))return e.eatWhile(v),N(t,e,"variable");if(/[a-z_\u00df-\u00f6\u00f8-\u00ff]/.test(g)){e.eatWhile(v);if(e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),N(t,e,"fun");var S=e.current();return T(S,r)?N(t,e,"keyword"):T(S,o)?N(t,e,"operator"):e.match(/\s*\(/,!1)?!T(S,d)||A(t).token==":"&&A(t,2).token!="erlang"?T(S,p)?N(t,e,"guard"):N(t,e,"function"):N(t,e,"builtin"):T(S,o)?N(t,e,"operator"):x(e)==":"?S=="erlang"?N(t,e,"builtin"):N(t,e,"function"):T(S,["true","false"])?N(t,e,"boolean"):T(S,["true","false"])?N(t
,e,"boolean"):N(t,e,"atom")}var C=/[0-9]/,k=/[0-9a-zA-Z]/;return C.test(g)?(e.eatWhile(C),e.eat("#")?e.eatWhile(k)||e.backUp(1):e.eat(".")&&(e.eatWhile(C)?e.eat(/[eE]/)&&(e.eat(/[-+]/)?e.eatWhile(C)||e.backUp(2):e.eatWhile(C)||e.backUp(1)):e.backUp(1)),N(t,e,"number")):y(e,f,l)?N(t,e,"open_paren"):y(e,c,h)?N(t,e,"close_paren"):b(e,i,s)?N(t,e,"separator"):b(e,u,a)?N(t,e,"operator"):N(t,e,null)}function y(e,t,n){if(e.current().length==1&&t.test(e.current())){e.backUp(1);while(t.test(e.peek())){e.next();if(T(e.current(),n))return!0}e.backUp(e.current().length-1)}return!1}function b(e,t,n){if(e.current().length==1&&t.test(e.current())){while(t.test(e.peek()))e.next();while(0<e.current().length){if(T(e.current(),n))return!0;e.backUp(1)}e.next()}return!1}function w(e){return S(e,'"',"\\")}function E(e){return S(e,"'","\\")}function S(e,t,n){while(!e.eol()){var r=e.next();if(r==t)return!0;r==n&&e.next()}return!1}function x(e){var t=e.match(/([\n\s]+|%[^\n]*\n)*(.)/,!1);return t?t.pop():""}function T
(e,t){return-1<t.indexOf(e)}function N(e,t,n){O(e,k(n,t));switch(n){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"atom";case"builtin":return"builtin";case"close_paren":return null;case"colon":return null;case"comment":return"comment";case"dot":return null;case"error":return"error";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"variable-2";case"number":return"number";case"open_paren":return null;case"operator":return"operator";case"record":return"bracket";case"separator":return null;case"string":return"string";case"type":return"def";case"variable":return"variable";default:return null}}function C(e,t,n,r){return{token:e,column:t,indent:n,type:r}}function k(e,t){return C(t.current(),t.column(),t.indentation(),e)}function L(e){return C(e,0,0,e)}function A(e,t){var n=e.tokenStack.length,r=t?t:1;return n<r?!1:e.tokenStack[n-r]}function O(e,t){t.type!="comment"&&t.type!="whitespace"&&
(e.tokenStack=M(e.tokenStack,t),e.tokenStack=_(e.tokenStack))}function M(e,t){var n=e.length-1;return 0<n&&e[n].type==="record"&&t.type==="dot"?e.pop():0<n&&e[n].type==="group"?(e.pop(),e.push(t)):e.push(t),e}function _(e){var t=e.length-1;if(e[t].type==="dot")return[];if(e[t].type==="fun"&&e[t-1].token==="fun")return e.slice(0,t-1);switch(e[e.length-1].token){case"}":return D(e,{g:["{"]});case"]":return D(e,{i:["["]});case")":return D(e,{i:["("]});case">>":return D(e,{i:["<<"]});case"end":return D(e,{i:["begin","case","fun","if","receive","try"]});case",":return D(e,{e:["begin","try","when","->",",","(","[","{","<<"]});case"->":return D(e,{r:["when"],m:["try","if","case","receive"]});case";":return D(e,{E:["case","fun","if","receive","try","when"]});case"catch":return D(e,{e:["try"]});case"of":return D(e,{e:["case"]});case"after":return D(e,{e:["receive","try"]});default:return e}}function D(e,t){for(var n in t){var r=e.length-1,i=t[n];for(var s=r-1;-1<s;s--)if(T(e[s].token,i)){var o=e
.slice(0,s);switch(n){case"m":return o.concat(e[s]).concat(e[r]);case"r":return o.concat(e[r]);case"i":return o;case"g":return o.concat(L("group"));case"E":return o.concat(e[s]);case"e":return o.concat(e[s])}}}return n=="E"?[]:e}function P(n,r){var i,s=t.indentUnit,o=H(r),u=A(n,1),a=A(n,2);return n.in_string||n.in_atom?e.Pass:a?u.token=="when"?u.column+s:o==="when"&&a.type==="function"?a.indent+s:o==="("&&u.token==="fun"?u.column+3:o==="catch"&&(i=F(n,["try"]))?i.column:T(o,["end","after","of"])?(i=F(n,["begin","case","fun","if","receive","try"]),i?i.column:e.Pass):T(o,h)?(i=F(n,l),i?i.column:e.Pass):T(u.token,[",","|","||"])||T(o,[",","|","||"])?(i=B(n),i?i.column+i.token.length:s):u.token=="->"?T(a.token,["receive","case","if","try"])?a.column+s+s:a.column+s:T(u.token,l)?u.column+u.token.length:(i=j(n),q(i)?i.column+s:0):0}function H(e){var t=e.match(/,|[a-z]+|\}|\]|\)|>>|\|+|\(/);return q(t)&&t.index===0?t[0]:""}function B(e){var t=e.tokenStack.slice(0,-1),n=I(t,"type",["open_paren"]
);return q(t[n])?t[n]:!1}function j(e){var t=e.tokenStack,n=I(t,"type",["open_paren","separator","keyword"]),r=I(t,"type",["operator"]);return q(n)&&q(r)&&n<r?t[n+1]:q(n)?t[n]:!1}function F(e,t){var n=e.tokenStack,r=I(n,"token",t);return q(n[r])?n[r]:!1}function I(e,t,n){for(var r=e.length-1;-1<r;r--)if(T(e[r][t],n))return r;return!1}function q(e){return e!==!1&&e!=null}var n=["-type","-spec","-export_type","-opaque"],r=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"],i=/[\->,;]/,s=["->",";",","],o=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"],u=/[\+\-\*\/<>=\|:!]/,a=["=","+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"],f=/[<\(\[\{]/,l=["<<","(","[","{"],c=/[>\)\]\}]/,h=["}","]",")",">>"],p=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary"
,"bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"],d=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node"
,"node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"],v=/[\w@\u00d8-\u00de\u00c0-\u00d6\u00df-\u00f6\u00f8-\u00ff]/,m=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;return{startState:function(){return{tokenStack:[],in_string:!1,in_atom:!1}},token:function(e,t){return g(e,t)},indent:function(e,t){return P(e,t)},lineComment:"%"}})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/go/go",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("go",function(
e){function o(e,t){var o=e.next();if(o=='"'||o=="'"||o=="`")return t.tokenize=u(o),t.tokenize(e,t);if(/[\d\.]/.test(o))return o=="."?e.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):o=="0"?e.match(/^[xX][0-9a-fA-F]+/)||e.match(/^0[0-7]+/):e.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(o))return s=o,null;if(o=="/"){if(e.eat("*"))return t.tokenize=a,a(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(i.test(o))return e.eatWhile(i),"operator";e.eatWhile(/[\w\$_]/);var f=e.current();if(n.propertyIsEnumerable(f)){if(f=="case"||f=="default")s="case";return"keyword"}return r.propertyIsEnumerable(f)?"atom":"variable"}function u(e){return function(t,n){var r=!1,i,s=!1;while((i=t.next())!=null){if(i==e&&!r){s=!0;break}r=!r&&i=="\\"}if(s||!r&&e!="`")n.tokenize=o;return"string"}}function a(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=o;break}n=r=="*"}return"comment"}function f(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function l
(e,t,n){return e.context=new f(e.indented,t,n,null,e.context)}function c(e){var t=e.context.type;if(t==")"||t=="]"||t=="}")e.indented=e.context.indented;return e.context=e.context.prev}var t=e.indentUnit,n={"break":!0,"case":!0,chan:!0,"const":!0,"continue":!0,"default":!0,defer:!0,"else":!0,fallthrough:!0,"for":!0,func:!0,go:!0,"goto":!0,"if":!0,"import":!0,"interface":!0,map:!0,"package":!0,range:!0,"return":!0,select:!0,struct:!0,"switch":!0,type:!0,"var":!0,bool:!0,"byte":!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,"int":!0,uint:!0,uintptr:!0},r={"true":!0,"false":!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,imag:!0,len:!0,make:!0,"new":!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},i=/[+\-*&^%:=<>!|\/]/,s;return{startState:function(e){return{tokenize:null,context:new f((e||0)-t,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;e.sol()&&(n.align==
null&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0,n.type=="case"&&(n.type="}"));if(e.eatSpace())return null;s=null;var r=(t.tokenize||o)(e,t);return r=="comment"?r:(n.align==null&&(n.align=!0),s=="{"?l(t,e.column(),"}"):s=="["?l(t,e.column(),"]"):s=="("?l(t,e.column(),")"):s=="case"?n.type="case":s=="}"&&n.type=="}"?n=c(t):s==n.type&&c(t),t.startOfLine=!1,r)},indent:function(e,n){if(e.tokenize!=o&&e.tokenize!=null)return 0;var r=e.context,i=n&&n.charAt(0);if(r.type=="case"&&/^(?:case|default)\b/.test(n))return e.context.type="}",r.indented;var s=i==r.type;return r.align?r.column+(s?0:1):r.indented+(s?0:t)},electricChars:"{}):",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-go","go")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/http/http",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("http",function(
){function e(e,t){return e.skipToEnd(),t.cur=o,"error"}function t(t,r){return t.match(/^HTTP\/\d\.\d/)?(r.cur=n,"keyword"):t.match(/^[A-Z]+/)&&/[ \t]/.test(t.peek())?(r.cur=i,"keyword"):e(t,r)}function n(t,n){var i=t.match(/^\d+/);if(!i)return e(t,n);n.cur=r;var s=Number(i[0]);return s>=100&&s<200?"positive informational":s>=200&&s<300?"positive success":s>=300&&s<400?"positive redirect":s>=400&&s<500?"negative client-error":s>=500&&s<600?"negative server-error":"error"}function r(e,t){return e.skipToEnd(),t.cur=o,null}function i(e,t){return e.eatWhile(/\S/),t.cur=s,"string-2"}function s(t,n){return t.match(/^HTTP\/\d\.\d$/)?(n.cur=o,"keyword"):e(t,n)}function o(e){return e.sol()&&!e.eat(/[ \t]/)?e.match(/^.*?:/)?"atom":(e.skipToEnd(),"error"):(e.skipToEnd(),"string")}function u(e){return e.skipToEnd(),null}return{token:function(e,t){var n=t.cur;return n!=o&&n!=u&&e.eatSpace()?null:n(e,t)},blankLine:function(e){e.cur=u},startState:function(){return{cur:t}}}}),e.defineMIME("message/http"
,"http")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/nginx/nginx",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("nginx",function(e){function t(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function u(e,t){return o=t,e}function a(e,t){e.eatWhile(/[\w\$_]/);var s=e.current();if(n.propertyIsEnumerable(s))return"keyword";if(r.propertyIsEnumerable(s))return"variable-2";if(i.propertyIsEnumerable(s))return"string-2";var o=e.next();if(o=="@")return e.eatWhile(/[\w\\\-]/),u("meta",e.current());if(o=="/"&&e.eat("*"))return t.tokenize=f,f(e,t);if(o=="<"&&e.eat("!"))return t.tokenize=l,l(e,t);if(o!="=")return o!="~"&&o!="|"||!e.eat("=")?o=='"'||o=="'"?(t.tokenize=c(o),t.tokenize(e,t)):o=="#"?(e.skipToEnd(),u("comment","comment")):o=="!"?(e.match(/^\s*\w*/),u("keyword","important")):/\d/.test(o)?(e.eatWhile(/[\w.%]/),u("number","unit")):/[,.+>*\/]/
.test(o)?u(null,"select-op"):/[;{}:\[\]]/.test(o)?u(null,o):(e.eatWhile(/[\w\\\-]/),u("variable","variable")):u(null,"compare");u(null,"compare")}function f(e,t){var n=!1,r;while((r=e.next())!=null){if(n&&r=="/"){t.tokenize=a;break}n=r=="*"}return u("comment","comment")}function l(e,t){var n=0,r;while((r=e.next())!=null){if(n>=2&&r==">"){t.tokenize=a;break}n=r=="-"?n+1:0}return u("comment","comment")}function c(e){return function(t,n){var r=!1,i;while((i=t.next())!=null){if(i==e&&!r)break;r=!r&&i=="\\"}return r||(n.tokenize=a),u("string","string")}}var n=t("break return rewrite set accept_mutex accept_mutex_delay access_log add_after_body add_before_body add_header addition_types aio alias allow ancient_browser ancient_browser_value auth_basic auth_basic_user_file auth_http auth_http_header auth_http_timeout autoindex autoindex_exact_size autoindex_localtime charset charset_types client_body_buffer_size client_body_in_file_only client_body_in_single_buffer client_body_temp_path client_body_timeout client_header_buffer_size client_header_timeout client_max_body_size connection_pool_size create_full_put_path daemon dav_access dav_methods debug_connection debug_points default_type degradation degrade deny devpoll_changes devpoll_events directio directio_alignment empty_gif env epoll_events error_log eventport_events expires fastcgi_bind fastcgi_buffer_size fastcgi_buffers fastcgi_busy_buffers_size fastcgi_cache fastcgi_cache_key fastcgi_cache_methods fastcgi_cache_min_uses fastcgi_cache_path fastcgi_cache_use_stale fastcgi_cache_valid fastcgi_catch_stderr fastcgi_connect_timeout fastcgi_hide_header fastcgi_ignore_client_abort fastcgi_ignore_headers fastcgi_index fastcgi_intercept_errors fastcgi_max_temp_file_size fastcgi_next_upstream fastcgi_param fastcgi_pass_header fastcgi_pass_request_body fastcgi_pass_request_headers fastcgi_read_timeout fastcgi_send_lowat fastcgi_send_timeout fastcgi_split_path_info fastcgi_store fastcgi_store_access fastcgi_temp_file_write_size fastcgi_temp_path fastcgi_upstream_fail_timeout fastcgi_upstream_max_fails flv geoip_city geoip_country google_perftools_profiles gzip gzip_buffers gzip_comp_level gzip_disable gzip_hash gzip_http_version gzip_min_length gzip_no_buffer gzip_proxied gzip_static gzip_types gzip_vary gzip_window if_modified_since ignore_invalid_headers image_filter image_filter_buffer image_filter_jpeg_quality image_filter_transparency imap_auth imap_capabilities imap_client_buffer index ip_hash keepalive_requests keepalive_timeout kqueue_changes kqueue_events large_client_header_buffers limit_conn limit_conn_log_level limit_rate limit_rate_after limit_req limit_req_log_level limit_req_zone limit_zone lingering_time lingering_timeout lock_file log_format log_not_found log_subrequest map_hash_bucket_size map_hash_max_size master_process memcached_bind memcached_buffer_size memcached_connect_timeout memcached_next_upstream memcached_read_timeout memcached_send_timeout memcached_upstream_fail_timeout memcached_upstream_max_fails merge_slashes min_delete_depth modern_browser modern_browser_value msie_padding msie_refresh multi_accept open_file_cache open_file_cache_errors open_file_cache_events open_file_cache_min_uses open_file_cache_valid open_log_file_cache output_buffers override_charset perl perl_modules perl_require perl_set pid pop3_auth pop3_capabilities port_in_redirect postpone_gzipping postpone_output protocol proxy proxy_bind proxy_buffer proxy_buffer_size proxy_buffering proxy_buffers proxy_busy_buffers_size proxy_cache proxy_cache_key proxy_cache_methods proxy_cache_min_uses proxy_cache_path proxy_cache_use_stale proxy_cache_valid proxy_connect_timeout proxy_headers_hash_bucket_size proxy_headers_hash_max_size proxy_hide_header proxy_ignore_client_abort proxy_ignore_headers proxy_intercept_errors proxy_max_temp_file_size proxy_method proxy_next_upstream proxy_pass_error_message proxy_pass_header proxy_pass_request_body proxy_pass_request_headers proxy_read_timeout proxy_redirect proxy_send_lowat proxy_send_timeout proxy_set_body proxy_set_header proxy_ssl_session_reuse proxy_store proxy_store_access proxy_temp_file_write_size proxy_temp_path proxy_timeout proxy_upstream_fail_timeout proxy_upstream_max_fails random_index read_ahead real_ip_header recursive_error_pages request_pool_size reset_timedout_connection resolver resolver_timeout rewrite_log rtsig_overflow_events rtsig_overflow_test rtsig_overflow_threshold rtsig_signo satisfy secure_link_secret send_lowat send_timeout sendfile sendfile_max_chunk server_name_in_redirect server_names_hash_bucket_size server_names_hash_max_size server_tokens set_real_ip_from smtp_auth smtp_capabilities smtp_client_buffer smtp_greeting_delay so_keepalive source_charset ssi ssi_ignore_recycled_buffers ssi_min_file_chunk ssi_silent_errors ssi_types ssi_value_length ssl ssl_certificate ssl_certificate_key ssl_ciphers ssl_client_certificate ssl_crl ssl_dhparam ssl_engine ssl_prefer_server_ciphers ssl_protocols ssl_session_cache ssl_session_timeout ssl_verify_client ssl_verify_depth starttls stub_status sub_filter sub_filter_once sub_filter_types tcp_nodelay tcp_nopush thread_stack_size timeout timer_resolution types_hash_bucket_size types_hash_max_size underscores_in_headers uninitialized_variable_warn use user userid userid_domain userid_expires userid_mark userid_name userid_p3p userid_path userid_service valid_referers variables_hash_bucket_size variables_hash_max_size worker_connections worker_cpu_affinity worker_priority worker_processes worker_rlimit_core worker_rlimit_nofile worker_rlimit_sigpending worker_threads working_directory xclient xml_entities xslt_stylesheet xslt_typesdrew@li229-23"
),r=t("http mail events server types location upstream charset_map limit_except if geo map"),i=t("include root server server_name listen internal proxy_pass memcached_pass fastcgi_pass try_files"),s=e.indentUnit,o;return{startState:function(e){return{tokenize:a,baseIndent:e||0,stack:[]}},token:function(e,t){if(e.eatSpace())return null;o=null;var n=t.tokenize(e,t),r=t.stack[t.stack.length-1];if(o=="hash"&&r=="rule")n="atom";else if(n=="variable")if(r=="rule")n="number";else if(!r||r=="@media{")n="tag";return r=="rule"&&/^[\{\};]$/.test(o)&&t.stack.pop(),o=="{"?r=="@media"?t.stack[t.stack.length-1]="@media{":t.stack.push("{"):o=="}"?t.stack.pop():o=="@media"?t.stack.push("@media"):r=="{"&&o!="comment"&&t.stack.push("rule"),n},indent:function(e,t){var n=e.stack.length;return/^\}/.test(t)&&(n-=e.stack[e.stack.length-1]=="rule"?2:1),e.baseIndent+n*s},electricChars:"}"}}),e.defineMIME("text/nginx","text/x-nginx-conf")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"
)):typeof define=="function"&&define.amd?define("cm/mode/perl/perl",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e,t){return e.string.charAt(e.pos+(t||0))}function n(e,t){if(t){var n=e.pos-t;return e.string.substr(n>=0?n:0,t)}return e.string.substr(0,e.pos-1)}function r(e,t){var n=e.string.length,r=n-e.pos+1;return e.string.substr(e.pos,t&&t<n?t:r)}function i(e,t){var n=e.pos+t,r;n<=0?e.pos=0:n>=(r=e.string.length-1)?e.pos=r:e.pos=n}e.defineMode("perl",function(){function u(e,t,n,r,i){return t.chain=null,t.style=null,t.tail=null,t.tokenize=function(e,t){var s=!1,o,u=0;while(o=e.next()){if(o===n[u]&&!s)return n[++u]!==undefined?(t.chain=n[u],t.style=r,t.tail=i):i&&e.eatWhile(i),t.tokenize=f,r;s=!s&&o=="\\"}return r},t.tokenize(e,t)}function a(e,t,n){return t.tokenize=function(e,t){return e.string==n&&(t.tokenize=f),e.skipToEnd(),"string"},t.tokenize(e,t)}function f(f,l){if(f.eatSpace())return null;if(l.chain)return u(f,l,l.chain,l.style,l.tail);if(f.match(/^\-?[\d\.]/
,!1)&&f.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(f.match(/^<<(?=\w)/))return f.eatWhile(/\w/),a(f,l,f.current().substr(2));if(f.sol()&&f.match(/^\=item(?!\w)/))return a(f,l,"=cut");var c=f.next();if(c=='"'||c=="'"){if(n(f,3)=="<<"+c){var h=f.pos;f.eatWhile(/\w/);var p=f.current().substr(1);if(p&&f.eat(c))return a(f,l,p);f.pos=h}return u(f,l,[c],"string")}if(c=="q"){var d=t(f,-2);if(!d||!/\w/.test(d)){d=t(f,0);if(d=="x"){d=t(f,1);if(d=="(")return i(f,2),u(f,l,[")"],s,o);if(d=="[")return i(f,2),u(f,l,["]"],s,o);if(d=="{")return i(f,2),u(f,l,["}"],s,o);if(d=="<")return i(f,2),u(f,l,[">"],s,o);if(/[\^'"!~\/]/.test(d))return i(f,1),u(f,l,[f.eat(d)],s,o)}else if(d=="q"){d=t(f,1);if(d=="(")return i(f,2),u(f,l,[")"],"string");if(d=="[")return i(f,2),u(f,l,["]"],"string");if(d=="{")return i(f,2),u(f,l,["}"],"string");if(d=="<")return i(f,2),u(f,l,[">"],"string");if(/[\^'"!~\/]/.test(d))return i(f,1),u(f,l,[f.eat(d)],"string")}else if(
d=="w"){d=t(f,1);if(d=="(")return i(f,2),u(f,l,[")"],"bracket");if(d=="[")return i(f,2),u(f,l,["]"],"bracket");if(d=="{")return i(f,2),u(f,l,["}"],"bracket");if(d=="<")return i(f,2),u(f,l,[">"],"bracket");if(/[\^'"!~\/]/.test(d))return i(f,1),u(f,l,[f.eat(d)],"bracket")}else if(d=="r"){d=t(f,1);if(d=="(")return i(f,2),u(f,l,[")"],s,o);if(d=="[")return i(f,2),u(f,l,["]"],s,o);if(d=="{")return i(f,2),u(f,l,["}"],s,o);if(d=="<")return i(f,2),u(f,l,[">"],s,o);if(/[\^'"!~\/]/.test(d))return i(f,1),u(f,l,[f.eat(d)],s,o)}else if(/[\^'"!~\/(\[{<]/.test(d)){if(d=="(")return i(f,1),u(f,l,[")"],"string");if(d=="[")return i(f,1),u(f,l,["]"],"string");if(d=="{")return i(f,1),u(f,l,["}"],"string");if(d=="<")return i(f,1),u(f,l,[">"],"string");if(/[\^'"!~\/]/.test(d))return u(f,l,[f.eat(d)],"string")}}}if(c=="m"){var d=t(f,-2);if(!d||!/\w/.test(d)){d=f.eat(/[(\[{<\^'"!~\/]/);if(d){if(/[\^'"!~\/]/.test(d))return u(f,l,[d],s,o);if(d=="(")return u(f,l,[")"],s,o);if(d=="[")return u(f,l,["]"],s,o);if(d=="{"
)return u(f,l,["}"],s,o);if(d=="<")return u(f,l,[">"],s,o)}}}if(c=="s"){var d=/[\/>\]})\w]/.test(t(f,-2));if(!d){d=f.eat(/[(\[{<\^'"!~\/]/);if(d)return d=="["?u(f,l,["]","]"],s,o):d=="{"?u(f,l,["}","}"],s,o):d=="<"?u(f,l,[">",">"],s,o):d=="("?u(f,l,[")",")"],s,o):u(f,l,[d,d],s,o)}}if(c=="y"){var d=/[\/>\]})\w]/.test(t(f,-2));if(!d){d=f.eat(/[(\[{<\^'"!~\/]/);if(d)return d=="["?u(f,l,["]","]"],s,o):d=="{"?u(f,l,["}","}"],s,o):d=="<"?u(f,l,[">",">"],s,o):d=="("?u(f,l,[")",")"],s,o):u(f,l,[d,d],s,o)}}if(c=="t"){var d=/[\/>\]})\w]/.test(t(f,-2));if(!d){d=f.eat("r");if(d){d=f.eat(/[(\[{<\^'"!~\/]/);if(d)return d=="["?u(f,l,["]","]"],s,o):d=="{"?u(f,l,["}","}"],s,o):d=="<"?u(f,l,[">",">"],s,o):d=="("?u(f,l,[")",")"],s,o):u(f,l,[d,d],s,o)}}}if(c=="`")return u(f,l,[c],"variable-2");if(c=="/")return/~\s*$/.test(n(f))?u(f,l,[c],s,o):"operator";if(c=="$"){var h=f.pos;if(f.eatWhile(/\d/)||f.eat("{")&&f.eatWhile(/\d/)&&f.eat("}"))return"variable-2";f.pos=h}if(/[$@%]/.test(c)){var h=f.pos;if(f.eat("^"
)&&f.eat(/[A-Z]/)||!/[@$%&]/.test(t(f,-2))&&f.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/)){var d=f.current();if(e[d])return"variable-2"}f.pos=h}if(/[$@%&]/.test(c))if(f.eatWhile(/[\w$\[\]]/)||f.eat("{")&&f.eatWhile(/[\w$\[\]]/)&&f.eat("}")){var d=f.current();return e[d]?"variable-2":"variable"}if(c=="#"&&t(f,-2)!="$")return f.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(c)){var h=f.pos;f.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/);if(e[f.current()])return"operator";f.pos=h}if(c=="_"&&f.pos==1){if(r(f,6)=="_END__")return u(f,l,["\0"],"comment");if(r(f,7)=="_DATA__")return u(f,l,["\0"],"variable-2");if(r(f,7)=="_C__")return u(f,l,["\0"],"string")}if(/\w/.test(c)){var h=f.pos;if(t(f,-2)=="{"&&(t(f,0)=="}"||f.eatWhile(/\w/)&&t(f,0)=="}"))return"string";f.pos=h}if(/[A-Z]/.test(c)){var v=t(f,-2),h=f.pos;f.eatWhile(/[A-Z_]/);if(!/[\da-z]/.test(t(f,0))){var d=e[f.current()];return d?(d[1]&&(d=d[0]),v!=":"?d==1?"keyword":d==2?"def":d==3?"atom":d==4?"operator":d==5?"variable-2":"meta":"meta"
):"meta"}f.pos=h}if(/[a-zA-Z_]/.test(c)){var v=t(f,-2);f.eatWhile(/\w/);var d=e[f.current()];return d?(d[1]&&(d=d[0]),v!=":"?d==1?"keyword":d==2?"def":d==3?"atom":d==4?"operator":d==5?"variable-2":"meta":"meta"):"meta"}return null}var e={"->":4,"++":4,"--":4,"**":4,"=~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"<<":4,">>":4,"<":4,">":4,"<=":4,">=":4,lt:4,gt:4,le:4,ge:4,"==":4,"!=":4,"<=>":4,eq:4,ne:4,cmp:4,"~~":4,"&":4,"|":4,"^":4,"&&":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"=":4,"+=":4,"-=":4,"*=":4,",":4,"=>":4,"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$<":5,$EFFECTIVE_USER_ID
:5,$EUID:5,"$>":5,$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$&":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\"
:5,$OUTPUT_AUTOFLUSH:5,"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$=":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,"$[":5,$OLD_PERL_VERSION:5,"$]":5,"if":[1,1],elsif:[1,1],"else":[1,1],"while":[1,1],unless:[1,1],"for":[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,"break":1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,"continue":[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,"default":1,defined:1,"delete":1,die:1,"do":1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent
:1,eof:1,eval:1,exec:1,exists:1,exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,"goto":1,grep:1,hex:1,"import":1,index:1,"int":1,ioctl:1,join:1,keys:1,kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,"new":1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,"package":1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,"return":1,reverse:1,rewinddir
:1,rindex:1,rmdir:1,s:null,say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},s="string-2",o=/[goseximacplud]/;return{startState:function(){return{tokenize:f,chain:null,style:null,tail:null}},token:function(e,t){return(t.tokenize||f)(e,t)},electricChars:"{}"}}),e.registerHelper("wordChars","perl",/[\w$]/),e.defineMIME("text/x-perl","perl")}),function(e){typeof exports=="object"&&typeof module=="object"?
e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):typeof define=="function"&&define.amd?define("cm/mode/php/php",["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],e):e(CodeMirror)}(function(e){function t(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e){return function(t,n){return t.match(e)?n.tokenize=null:t.skipToEnd(),"string"}}function r(e){return e.length==0?i:function(t,n){var s=e[0];for(var o=0;o<s.length;o++)if(t.match(s[o][0]))return n.tokenize=r(e.slice(1)),s[o][1];return n.tokenize=i,"string"}}function i(e,t){var n=!1,i,s=!1;if(e.current()=='"')return"string";if(e.match("${",!1)||e.match("{$",!1))return t.tokenize=null,"string";if(e.match(/\$[a-zA-Z_][a-zA-Z0-9_]*/))return e.match("[",!1)&&(t.tokenize=r([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]])),e.match(/\-\>\w/,!1)&&(t.tokenize=r([[["->",null]],[[/[\w]+/
,"variable"]]])),"variable-2";while(!e.eol()&&!e.match("{$",!1)&&(!e.match(/(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1)||n)){i=e.next();if(!n&&i=='"'){s=!0;break}n=!n&&i=="\\"}return s&&(t.tokenize=null,t.phpEncapsStack.pop()),"string"}var s="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",o="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",u="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count"
;e.registerHelper("hintWords","php",[s,o,u].join(" ").split(" ")),e.registerHelper("wordChars","php",/[\w$]/);var a={name:"clike",helperType:"php",keywords:t(s),blockKeywords:t("catch do else elseif for foreach if switch try while finally"),atoms:t(o),builtin:t(u),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\w\$_]/),"variable-2"},"<":function(e,t){return e.match(/<</)?(e.eatWhile(/[\w\.]/),t.tokenize=n(e.current().slice(3)),t.tokenize(e,t)):!1},"#":function(e){while(!e.eol()&&!e.match("?>",!1))e.next();return"comment"},"/":function(e){if(e.eat("/")){while(!e.eol()&&!e.match("?>",!1))e.next();return"comment"}return!1},'"':function(e,t){return t.phpEncapsStack||(t.phpEncapsStack=[]),t.phpEncapsStack.push(0),t.tokenize=i,t.tokenize(e,t)},"{":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&t.phpEncapsStack[t.phpEncapsStack.length-1]++,!1},"}":function(e,t){return t.phpEncapsStack&&t.phpEncapsStack.length>0&&--t.phpEncapsStack[t.phpEncapsStack.length-1]==0&&
(t.tokenize=i),!1}}};e.defineMode("php",function(t,n){function s(e,t){var n=t.curMode==i;e.sol()&&t.pending&&t.pending!='"'&&t.pending!="'"&&(t.pending=null);if(!n){if(e.match(/^<\?\w*/))return t.curMode=i,t.curState=t.php,"meta";if(t.pending=='"'||t.pending=="'"){while(!e.eol()&&e.next()!=t.pending);var s="string"}else if(t.pending&&e.pos<t.pending.end){e.pos=t.pending.end;var s=t.pending.style}else var s=r.token(e,t.curState);t.pending&&(t.pending=null);var o=e.current(),u=o.search(/<\?/),a;return u!=-1&&(s=="string"&&(a=o.match(/[\'\"]$/))&&!/\?>/.test(o)?t.pending=a[0]:t.pending={end:e.pos,style:s},e.backUp(o.length-u)),s}return n&&t.php.tokenize==null&&e.match("?>")?(t.curMode=r,t.curState=t.html,"meta"):i.token(e,t.curState)}var r=e.getMode(t,"text/html"),i=e.getMode(t,a);return{startState:function(){var t=e.startState(r),s=e.startState(i);return{html:t,php:s,curMode:n.startOpen?i:r,curState:n.startOpen?s:t,pending:null}},copyState:function(t){var n=t.html,s=e.copyState(r,n),o=t.php
,u=e.copyState(i,o),a;return t.curMode==r?a=s:a=u,{html:s,php:u,curMode:t.curMode,curState:a,pending:t.pending}},token:s,indent:function(e,t){return e.curMode!=i&&/^\s*<\//.test(t)||e.curMode==i&&/^\?>/.test(t)?r.indent(e.html,t):e.curMode.indent(e.curState,t)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),e.defineMIME("application/x-httpd-php","php"),e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),e.defineMIME("text/x-php",a)}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/puppet/puppet",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("puppet",function(){function n(t,n){var r=n.split(" ");for(var i=0;i<r.length;i++)e[r[i]]=t}function r(e,t){var n,r,i=!1;while(!e.eol()&&(n=e.next())!=t.pending){if(n==="$"&&r!="\\"&&t.pending=='"'){i=!0;break}
r=n}return i&&e.backUp(1),n==t.pending?t.continueString=!1:t.continueString=!0,"string"}function i(n,i){var s=n.match(/[\w]+/,!1),o=n.match(/(\s+)?\w+\s+=>.*/,!1),u=n.match(/(\s+)?[\w:_]+(\s+)?{/,!1),a=n.match(/(\s+)?[@]{1,2}[\w:_]+(\s+)?{/,!1),f=n.next();if(f==="$")return n.match(t)?i.continueString?"variable-2":"variable":"error";if(i.continueString)return n.backUp(1),r(n,i);if(i.inDefinition){if(n.match(/(\s+)?[\w:_]+(\s+)?/))return"def";n.match(/\s+{/),i.inDefinition=!1}return i.inInclude?(n.match(/(\s+)?\S+(\s+)?/),i.inInclude=!1,"def"):n.match(/(\s+)?\w+\(/)?(n.backUp(1),"def"):o?(n.match(/(\s+)?\w+/),"tag"):s&&e.hasOwnProperty(s)?(n.backUp(1),n.match(/[\w]+/),n.match(/\s+\S+\s+{/,!1)&&(i.inDefinition=!0),s=="include"&&(i.inInclude=!0),e[s]):/(\s+)?[A-Z]/.test(s)?(n.backUp(1),n.match(/(\s+)?[A-Z][\w:_]+/),"def"):u?(n.match(/(\s+)?[\w:_]+/),"def"):a?(n.match(/(\s+)?[@]{1,2}/),"special"):f=="#"?(n.skipToEnd(),"comment"):f=="'"||f=='"'?(i.pending=f,r(n,i)):f=="{"||f=="}"?"bracket":f=="/"?
(n.match(/.*?\//),"variable-3"):f.match(/[0-9]/)?(n.eatWhile(/[0-9]+/),"number"):f=="="?(n.peek()==">"&&n.next(),"operator"):(n.eatWhile(/[\w-]/),null)}var e={},t=/({)?([a-z][a-z0-9_]*)?((::[a-z][a-z0-9_]*)*::)?[a-zA-Z0-9_]+(})?/;return n("keyword","class define site node include import inherits"),n("keyword","case if else in and elsif default or"),n("atom","false true running present absent file directory undef"),n("builtin","action augeas burst chain computer cron destination dport exec file filebucket group host icmp iniface interface jump k5login limit log_level log_prefix macauthorization mailalias maillist mcx mount nagios_command nagios_contact nagios_contactgroup nagios_host nagios_hostdependency nagios_hostescalation nagios_hostextinfo nagios_hostgroup nagios_service nagios_servicedependency nagios_serviceescalation nagios_serviceextinfo nagios_servicegroup nagios_timeperiod name notify outiface package proto reject resources router schedule scheduled_task selboolean selmodule service source sport ssh_authorized_key sshkey stage state table tidy todest toports tosource user vlan yumrepo zfs zone zpool"
),{startState:function(){var e={};return e.inDefinition=!1,e.inInclude=!1,e.continueString=!1,e.pending=!1,e},token:function(e,t){return e.eatSpace()?null:i(e,t)}}}),e.defineMIME("text/x-puppet","puppet")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/python/python",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){function t(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function u(e){return e.scopes[e.scopes.length-1]}var n=t(["and","or","not","is","in"]),r=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],i=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id"
,"input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],s={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},o={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};e.registerHelper("hintWords","python",r.concat(i)),e.defineMode("python",function(a,f){function x(e,t){if(e.sol()&&u(t).type=="py"){var n=u(t).offset;if(e.eatSpace()){var r=e.indentation();return r>n?C(e,t,"py"):r<n&&k(e,t)&&(t.errorToken=!0),null}var i=T(e,t);return n>0&&k(e,t)&&(i+=" "+l),i}return T(e,t)}function T(e,t){if(e.eatSpace())return null;var r=e.peek();if(r=="#"
)return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var i=!1;e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(i=!0),e.match(/^\d+\.\d*/)&&(i=!0),e.match(/^\.\d+/)&&(i=!0);if(i)return e.eat(/J/i),"number";var s=!1;e.match(/^0x[0-9a-f]+/i)&&(s=!0),e.match(/^0b[01]+/i)&&(s=!0),e.match(/^0o[0-7]+/i)&&(s=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),s=!0),e.match(/^0(?![\dx])/i)&&(s=!0);if(s)return e.eat(/L/i),"number"}return e.match(w)?(t.tokenize=N(e.current()),t.tokenize(e,t)):e.match(v)||e.match(d)?null:e.match(p)||e.match(c)||e.match(n)?"operator":e.match(h)?null:e.match(E)?"keyword":e.match(S)?"builtin":e.match(/^(self|cls)\b/)?"variable-2":e.match(m)?t.lastToken=="def"||t.lastToken=="class"?"def":"variable":(e.next(),l)}function N(e){function r(r,i){while(!r.eol()){r.eatWhile(/[^'"\\]/);if(r.eat("\\")){r.next();if(t&&r.eol())return n}else{if(r.match(e))return i.tokenize=x,n;r.eat(/['"]/)}}if(t){if(f.singleLineStringErrors)return l;i.tokenize=x}return n}while("rub".indexOf(e.charAt(0
).toLowerCase())>=0)e=e.substr(1);var t=e.length==1,n="string";return r.isString=!0,r}function C(e,t,n){var r=0,i=null;if(n=="py")while(u(t).type!="py")t.scopes.pop();r=u(t).offset+(n=="py"?a.indentUnit:g),n!="py"&&!e.match(/^(\s|#.*)*$/,!1)&&(i=e.column()+1),t.scopes.push({offset:r,type:n,align:i})}function k(e,t){var n=e.indentation();while(u(t).offset>n){if(u(t).type!="py")return!0;t.scopes.pop()}return u(t).offset!=n}function L(e,t){var n=t.tokenize(e,t),r=e.current();if(r==".")return n=e.match(m,!1)?null:l,n==null&&t.lastStyle=="meta"&&(n="meta"),n;if(r=="@")return e.match(m,!1)?"meta":l;(n=="variable"||n=="builtin")&&t.lastStyle=="meta"&&(n="meta");if(r=="pass"||r=="return")t.dedent+=1;r=="lambda"&&(t.lambda=!0),r==":"&&!t.lambda&&u(t).type=="py"&&C(e,t,"py");var i=r.length==1?"[({".indexOf(r):-1;i!=-1&&C(e,t,"])}".slice(i,i+1)),i="])}".indexOf(r);if(i!=-1){if(u(t).type!=r)return l;t.scopes.pop()}return t.dedent>0&&e.eol()&&u(t).type=="py"&&(t.scopes.length>1&&t.scopes.pop(),t.dedent-=1
),n}var l="error",c=f.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),h=f.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),p=f.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),d=f.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),v=f.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),m=f.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),g=f.hangingIndent||a.indentUnit,y=r,b=i;f.extra_keywords!=undefined&&(y=y.concat(f.extra_keywords)),f.extra_builtins!=undefined&&(b=b.concat(f.extra_builtins));if(f.version&&parseInt(f.version,10)==3){y=y.concat(o.keywords),b=b.concat(o.builtins);var w=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}else{y=y.concat(s.keywords),b=b.concat(s.builtins);var w=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}var E=t(y),S=t(b),A={startState:function(e){return{tokenize:x,scopes:[{offset:e||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda
:!1,dedent:0}},token:function(e,t){var n=t.errorToken;n&&(t.errorToken=!1);var r=L(e,t);t.lastStyle=r;var i=e.current();return i&&r&&(t.lastToken=i),e.eol()&&t.lambda&&(t.lambda=!1),n?r+" "+l:r},indent:function(t,n){if(t.tokenize!=x)return t.tokenize.isString?e.Pass:0;var r=u(t),i=n&&n.charAt(0)==r.type;return r.align!=null?r.align-(i?1:0):i&&t.scopes.length>1?t.scopes[t.scopes.length-2].offset:r.offset},lineComment:"#",fold:"indent"};return A}),e.defineMIME("text/x-python","python");var a=function(e){return e.split(" ")};e.defineMIME("text/x-cython",{name:"python",extra_keywords:a("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/sass/sass",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("sass",function(e){function t(e){return new RegExp("^"+
e.join("|"))}function u(e,t){var n=e.peek();return n===")"?(e.next(),t.tokenizer=p,"operator"):n==="("?(e.next(),e.eatSpace(),"operator"):n==="'"||n==='"'?(t.tokenizer=f(e.next()),"string"):(t.tokenizer=f(")",!1),"string")}function a(e,t){return function(n,r){return n.sol()&&n.indentation()<=e?(r.tokenizer=p,p(n,r)):(t&&n.skipTo("*/")?(n.next(),n.next(),r.tokenizer=p):n.next(),"comment")}}function f(e,t){function n(r,i){var s=r.next(),o=r.peek(),u=r.string.charAt(r.pos-2),a=s!=="\\"&&o===e||s===e&&u!=="\\";return a?(s!==e&&t&&r.next(),i.tokenizer=p,"string"):s==="#"&&o==="{"?(i.tokenizer=l(n),r.next(),"operator"):"string"}return t==null&&(t=!0),n}function l(e){return function(t,n){return t.peek()==="}"?(t.next(),n.tokenizer=e,"operator"):p(t,n)}}function c(t){if(t.indentCount==0){t.indentCount++;var n=t.scopes[0].offset,r=n+e.indentUnit;t.scopes.unshift({offset:r})}}function h(e){if(e.scopes.length==1)return;e.scopes.shift()}function p(e,t){var n=e.peek();if(e.match("/*"))return t.tokenizer=
a(e.indentation(),!0),t.tokenizer(e,t);if(e.match("//"))return t.tokenizer=a(e.indentation(),!1),t.tokenizer(e,t);if(e.match("#{"))return t.tokenizer=l(p),"operator";if(n===".")return e.next(),e.match(/^[\w-]+/)?(c(t),"atom"):e.peek()==="#"?(c(t),"atom"):"operator";if(n==="#"){e.next();if(e.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/))return"number";if(e.match(/^[\w-]+/))return c(t),"atom";if(e.peek()==="#")return c(t),"atom"}return e.match(/^-?[0-9\.]+/)?"number":e.match(/^(px|em|in)\b/)?"unit":e.match(r)?"keyword":e.match(/^url/)&&e.peek()==="("?(t.tokenizer=u,"atom"):n==="$"?(e.next(),e.eatWhile(/[\w-]/),e.peek()===":"?(e.next(),"variable-2"):"variable-3"):n==="!"?(e.next(),e.match(/^[\w]+/)?"keyword":"operator"):n==="="?(e.next(),e.match(/^[\w-]+/)?(c(t),"meta"):"operator"):n==="+"?(e.next(),e.match(/^[\w-]+/)?"variable-3":"operator"):e.match(/^@(else if|if|media|else|for|each|while|mixin|function)/)?(c(t),"meta"):n==="@"?(e.next(),e.eatWhile(/[\w-]/),"meta"):n==='"'||n==="'"?(e.next(),t.
tokenizer=f(n),"string"):n==":"&&e.match(o)?"keyword":e.eatWhile(/[\w-&]/)?e.peek()===":"&&!e.match(o,!1)?"property":"atom":e.match(s)?"operator":(e.next(),null)}function d(t,n){t.sol()&&(n.indentCount=0);var r=n.tokenizer(t,n),i=t.current();i==="@return"&&h(n),r==="atom"&&c(n);if(r!==null){var s=t.pos-i.length,o=s+e.indentUnit*n.indentCount,u=[];for(var a=0;a<n.scopes.length;a++){var f=n.scopes[a];f.offset<=o&&u.push(f)}n.scopes=u}return r}var n=["true","false","null","auto"],r=new RegExp("^"+n.join("|")),i=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not"],s=t(i),o=/^::?[\w\-]+/;return{startState:function(){return{tokenizer:p,scopes:[{offset:0,type:"sass"}],definedVars:[],definedMixins:[]}},token:function(e,t){var n=d(e,t);return t.lastToken={style:n,content:e.current()},n},indent:function(e){return e.scopes[0].offset}}}),e.defineMIME("text/x-sass","sass")}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror"
)):typeof define=="function"&&define.amd?define("cm/mode/sql/sql",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("sql",function(e,t){function l(e,t){var l=e.next();if(a[l]){var p=a[l](e,t);if(p!==!1)return p}if(u.hexNumber==1&&(l=="0"&&e.match(/^[xX][0-9a-fA-F]+/)||(l=="x"||l=="X")&&e.match(/^'[0-9a-fA-F]+'/)))return"number";if(u.binaryNumber==1&&((l=="b"||l=="B")&&e.match(/^'[01]+'/)||l=="0"&&e.match(/^b[01]+/)))return"number";if(l.charCodeAt(0)>47&&l.charCodeAt(0)<58)return e.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),u.decimallessFloat==1&&e.eat("."),"number";if(l=="?"&&(e.eatSpace()||e.eol()||e.eat(";")))return"variable-3";if(l=="'"||l=='"'&&u.doubleQuote)return t.tokenize=c(l),t.tokenize(e,t);if(!(!(u.nCharCast==1&&(l=="n"||l=="N")||u.charsetCast==1&&l=="_"&&e.match(/[a-z][a-z0-9]*/i))||e.peek()!="'"&&e.peek()!='"'))return"keyword";if(/^[\(\),\;\[\]]/.test(l))return null;if(u.commentSlashSlash&&l=="/"&&e.eat("/"))return e.skipToEnd(),"comment";if(u.commentHash&&
l=="#"||l=="-"&&e.eat("-")&&(!u.commentSpaceRequired||e.eat(" ")))return e.skipToEnd(),"comment";if(l=="/"&&e.eat("*"))return t.tokenize=h,t.tokenize(e,t);if(l!="."){if(o.test(l))return e.eatWhile(o),null;if(l=="{"&&(e.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||e.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";e.eatWhile(/^[_\w\d]/);var d=e.current().toLowerCase();return f.hasOwnProperty(d)&&(e.match(/^( )+'[^']*'/)||e.match(/^( )+"[^"]*"/))?"number":r.hasOwnProperty(d)?"atom":i.hasOwnProperty(d)?"builtin":s.hasOwnProperty(d)?"keyword":n.hasOwnProperty(d)?"string-2":null}if(u.zerolessFloat==1&&e.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(u.ODBCdotTable==1&&e.match(/^[a-zA-Z_]+/))return"variable-2"}function c(e){return function(t,n){var r=!1,i;while((i=t.next())!=null){if(i==e&&!r){n.tokenize=l;break}r=!r&&i=="\\"}return"string"}}function h(e,t){for(;;){if(!e.skipTo("*")){e.skipToEnd();break}e.next();if(e.eat("/")){t.tokenize=l;break}}return"comment"}function p(
e,t,n){t.context={prev:t.context,indent:e.indentation(),col:e.column(),type:n}}function d(e){e.indent=e.context.indent,e.context=e.context.prev}var n=t.client||{},r=t.atoms||{"false":!0,"true":!0,"null":!0},i=t.builtin||{},s=t.keywords||{},o=t.operatorChars||/^[*+\-%<>!=&|~^]/,u=t.support||{},a=t.hooks||{},f=t.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:l,context:null}},token:function(e,t){e.sol()&&t.context&&t.context.align==null&&(t.context.align=!1);if(e.eatSpace())return null;var n=t.tokenize(e,t);if(n=="comment")return n;t.context&&t.context.align==null&&(t.context.align=!0);var r=e.current();return r=="("?p(e,t,")"):r=="["?p(e,t,"]"):t.context&&t.context.type==r&&d(t),n},indent:function(t,n){var r=t.context;if(!r)return 0;var i=n.charAt(0)==r.type;return r.align?r.col+(i?0:1):r.indent+(i?0:e.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:u.commentSlashSlash?"//":u.commentHash?"#":null}}),function(){function t(e){var t;
while((t=e.next())!=null)if(t=="`"&&!e.eat("`"))return"variable-2";return null}function n(e){return e.eat("@")&&(e.match(/^session\./),e.match(/^local\./),e.match(/^global\./)),e.eat("'")?(e.match(/^.*'/),"variable-2"):e.eat('"')?(e.match(/^.*"/),"variable-2"):e.eat("`")?(e.match(/^.*`/),"variable-2"):e.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function r(e){return e.eat("N")?"atom":e.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function s(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}var i="alter and as asc between by count create delete desc distinct drop from having in insert into is join like not on or order select set table union update values where ";e.defineMIME("text/x-sql",{name:"sql",keywords:s(i+"begin"),builtin:s("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"
),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:s("date time timestamp"),support:s("ODBCdotTable doubleQuote binaryNumber hexNumber")}),e.defineMIME("text/x-mssql",{name:"sql",client:s("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:s(i+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered"),builtin:s("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:s("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":n}}),e.defineMIME("text/x-mysql",{name:"sql",client:s("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
keywords:s(i+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group groupby_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"
),builtin:s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:s("date time timestamp"),support:s("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":n,"`":t,"\\":r}}),e.defineMIME("text/x-mariadb",{name:"sql",client:s("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:s(i+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"
),builtin:s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:s("date time timestamp"),support:s("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":n,"`":t,"\\":r}}),e.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:s("use select from using consistency where limit first reversed first and in insert into values using consistency ttl update set delete truncate begin batch apply create keyspace with columnfamily primary key index on drop alter type add any one quorum all local_quorum each_quorum"),builtin:s("ascii bigint blob boolean counter decimal double float int text timestamp uuid varchar varint"
),atoms:s("false true"),operatorChars:/^[<>=]/,dateSQL:{},support:s("commentSlashSlash decimallessFloat"),hooks:{}}),e.defineMIME("text/x-plsql",{name:"sql",client:s("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:s("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"
),builtin:s("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars
:/^[*+\-%<>!=~]/,dateSQL:s("date time timestamp"),support:s("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),e.defineMIME("text/x-hive",{name:"sql",keywords:s("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"
),builtin:s("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:s("date timestamp"),support:s("ODBCdotTable doubleQuote binaryNumber hexNumber")})}()}),function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define("cm/mode/yaml/yaml",["../../lib/codemirror"],e):e(CodeMirror)}(function(e){e.defineMode("yaml",function(){var e=["true","false","on","off","yes","no"],t=new RegExp("\\b(("+e.join(")|(")+"))$","i");return{token:function(e,n){var r=e.peek(),i=n.escaped;n.escaped=!1;if(r!="#"||e.pos!=0&&!/\s/.test(e.string.charAt(e.pos-1))){if(n.literal&&e.indentation()>n.keyCol)return e.skipToEnd(),"string";n.literal&&(n.literal=!1);if(e.sol()){n.keyCol=0,n.pair=!1,n.pairStart=!1;if(e.match(/---/))return"def";if(e.match(/\.\.\./))return"def";if(e.match(/\s*-\s+/))return"meta"
}if(e.match(/^(\{|\}|\[|\])/))return r=="{"?n.inlinePairs++:r=="}"?n.inlinePairs--:r=="["?n.inlineList++:n.inlineList--,"meta";if(n.inlineList>0&&!i&&r==",")return e.next(),"meta";if(n.inlinePairs>0&&!i&&r==",")return n.keyCol=0,n.pair=!1,n.pairStart=!1,e.next(),"meta";if(n.pairStart){if(e.match(/^\s*(\||\>)\s*/))return n.literal=!0,"meta";if(e.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(n.inlinePairs==0&&e.match(/^\s*-?[0-9\.\,]+\s?$/))return"number";if(n.inlinePairs>0&&e.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(e.match(t))return"keyword"}return!n.pair&&e.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(n.pair=!0,n.keyCol=e.indentation(),"atom"):n.pair&&e.match(/^:\s*/)?(n.pairStart=!0,"meta"):(n.pairStart=!1,n.escaped=r=="\\",e.next(),null)}return e.skipToEnd(),"comment"},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}}),e.defineMIME("text/x-yaml","yaml")
}),define("views/spaces/editor",["jquery","backbone","cm/lib/codemirror","cm/addon/fold/foldcode","cm/addon/fold/foldgutter","cm/addon/fold/brace-fold","cm/addon/fold/markdown-fold","cm/addon/dialog/dialog","cm/addon/search/searchcursor","cm/addon/search/search","cm/addon/selection/active-line","cm/addon/display/rulers","cm/keymap/emacs","cm/keymap/sublime","cm/keymap/vim","cm/mode/markdown/markdown","cm/mode/gfm/gfm","cm/mode/lua/lua","cm/mode/htmlembedded/htmlembedded","cm/mode/htmlmixed/htmlmixed","cm/mode/xml/xml","cm/mode/shell/shell","cm/mode/ruby/ruby","cm/mode/javascript/javascript","cm/mode/clike/clike","cm/mode/coffeescript/coffeescript","cm/mode/css/css","cm/mode/diff/diff","cm/mode/erlang/erlang","cm/mode/go/go","cm/mode/http/http","cm/mode/nginx/nginx","cm/mode/perl/perl","cm/mode/php/php","cm/mode/puppet/puppet","cm/mode/python/python","cm/mode/sass/sass","cm/mode/sql/sql","cm/mode/yaml/yaml"],function(e,t,n){var r={shell:["bash","sh"]},i=!1,s=function(t,s){s=s||{};for(var o in 
r){if(!n.modes[o])continue;var u=r[o];for(var a=0;a<u.length;++a){var f=u[a];n.modes[f]||n.defineMode(f,n.modes[o])}}var l=80,c=n.fromTextArea(document.getElementById(t),e.extend({mode:"gfm",lineNumbers:!1,matchBrackets:!0,theme:"neat",tabSize:2,indentUnit:2,gutter:!1,lineNumbers:!1,foldGutter:!0,gutters:["CodeMirror-foldgutter"],autoClearEmptyLines:!1,lineWrapping:!0,styleActiveLine:!0,rulers:[l],keyMap:"sublime",onKeyEvent:function(e,t){return i?(t.preventDefault(),t.stopPropagation(),!0):!1}},s));return c},o=t.View.extend({el:e("#page_editor"),ctx:{},initialize:function(t){_.implode(this,t),this.config=e.extend({el:"#page_editor",offset:115},this.config||{}),this.$el=e(this.config.el),this.workspace&&(this.workspace.on("page_loaded",this.populate_editor,this),this.workspace.on("workspace_layout_changed",this.refresh,this),this.workspace.on("refresh_editor",this.refresh,this),this.workspace.on("reset",this.reset,this),this.state.on("bootstrapped",this.refresh,this));var n=this;this.config
.no_resize||e(window).on("resize",function(){return n.resize_editor()}),this.bootstrap()},bootstrap:function(){return this.editor=s(this.$el.attr("id"),this.config),this.resize_editor(),this},reset:function(){return this.editor.setValue("Load or create a new page to begin."),this.editor.clearHistory(),this.refresh(),this},refresh:function(){return this.editor.refresh(),this},resize_editor:function(t){return this.config.no_resize?this:(this.editor.setSize(null,e(window).height()-(t||this.config.offset)),this)},disable_editor:function(){return i=!0,e(this.editor.getWrapperElement()).addClass("disabled"),this},enable_editor:function(){return e(this.editor.getWrapperElement()).removeClass("disabled"),i=!1,this},populate_editor:function(e){var t=this.editor.getCursor(),n=this.editor.getScrollInfo();return this.reset(),e&&this.editor.setValue(_.unescape(e.get("content"))),this.editor.markClean(),this.editor.setCursor(t),this.editor.scrollTo(n.left,n.top),this.editor.focus(),this.editor.clearHistory
(),this},focus:function(){return this.editor.focus(),this},content_changed:function(){return!this.editor.isClean()},serialize:function(){return this.editor.save(),this.workspace&&this.workspace.current_page&&this.workspace.current_page.set("content",this.editor.getValue()),this.editor.getValue()}});return o}),define("views/spaces/finder",["animable_view","pagehub","shortcut"],function(e,t,n){return e.extend({el:$("#page_finder"),events:{},initialize:function(e){var t=this;_.implode(this,e),n.add("ctrl+alt+p",function(){t.show()}),this.container=this.$el.parents(".page-finder:first"),this.page_titles=[],this.state.on("actionbar_hidden",this.do_show_finder,this),this.workspace.on("reset",this.hide,this),this.workspace.on("page_loaded",this.hide,this),this.space.folders.on("add",this.track_folder_pages,this),this.bind_finder(),this.hide()},hide:function(){var e=this;if(!this.shown())return;this.animable()?this.container.hide("slide",{},this.anime_length,function(){e.state.trigger("finder_hidden"
)}):(this.container.hide(),this.state.trigger("finder_hidden"))},show:function(){if(this.shown()){this.$el.focus();return}return this.state.trigger("hide_actionbar"),!0},shown:function(){return this.container.is(":visible")},do_show_finder:function(){this.animable()?this.container.show("slide",{},this.anime_length):this.container.show(),this.$el.focus()},bind_finder:function(){var e=this;this.$el.typeahead({source:e.page_titles,updater:function(t,n){return e.switch_to_page(n.attr("data-page"),n.attr("data-folder")),null},on_escape:function(){return e.$el.val(""),e.hide(),!0},label_extractor:function(e){return e.label},formatter:function(e,t){$(t).attr("data-folder",e.folder_id),$(t).attr("data-page",e.page_id)}})},switch_to_page:function(e,n){var r=this.find_page_in_folder(n,e);return r?this.workspace.current_page==r?this.hide():(this.state.router.proxy_resource(r),!0):(t.status.show("Could not find the page you were looking for.","bad"),!1)},track_folder_pages:function(e){e.on("change:title"
,this.update_tracked_folder_title,this),e.pages.on("add",this.track_page_title,this),e.pages.on("remove",this.stop_tracking_page_title,this),e.pages.on("change:title",this.update_tracked_page_title,this)},track_page_title:function(e){return this.page_titles.push({label:this.labelize(e),folder_id:e.folder.get("id"),page_id:e.get("id")}),e.ctx.finder_index=this.page_titles.length-1,!0},stop_tracking_page_title:function(e){return typeof e.ctx.finder_index===undefined?t.report_error("Page context is missing finder index, I can't un-track it!"):(this.page_titles.splice(e.ctx.finder_index,1),!0)},labelize:function(e){return e.fully_qualified_title().join(" > ")},find_page_in_folder:function(e,t){var n=this.space.folders.get(e);return n?n.pages.get(t):null},update_tracked_folder_title:function(e){var t=_.where(this.page_titles,{folder_id:e.get("id")});_.each(t,function(e){return e.label=this.labelize(this.find_page_in_folder(e.folder_id,e.page_id)),!0},this)},update_tracked_page_title:function(
e){return typeof e.ctx.finder_index===undefined?t.report_error("Page context is missing finder index, I can't un-track it!"):(this.page_titles[e.ctx.finder_index].label=this.labelize(e),!0)}})}),define("views/spaces/show",["backbone","views/spaces/workspace/router","views/spaces/resource_actions","views/spaces/browser/browser","views/spaces/page_actionbar","views/spaces/general_actionbar","views/spaces/editor","views/spaces/finder","pagehub","timed_operation"],function(e,t,n,r,i,s,o,u,a,f){return e.View.extend({el:$("#workspace"),initialize:function(e){a.status.mark_pending(),this.space=e.space,this.state=e,this.ctx={settings_changed:!1,settings:{runtime:{collapsed:[]}}};var t={state:e,space:e.space,workspace:this,ctx:this.ctx};this.state.workspace=this,this.resource_actions=new n(t),this.browser=new r(t),this.editor=new o(t),this.page_actionbar=new i($.extend({},t,{editor:this.editor})),this.workspace_actionbar=new s(t),this.finder=new u(t),this.space.folders.on("add",this.track_folder
,this),this.space.folders.every(function(e){return this.space.folders.trigger("add",e),e.pages.every(function(e){return this.pages.trigger("add",e)},e),!0},this),e.on("sync_runtime_preferences",this.queue_preferences_sync,this),e.on("sync_runtime_preferences_now",this.autosave_preferences,this),this.preferences_autosaver=new f(this,this.autosave_preferences,{pulse:e.get("preferences.pulses.runtime_preferences")}),this.space.folders.on("remove",this.reset_if_current_folder,this),this.on("load_folder",this.switch_to_folder,this),this.on("load_page",this.switch_to_folder_and_load_page,this),this.on("move_folder",this.move_folder,this),this.on("move_page",this.move_page,this),this.on("reset",this.reset_context,this),this.go(),this.$el.show(),this.state.trigger("bootstrapped",this.state),a.status.mark_ready()},on_invalid_route:function(e){return a.status.show("The resource you requested does not seem to exist anymore.","bad"),this.state.router.navigate("/",{trigger:!0,replace:!0}),!0},go:function(
){this.state.router=new t(this,this.space),e.history.start({pushState:!1,root:this.space.get("media.actions.edit")+"/"})},queue_preferences_sync:function(e){return this.preferences_autosaver.queue(e)},autosave_preferences:function(e,t){this.state.current_user.save($.extend({},e,{no_object:!0}),{patch:!0})},reset_context:function(){return this.current_folder&&this.current_folder.off("change",this.broadcast_current_folder_update,this),this.current_page&&this.current_page.off("change",this.broadcast_current_page_update,this),this.current_folder=null,this.current_page=null,this},reset_if_current_folder:function(e){this.current_folder==e&&this.trigger("reset")},track_folder:function(e){e.pages.on("change:folder.id",this.reparent_page,this),e.pages.on("remove",this.reset_if_current_page_is_destroyed,this)},reparent_page:function(e){var t=this.space.folders.get(e.get("folder.id"));if(!e.isNew()&&e._previousAttributes.folder){var n=this.space.folders.get(e._previousAttributes.folder.id);if(!n)return a
.report_error("[workspace]: page reparenting failed; unable to locate old folder of page "+e.get("id")),!1;n.pages.remove(e)}return t.pages.add(e),!0},switch_to_folder:function(e,t){if(!e)return a.report_error("[workspace]: switch_to_folder called with an undefined folder"),!1;var n=this.current_folder;return t||this.trigger("reset"),e==this.current_folder?this:(console.log("[workspace] -- switching to folder#"+e.get("id")+" -> "+e.get("title")+"--"),n&&n.off("change",this.broadcast_current_folder_update,this),this.current_folder=e,this.trigger("folder_loaded",e,n),this.current_folder.on("change",this.broadcast_current_folder_update,this),this)},switch_to_folder_and_load_page:function(e){var t=this;return console.log("[workspace] -- switching to page#"+e.get("id")+" -> "+e.get("title")+" --"),t.switch_to_folder(e.collection.folder,!0),this.current_page&&this.current_page.off("change",this.broadcast_current_page_update,this),e.fetch({wait:!0,success:function(){t.current_page=e,t.trigger("page_loaded"
,e),t.current_page.on("change",t.broadcast_current_page_update,t)}}),this},move_folder:function(e,t){if(!e||!t)return a.report_error("bad move folder evt!"),!1;e.save({parent_id:t.get("id")},{patch:!0,wait:!0,success:function(){a.status.show("Folder moved.","good")}})},move_page:function(e,t){if(!e||!t)return a.report_error("bad move page evt!"),!1;e.save({folder_id:t.get("id")},{patch:!0,wait:!0,success:function(){a.status.show("Page moved.","good")}})},broadcast_current_folder_update:function(e){this.trigger("current_folder_updated",this.current_folder)},broadcast_current_page_update:function(e){this.trigger("current_page_updated",e),e.collection.folder!=this.current_folder&&(console.log("current page folder changed from: "+e.collection.folder.get("title")+" to: "+(this.current_folder&&this.current_folder.get("title"))),this.trigger("reset"),this.switch_to_folder_and_load_page(e))},reset_if_current_page_is_destroyed:function(e){e==this.current_page&&(this.trigger("reset"),this.current_folder=
e.collection.folder)}})}),define("views/spaces/new",["backbone","jquery","pagehub"],function(e,t,n){var r=e.View.extend({el:t("#new_space"),events:{"click #check_availability":"check_availability","keyup input[type=text][name=title]":"queue_availability_check"},initialize:function(e){this.space=e.space,this.check_timer=null,this.check_pulse=250,this.elements={title:this.$el.find("input[type=text][name=title]"),availability_checker:this.$el.find("#check_availability"),title_availability:this.$el.find("#check_availability i"),brief:this.$el.find("input[type=text][name=brief]"),is_public:this.$el.find("input[type=checkbox][name=is_public]")},e.trigger("bootstrapped",e)},consume:function(e){return e.preventDefault(),!1},queue_availability_check:function(){this.check_timer&&(clearTimeout(this.check_timer),this.check_timer=null);var e=this;return this.check_timer=setTimeout(function(){return e.check_availability()},this.check_pulse),!1},check_availability:function(){var e=this.elements.availability_checker
,n=this.elements.title.val(),r=this;return n.length==0?(e.addClass("btn-danger").removeClass("btn-success").find("i").addClass("icon-remove"),!1):n.trim()==this.space.get("title")?!1:(t.ajax({url:r.space.get("media").name_availability_url,type:"POST",data:JSON.stringify({name:n}),success:function(t){t.available?e.removeClass("btn-danger").addClass("btn-success").find("i").removeClass("icon-remove"):e.removeClass("btn-success").addClass("btn-danger").find("i").addClass("icon-remove")}}),!1)}});return r}),define("views/spaces/settings/router",["backbone"],function(e){$(document).on("click",".settings nav a:not([data-bypass]), a[data-routeme]",function(t){var n={prop:$(this).prop("href"),attr:$(this).attr("href")};t.preventDefault(),e.history.navigate(n.attr,!0)});var t=e.Router.extend({routes:{"":"initial_section",publishing:"initial_publishing_section","publishing/:section":"publishing_section",":section":"section"},initialize:function(e,t){this.view=e,this.initial_section=t},initial_section
:function(){return this.navigate(this.initial_section,{trigger:!0,replace:!0})},initial_publishing_section:function(e){return this.navigate("publishing/layout",{trigger:!0,replace:!0})},section:function(e){return this.view.trigger("section_changed",e)},publishing_section:function(e){return this.section("publishing"),this.view.get_view("publishing").trigger("section_changed","publishing/"+e),this}});return t}),define("hbs!templates/dialogs/destroy_space",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function c(e,t){var n="";return n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f=this,l=n.helperMissing;s+="<div>\n  <p>\n    The space has\n    ",a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.pluralize,o?o.call(t,"page",(o=t.meta,o==null||o===!1?o:o.nr_pages),a):l.call(t,"pluralize","page",(o=t.meta,o==null||o===!1?o:o.nr_pages),a));if(u||u===0)s+=u;s+=",\n    ",a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.pluralize,o?o.call(t
,"folder",(o=t.meta,o==null||o===!1?o:o.nr_folders),a):l.call(t,"pluralize","folder",(o=t.meta,o==null||o===!1?o:o.nr_folders),a));if(u||u===0)s+=u;s+=",\n    and ",a={hash:{},inverse:f.noop,fn:f.program(1,c,i)},u=(o=n.pluralize,o?o.call(t,"member",(o=t.meta,o==null||o===!1?o:o.nr_members),a):l.call(t,"pluralize","member",(o=t.meta,o==null||o===!1?o:o.nr_members),a));if(u||u===0)s+=u;return s+=".\n    Are you sure you want to destroy it?\n  </p>\n  <p><strong>WARNING<strong>: destroying this space will irreversibly remove every page and folder it contains!</p>\n</div>",s});return t.registerPartial("templates_dialogs_destroy_space",n),n}),define("hbs!templates/spaces/settings/dialog_change_title_warning",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div title="Confirmation required">\n  <p>\n    <strong>WARNING: </strong>\n    changing the space name will irreversibly invalidate\n    all public links of the space\'s pages that were shared\n    with members or people.\n  </p>\n  <p>Are you sure you want to do this?</p>\n</div>'
});return t.registerPartial("templates_spaces_settings_dialog_change_title_warning",n),n}),define("hbs!templates/messages/relocation_error",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,"<p>If you are seeing this message, it means we were unable\nto relocate you to your dashboard. Taking any further actions in\nthis section will result in errors as the space has been destroyed.</p>\n\n<p>Please visit <a href='/'>your dashboard</a> to proceed.</p>"});return t.registerPartial("templates_messages_relocation_error",n),n}),define("views/spaces/settings/general",["views/shared/settings/setting_view","jquery","pagehub","hbs!templates/dialogs/destroy_space","hbs!templates/spaces/settings/dialog_change_title_warning","hbs!templates/messages/relocation_error"],function(e,t,n,r,i,s){var o=e.extend({el:t("#space_general_settings"),events:{"click #check_availability":"check_availability","keyup input[type=text][name=title]"
:"queue_availability_check","click #destroy_space":"confirm_total_destruction","change input[type=checkbox]":"propagate_sync"},templates:{title_change_warning:i,relocation_error:s},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.check_timer=null,this.check_pulse=250,this.elements={title:this.$el.find("input[type=text][name=title]"),availability_checker:this.$el.find("#check_availability"),title_availability:this.$el.find("#check_availability i"),title_confirmation:this.$el.find("input[type=checkbox][name=title_confirmation]"),brief:this.$el.find("input[type=text][name=brief]"),is_public:this.$el.find("input[type=checkbox][name=is_public]")},this.director.before_sync(this,this.show_title_change_warning)},consume:function(e){return e.preventDefault(),!1},queue_availability_check:function(){this.check_timer&&(clearTimeout(this.check_timer),this.check_timer=null);var e=this;return this.check_timer=setTimeout(function(){return e.check_availability()},this.check_pulse
),!1},hide:function(){return e.prototype.hide.apply(this),this.elements.title.val(this.space.get("title")),this},check_availability:function(){var e=this.elements.availability_checker,n=this.elements.title.val(),r=this;return n.length==0?(e.addClass("btn-danger").removeClass("btn-success").find("i").addClass("icon-remove"),!1):n.trim()==this.space.get("title")?(this.mark_destructive_action(!1),!1):(t.ajax({url:r.space.get("media").name_availability_url,type:"POST",data:JSON.stringify({name:n}),success:function(t){t.available?(e.removeClass("btn-danger").addClass("btn-success").find("i").removeClass("icon-remove"),r.mark_destructive_action(!0)):(e.removeClass("btn-success").addClass("btn-danger").find("i").addClass("icon-remove"),r.mark_destructive_action(!1))}}),!1)},show_title_change_warning:function(){var e=this;return this.space.get("title")==this.elements.title.val()?!0:(t(e.templates.title_change_warning()).dialog({dialogClass:"alert-dialog",buttons:{Cancel:function(){t(this).dialog
("close")},Confirm:function(){t(this).dialog("close"),e.propagate_sync(!0)}}}),this.director.abort_sync=!0,!1)},confirm_total_destruction:function(e){var n=this;return e.preventDefault(),t(r(this.space.toJSON())).dialog({title:"Space removal",dialogClass:"alert-dialog",open:function(){t(this).parents(".ui-dialog:first").find("button:last").addClass("btn-danger")},buttons:{Cancel:function(){t(this).dialog("close")},Destroy:function(e){var r=t(this);n.space.destroy({wait:!0,success:function(){window.location="/",r.dialog("close"),t("<div>"+n.templates.relocation_error()+"</div>").dialog({modal:!0,dialogClass:"alert-dialog no-close",resizable:!1,closeOnEscape:!1,title:"Relocation Error"})}}),e.preventDefault()}}}),!1},serialize:function(){var e=this.$el.serializeObject();return e.is_public=e.is_public=="true"?!0:!1,e}});return o}),define("hbs!templates/spaces/settings/membership_record",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var n="";return n
}function d(e,t){var r="",i;return r+='\n      <button rel="tooltip" title="Remove this ',(i=n.role)?i=i.call(e,{hash:{}}):(i=e.role,i=typeof i===f?i.apply(e):i),r+=l(i)+' from the space" class="btn btn-mini btn-danger" data-action="kick"><i class="icon-remove"></i> Uninvite</button>\n    ',r}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<tr id="user_',(o=n.id)?o=o.call(t,{hash:{}}):(o=t.id,o=typeof o===f?o.apply(t):o),s+=l(o)+'">\n  <td><img class="avatar" src="',(o=n.gravatar)?o=o.call(t,{hash:{}}):(o=t.gravatar,o=typeof o===f?o.apply(t):o),s+=l(o)+'" /> ',(o=n.nickname)?o=o.call(t,{hash:{}}):(o=t.nickname,o=typeof o===f?o.apply(t):o),s+=l(o)+"</td>\n  <td>\n    <span>",a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.pluralize,o?o.call(t,"page",(o=t.contributions,o==null||o===!1?o:o.nr_pages),a):h.call(t,"pluralize","page",(o=t.contributions,o==null||o===!1?o:o.nr_pages),a));if(u||u===0)s+=u;
s+="</span> and\n    <span>",a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.pluralize,o?o.call(t,"folder",(o=t.contributions,o==null||o===!1?o:o.nr_folders),a):h.call(t,"pluralize","folder",(o=t.contributions,o==null||o===!1?o:o.nr_folders),a));if(u||u===0)s+=u;s+='</span>\n  </td>\n  <td>\n    <label><input type="radio" name="users[',(u=n.id)?u=u.call(t,{hash:{}}):(u=t.id,u=typeof u===f?u.apply(t):u),s+=l(u)+'][role]" value="member" ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.checkify,o?o.call(t,t.role,"member",a):h.call(t,"checkify",t.role,"member",a));if(u||u===0)s+=u;s+=' /> M</label>\n    <label><input type="radio" name="users[',(u=n.id)?u=u.call(t,{hash:{}}):(u=t.id,u=typeof u===f?u.apply(t):u),s+=l(u)+'][role]" value="editor" ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.checkify,o?o.call(t,t.role,"editor",a):h.call(t,"checkify",t.role,"editor",a));if(u||u===0)s+=u;s+=' /> E</label>\n    <label><input type="radio" name="users[',(u=n.id)?u=u.call(t,{hash
:{}}):(u=t.id,u=typeof u===f?u.apply(t):u),s+=l(u)+'][role]" value="admin"  ',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.checkify,o?o.call(t,t.role,"admin creator",a):h.call(t,"checkify",t.role,"admin creator",a));if(u||u===0)s+=u;s+=" /> A</label>\n  </td>\n  <td>\n    ",u=n["if"].call(t,t.can_kick,{hash:{},inverse:c.noop,fn:c.program(3,d,i)});if(u||u===0)s+=u;return s+="\n  </td>\n</tr>",s});return t.registerPartial("templates_spaces_settings_membership_record",n),n}),define("views/spaces/settings/memberships",["views/shared/settings/setting_view","jquery","pagehub","hbs!templates/spaces/settings/membership_record"],function(e,t,n,r){var i=e.extend({el:t("#space_membership_settings"),events:{"click #force_user_search":"force_user_search","click button":"consume","click [data-action=kick]":"kick_user","change #membership_records input[type=radio][name^=users]":"rankify"},templates:{record:r},initialize:function(t){e.prototype.initialize.apply(this,arguments),this._ctx={},this
.lookup_timer=null,this.lookup_pulse=250,this.elements={user_search:this.$el.find("#user_search"),user_listing:this.$el.find("#user_listing"),membership_records:this.$el.find("#membership_records")},this.unserializable=!0,this.bootstrap()},force_user_search:function(){return this.elements.user_search.autocomplete("search"),this},bootstrap:function(){var e=this;return this.elements.user_search.autocomplete({delay:this.lookup_pulse,appendTo:this.elements.user_listing,focus:function(e){return e.preventDefault(),!1},source:function(n,r){t.ajax({url:"/users/lookup/by_nickname",method:"GET",data:{nickname:n.term},success:function(t){e._ctx.users=t,r(_.collect(t,function(e){return{label:e.nickname,value:e.id,icon:e.gravatar}}))}})}}).data("ui-autocomplete")._renderItem=function(e,n){return t("<li>").append('<a><img src="'+n.icon+'" /> '+n.label+"</a>").appendTo(e)},this.elements.user_search.on("autocompleteselect",e,e.add_user),this.space.get("memberships").every(function(e){return this.add_record
(e)},this)},membership_from_id:function(e){return _.select(this.space.get("memberships"),function(t){return t.id==e})[0]},membership_from_nickname:function(e){return _.select(this.space.get("memberships"),function(t){return t.nickname==e})[0]},membership_from_record:function(e){var t=e.parents("tr[id]:first").attr("id").replace("user_","");return this.membership_from_id(t)},add_record:function(e,t){var n=e;n.can_kick=e.id!=parseInt(this.space.get("creator.id"));var i=r(n);return t?t.replaceWith(i):this.elements.membership_records.append(i),this},rankify:function(e){var r=t(e.target),i=this.membership_from_record(r),s=r.val(),o=this;return o.trigger("sync",{memberships:[{user_id:i.id,role:s}]},{success:function(){n.status.show(i.nickname+" is now a "+s.vowelize()+" of this space.","good")},error:function(){o.add_record(i,r.parents("tr:first"))}}),e.preventDefault(),!1},consume:function(e){return e.preventDefault(),!1},serialize:function(){return{}},add_user:function(e,r){var i=t(e.target
),s=r.item.value,o=r.item.label,u=r.item.icon;return view=e.data,m=view.membership_from_id(s),view.elements.user_search.val(r.item.label),e.preventDefault(),m?(n.status.show(m.nickname+" is already a member!","bad"),!0):(view.trigger("sync",{memberships:[{user_id:s,role:"member"}]},{success:function(){n.status.show(o+" is now a member of this space.","good"),view.add_record(view.membership_from_id(s))}}),!0)},kick_user:function(e){var r=t(e.target),i=this.membership_from_record(r),s=this;s.trigger("sync",{memberships:[{user_id:i.id,role:null}]},{success:function(){s.elements.membership_records.find("#user_"+i.id).remove(),n.status.show(i.nickname+" is no longer a member of this space.","good"),t("body > .tooltip:last").remove()}})}});return i}),define("views/spaces/settings/publishing/theme",["backbone","jquery","pagehub","views/shared/settings/setting_view"],function(e,t,n,r){return r.extend({el:t("form#theme_settings"),events:{"change input":"propagate_sync"},serialize:function(){return{
theme:t.extend(!0,{name:"Clean"},this.$el.serializeObject())}}})}),define("views/spaces/settings/publishing/layout",["backbone","jquery","pagehub","views/shared/settings/setting_view"],function(e,t,n,r){return r.extend({el:t("form#layout_settings"),events:{"change input":"propagate_sync"},serialize:function(){return{layout:t.extend(!0,{name:"fluid",show_homepages_in_sidebar:!1,show_breadcrumbs:!1},this.$el.serializeObject())}}})}),define("hbs!templates/spaces/settings/navigation_link",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u="function";s+='  <!-- <div > -->\n<div class="input-append input-prepend">\n    <input class="span4" placeholder="http://www.website.com" type="text" name="navigation_links[uris][]" value="',(o=n.uri)?o=o.call(t,{hash:{}}):(o=t.uri,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;s+='" />\n    <input class="span2" placeholder="Main Website" type="text" name="navigation_links[titles][]" value="'
,(o=n.title)?o=o.call(t,{hash:{}}):(o=t.title,o=typeof o===u?o.apply(t):o);if(o||o===0)s+=o;return s+='" />\n    <button rel="tooltip" class="btn btn-danger" title="Remove this link" data-placement="right"><i class="icon-remove"></i> </button>\n  <!-- </div> -->\n</div>',s});return t.registerPartial("templates_spaces_settings_navigation_link",n),n}),define("views/spaces/settings/publishing/navigation_links",["backbone","views/shared/settings/setting_view","hbs!templates/spaces/settings/navigation_link"],function(e,t,n){return t.extend({el:$("form#navigation_links_settings"),events:{"click #add_navigation_link":"add_navigation_link","click #navigation_links button":"remove_navigation_link"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.links=this.$el.find("#navigation_links")},render:function(){return t.prototype.render.apply(this,arguments),this.links.empty(),_.each(this.space.get("preferences.publishing.navigation_links"),function(e){return this.links.append(
n(e))||!0},this),this},serialize:function(){var e=this.$el.serializeObject();return e.navigation_links?(e=_.zip(e.navigation_links.uris,e.navigation_links.titles),e=_.collect(e,function(e){return{uri:e[0],title:e[1]}})):e=[],{navigation_links:e}},add_navigation_link:function(){return this.links.append(n({})),!0},remove_navigation_link:function(e){return $(e.target).parents("div:first").remove(),$("body > .tooltip:last").remove(),this.propagate_sync()}})}),define("views/spaces/settings/publishing/custom_css",["jquery","views/shared/settings/setting_view","views/spaces/editor"],function(e,t,n){return t.extend({el:e("form#custom_css_settings"),events:{"change input":"propagate_sync"},initialize:function(e){t.prototype.initialize.apply(this,arguments),this.editor=new n({space:this.space,config:{el:"#css_editor",mode:"css",offset:230}})},render:function(){return t.prototype.render.apply(this,arguments),this.editor.reset().editor.setValue(this.space.get("preferences.publishing.custom_css")||""
),this},serialize:function(){var e=this.editor.serialize();return{custom_css:e}}})}),define("views/spaces/settings/publishing",["backbone","jquery","pagehub","views/shared/settings/director","views/spaces/settings/publishing/theme","views/spaces/settings/publishing/layout","views/spaces/settings/publishing/navigation_links","views/spaces/settings/publishing/custom_css"],function(e,t,n,r,i,s,o,u){var a=r.extend({el:t("#space_publishing_settings"),initialize:function(e){r.prototype.initialize.call(this,e.space,e.state),_.implode(this,e),this.add_alias("space"),this.register(s,"publishing/layout"),this.register(i,"publishing/theme"),this.register(o,"publishing/navigation_links"),this.register(u,"publishing/custom_css"),this.nav=t(".settings .subnav"),this.bootstrap()},bootstrap:function(){_.each(this.views,function(e){return e.$el.hide(),!0})},serialize:function(){return{preferences:{publishing:r.prototype.serialize.apply(this)}}},hide:function(){return this.current_view=null,_.each(this.views
,function(e){return e.hide(),!0}),this}});return a}),define("views/spaces/settings/browsability",["views/shared/settings/setting_view","jquery","pagehub"],function(e,t,n,r){var i=e.extend({el:t("#space_browsability_settings"),events:{"change input[name^=folders]":"update_folder_browsability","change input[name^=pages]":"update_page_browsability"},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.space.folders.on("change:browsable",this.adjust_folder_contents_browsability,this),this.space.folders.on("change:pages.browsable",this.adjust_page_browsability,this),this.unserializable=!0,this.bootstrap()},bootstrap:function(){this.space.folders.every(function(e){return e.trigger("change:browsable",e),!0})},adjust_folder_contents_browsability:function(e){var n=e.get("browsable"),r=t("input[name^=folders][value="+e.get("id")+"]");return r.parents("li:first").find("> ol").attr("disabled",!n).find("label").toggleClass("disabled",!n).find("input").attr("disabled",!n),!0},serialize
:function(){return!1},update_resource_browsability:function(e,t){e.save({browsable:t},{wait:!0,patch:!0,success:function(){n.status.show("Saved","good")}})},update_folder_browsability:function(e){var n=t(e.target),r=n.val(),i=n.is(":checked"),s=this.space.folders.get(r);return this.update_resource_browsability(s,i)},update_page_browsability:function(e){var n=t(e.target),r=n.val(),i=n.is(":checked"),s=this.space.folders.get(n.parents("li:first").attr("data-folder")),o=s.pages.get(r);return this.update_resource_browsability(o,i)}});return i}),define("views/spaces/settings/index",["views/shared/settings/director","jquery","pagehub","shortcut","views/spaces/settings/router","views/spaces/settings/general","views/spaces/settings/memberships","views/spaces/settings/publishing","views/spaces/settings/browsability"],function(e,t,n,r,i,s,o,u,a){var f={"true":"Saving...","false":"Save"},l=e.extend({initialize:function(n){e.prototype.initialize.call(this,n.space,n),this.fetch_after_sync=!0,this.state
.trigger("highlight_nav_section","space_settings"),this.add_alias("space");var f=this;this.label="settings",this.space=this.model,this.nav=t(".settings nav"),this.save_button=this.nav.find("button[data-role=save]"),this.set_router(i,"general"),this.register(s,"general"),this.register(o,"memberships"),this.register(u,"publishing"),this.register(a,"browsability"),r.add("ctrl+alt+v",function(){window.open(f.space.get("media.href"),"_preview")}),r.add("ctrl+alt+s",function(){n.current_director.save()}),this.save_button.on("click",function(){n.current_director.save()}),this.state.on("change:syncing",this.control_save_button,this),this.ctx.save_button=this.save_button,_.each(this.views,function(e){return e.$el.hide(),!0}),this.go("/edit"),this.state.trigger("bootstrapped",this.state)},hide:function(){return this.current_view=null,this},control_save_button:function(){return this.save_button.html(f[this.state.get("syncing")]).prop("disabled",this.state.get("syncing")),this}});return l}),function(
e,t,n,r){function i(t){return t[0]&&e.isPlainObject(t[0])?this.data=t[0]:this.el=t,this.isCoords=!0,this.coords={},this.init(),this}var s=i.prototype;s.init=function(){this.set(),this.original_coords=this.get()},s.set=function(e,t){var n=this.el;n&&!e&&(this.data=n.offset(),this.data.width=n.width(),this.data.height=n.height());if(n&&e&&!t){var r=n.offset();this.data.top=r.top,this.data.left=r.left}var i=this.data;return this.coords.x1=i.left,this.coords.y1=i.top,this.coords.x2=i.left+i.width,this.coords.y2=i.top+i.height,this.coords.cx=i.left+i.width/2,this.coords.cy=i.top+i.height/2,this.coords.width=i.width,this.coords.height=i.height,this.coords.el=n||!1,this},s.update=function(t){if(!t&&!this.el)return this;if(t){var n=e.extend({},this.data,t);return this.data=n,this.set(!0,!0)}return this.set(!0),this},s.get=function(){return this.coords},e.fn.coords=function(){if(this.data("coords"))return this.data("coords");var e=new i(this,arguments[0]);return this.data("coords",e),e}}(jQuery,
window,document),function(e,t,n,r){function i(t,n,r){this.options=e.extend(s,r),this.$element=t,this.last_colliders=[],this.last_colliders_coords=[],typeof n=="string"||n instanceof jQuery?this.$colliders=e(n,this.options.colliders_context).not(this.$element):this.colliders=e(n),this.init()}var s={colliders_context:n.body},o=i.prototype;o.init=function(){this.find_collisions()},o.overlaps=function(e,t){var n=!1,r=!1;if(t.x1>=e.x1&&t.x1<=e.x2||t.x2>=e.x1&&t.x2<=e.x2||e.x1>=t.x1&&e.x2<=t.x2)n=!0;if(t.y1>=e.y1&&t.y1<=e.y2||t.y2>=e.y1&&t.y2<=e.y2||e.y1>=t.y1&&e.y2<=t.y2)r=!0;return n&&r},o.detect_overlapping_region=function(e,t){var n="",r="";return e.y1>t.cy&&e.y1<t.y2&&(n="N"),e.y2>t.y1&&e.y2<t.cy&&(n="S"),e.x1>t.cx&&e.x1<t.x2&&(r="W"),e.x2>t.x1&&e.x2<t.cx&&(r="E"),n+r||"C"},o.calculate_overlapped_area_coords=function(t,n){var r=Math.max(t.x1,n.x1),i=Math.max(t.y1,n.y1),s=Math.min(t.x2,n.x2),o=Math.min(t.y2,n.y2);return e({left:r,top:i,width:s-r,height:o-i}).coords().get()},o.calculate_overlapped_area=
function(e){return e.width*e.height},o.manage_colliders_start_stop=function(t,n,r){var i=this.last_colliders_coords;for(var s=0,o=i.length;s<o;s++)e.inArray(i[s],t)===-1&&n.call(this,i[s]);for(var u=0,a=t.length;u<a;u++)e.inArray(t[u],i)===-1&&r.call(this,t[u])},o.find_collisions=function(t){var n=this,r=[],i=[],s=this.colliders||this.$colliders,o=s.length,u=n.$element.coords().update(t||!1).get();while(o--){var a=n.$colliders?e(s[o]):s[o],f=a.isCoords?a:a.coords(),l=f.get(),c=n.overlaps(u,l);if(!c)continue;var h=n.detect_overlapping_region(u,l);if(h==="C"){var p=n.calculate_overlapped_area_coords(u,l),d=n.calculate_overlapped_area(p),v={area:d,area_coords:p,region:h,coords:l,player_coords:u,el:a};n.options.on_overlap&&n.options.on_overlap.call(this,v),r.push(f),i.push(v)}}return(n.options.on_overlap_stop||n.options.on_overlap_start)&&this.manage_colliders_start_stop(r,n.options.on_overlap_stop,n.options.on_overlap_start),this.last_colliders_coords=r,i},o.get_closest_colliders=function(
e){var t=this.find_collisions(e);return t.sort(function(e,t){return e.region==="C"&&t.region==="C"?e.coords.y1<t.coords.y1||e.coords.x1<t.coords.x1?-1:1:e.area<t.area?1:1}),t},e.fn.collision=function(e,t){return new i(this,e,t)}}(jQuery,window,document),function(e,t){e.debounce=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)};n&&!r&&e.apply(i,s),clearTimeout(r),r=setTimeout(o,t)}},e.throttle=function(e,t){var n,r,i,s,o,u,a=debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&e.apply(n,r),a()};return i||(i=setTimeout(f,t)),s?o=!0:u=e.apply(n,r),a(),s=!0,u}}}(window),function(e,t,n,r){function i(t,r){this.options=e.extend({},s,r),this.$body=e(n.body),this.$container=e(t),this.$dragitems=e(this.options.items,this.$container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.init()}var s={items:".gs_w",distance:1,limit:!0,offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA"
,"SELECT","BUTTON"],handle:null},o=e(t),u="ontouchstart"in t,a={start:u?"touchstart":"mousedown.draggable",move:u?"touchmove":"mousemove.draggable",end:u?"touchend":"mouseup.draggable"},f=i.prototype;f.init=function(){this.calculate_positions(),this.$container.css("position","relative"),this.disabled=!1,this.events(),e(t).bind("resize",throttle(e.proxy(this.calculate_positions,this),200))},f.events=function(){this.$container.on("selectstart",e.proxy(this.on_select_start,this)),this.$container.on(a.start,this.options.items,e.proxy(this.drag_handler,this)),this.$body.on(a.end,e.proxy(function(e){this.is_dragging=!1;if(this.disabled)return;this.$body.off(a.move),this.drag_start&&this.on_dragstop(e)},this))},f.get_actual_pos=function(e){var t=e.position();return t},f.get_mouse_pos=function(e){if(u){var t=e.originalEvent;e=t.touches.length?t.touches[0]:t.changedTouches[0]}return{left:e.clientX,top:e.clientY}},f.get_offset=function(e){e.preventDefault();var t=this.get_mouse_pos(e),n=Math.round
(t.left-this.mouse_init_pos.left),r=Math.round(t.top-this.mouse_init_pos.top),i=Math.round(this.el_init_offset.left+n-this.baseX),s=Math.round(this.el_init_offset.top+r-this.baseY+this.scrollOffset);return this.options.limit&&(i>this.player_max_left?i=this.player_max_left:i<this.player_min_left&&(i=this.player_min_left)),{left:i,top:s,mouse_left:t.left,mouse_top:t.top}},f.manage_scroll=function(e){var t,n=o.scrollTop(),r=n,i=r+this.window_height,s=i-50,u=r+50,a=e.mouse_left,f=r+e.mouse_top,l=this.doc_height-this.window_height+this.player_height;f>=s&&(t=n+30,t<l&&(o.scrollTop(t),this.scrollOffset=this.scrollOffset+30)),f<=u&&(t=n-30,t>0&&(o.scrollTop(t),this.scrollOffset=this.scrollOffset-30))},f.calculate_positions=function(e){this.window_height=o.height()},f.drag_handler=function(t){var n=t.target.nodeName;if(this.disabled||t.which!==1&&!u)return;if(this.ignore_drag(t))return;var r=this,i=!0;return this.$player=e(t.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this
.mouse_init_pos=this.get_mouse_pos(t),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$body.on(a.move,function(e){var t=r.get_mouse_pos(e),n=Math.abs(t.left-r.mouse_init_pos.left),s=Math.abs(t.top-r.mouse_init_pos.top);return n>r.options.distance||s>r.options.distance?i?(i=!1,r.on_dragstart.call(r,e),!1):(r.is_dragging===!0&&r.on_dragmove.call(r,e),!1):!1}),!1},f.on_dragstart=function(t){t.preventDefault(),this.drag_start=!0,this.is_dragging=!0;var r=this.$container.offset();return this.baseX=Math.round(r.left),this.baseY=Math.round(r.top),this.doc_height=e(n).height(),this.options.helper==="clone"?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scrollOffset=0,this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.player_max_left=this.$container.width()-this.player_width+this.options.offset_left,this.options.start&&this.options.start.
call(this.$player,t,{helper:this.helper?this.$helper:this.$player}),!1},f.on_dragmove=function(e){var t=this.get_offset(e);this.options.autoscroll&&this.manage_scroll(t),(this.helper?this.$helper:this.$player).css({position:"absolute",left:t.left,top:t.top});var n={position:{left:t.left,top:t.top}};return this.options.drag&&this.options.drag.call(this.$player,e,n),!1},f.on_dragstop=function(e){var t=this.get_offset(e);this.drag_start=!1;var n={position:{left:t.left,top:t.top}};return this.options.stop&&this.options.stop.call(this.$player,e,n),this.helper&&this.$helper.remove(),!1},f.on_select_start=function(e){if(this.disabled)return;if(this.ignore_drag(e))return;return!1},f.enable=function(){this.disabled=!1},f.disable=function(){this.disabled=!0},f.destroy=function(){this.disable(),e.removeData(this.$container,"drag")},f.ignore_drag=function(t){return this.options.handle?!e(t.target).is(this.options.handle):e.inArray(t.target.nodeName,this.options.ignore_dragging)>=0},e.fn.drag=function(
t){return this.each(function(){e.data(this,"drag")||e.data(this,"drag",new i(this,t))})}}(jQuery,window,document),function(e,t,n,r){function i(t,n){this.options=e.extend(!0,s,n),this.$el=e(t),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs_w"),this.widgets=[],this.$changed=e([]),this.wrapper_width=this.$wrapper.width(),this.min_widget_width=this.options.widget_margins[0]*2+this.options.widget_base_dimensions[0],this.min_widget_height=this.options.widget_margins[1]*2+this.options.widget_base_dimensions[1],this.init()}var s={namespace:"",widget_selector:"li",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,min_rows:15,max_size_x:6,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,serialize_params:function(e,t){return{col:t.col,row:t.row,size_x:t.size_x,size_y:t.size_y}},collision:{},draggable:{distance:4}};i.generated_stylesheets=[];var o=i.prototype;o.init=function(){this.generate_grid_and_stylesheet
(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.$wrapper.addClass("ready"),this.draggable(),e(t).bind("resize",throttle(e.proxy(this.recalculate_faux_grid,this),200))},o.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},o.enable=function(){return this.drag_api.enable(),this},o.add_widget=function(t,n,r,i,s){var o;n||(n=1),r||(r=1),!i&!s?o=this.next_position(n,r):(o={col:i,row:s},this.empty_cells(i,s,n,r));var u=e(t).attr({"data-col":o.col,"data-row":o.row,"data-sizex":n,"data-sizey":r}).addClass("gs_w").appendTo(this.$el).hide();return this.$widgets=this.$widgets.add(u),this.register_widget(u),this.add_faux_rows(o.size_y),this.set_dom_grid_height(),u.fadeIn()},o.resize_widget=function(t,n,r){var i=t.coords().grid;n||(n=i.size_x),r||(r=i.size_y),n>this.cols&&(n=this.cols);var s=this.get_cells_occupied(i),o=i.size_x,u=i.size_y,a=i.col,f=a,l=n>o,c=r>u;if(a+n-1>this.cols){var h=a+(n-1)-this.cols,p=a-h;f=Math
.max(1,p)}var d={col:f,row:i.row,size_x:n,size_y:r},v=this.get_cells_occupied(d),m=[];e.each(s.cols,function(t,n){e.inArray(n,v.cols)===-1&&m.push(n)});var g=[];e.each(v.cols,function(t,n){e.inArray(n,s.cols)===-1&&g.push(n)});var y=[];e.each(s.rows,function(t,n){e.inArray(n,v.rows)===-1&&y.push(n)});var b=[];e.each(v.rows,function(t,n){e.inArray(n,s.rows)===-1&&b.push(n)}),this.remove_from_gridmap(i);if(g.length){var w=[f,i.row,n,Math.min(u,r),t];this.empty_cells.apply(this,w)}if(b.length){var E=[f,i.row,n,r,t];this.empty_cells.apply(this,E)}i.col=f,i.size_x=n,i.size_y=r,this.add_to_gridmap(d,t),t.data("coords").update({width:n*this.options.widget_base_dimensions[0]+(n-1)*this.options.widget_margins[0]*2,height:r*this.options.widget_base_dimensions[1]+(r-1)*this.options.widget_margins[1]*2}),r>u&&this.add_faux_rows(r-u),n>o&&this.add_faux_cols(n-o),t.attr({"data-col":f,"data-sizex":n,"data-sizey":r});if(m.length){var S=[m[0],i.row,m.length,Math.min(u,r),t];this.remove_empty_cells.apply
(this,S)}if(y.length){var x=[f,i.row,n,r,t];this.remove_empty_cells.apply(this,x)}return t},o.empty_cells=function(t,n,r,i,s){var o=this.widgets_below({col:t,row:n-i,size_x:r,size_y:i});return o.not(s).each(e.proxy(function(t,r){var s=e(r).coords().grid;if(!(s.row<=n+i-1))return;var o=n+i-s.row;this.move_widget_down(e(r),o)},this)),this.set_dom_grid_height(),this},o.remove_empty_cells=function(t,n,r,i,s){var o=this.widgets_below({col:t,row:n,size_x:r,size_y:i});return o.not(s).each(e.proxy(function(t,n){this.move_widget_up(e(n),i)},this)),this.set_dom_grid_height(),this},o.next_position=function(e,t){e||(e=1),t||(t=1);var n=this.gridmap,r=n.length,i=[],s;for(var o=1;o<r;o++){s=n[o].length;for(var u=1;u<=s;u++){var a=this.can_move_to({size_x:e,size_y:t},o,u);a&&i.push({col:o,row:u,size_y:t,size_x:e})}}return i.length?this.sort_by_row_and_col_asc(i)[0]:!1},o.remove_widget=function(t,n,r){var i=t instanceof jQuery?t:e(t),s=i.coords().grid;e.isFunction(n)&&(r=n,n=!1),this.cells_occupied_by_placeholder=
{},this.$widgets=this.$widgets.not(i);var o=this.widgets_below(i);this.remove_from_gridmap(s),i.fadeOut(e.proxy(function(){i.remove(),n||o.each(e.proxy(function(t,n){this.move_widget_up(e(n),s.size_y)},this)),this.set_dom_grid_height(),r&&r.call(this,t)},this))},o.remove_all_widgets=function(t){return this.$widgets.each(e.proxy(function(e,n){this.remove_widget(n,!0,t)},this)),this},o.serialize=function(t){t||(t=this.$widgets);var n=[];return t.each(e.proxy(function(t,r){n.push(this.options.serialize_params(e(r),e(r).coords().grid))},this)),n},o.serialize_changed=function(){return this.serialize(this.$changed)},o.register_widget=function(e){var t={col:parseInt(e.attr("data-col"),10),row:parseInt(e.attr("data-row"),10),size_x:parseInt(e.attr("data-sizex"),10),size_y:parseInt(e.attr("data-sizey"),10),el:e};return this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:t.size_x,size_y:t.size_y},t.col,t.row)&&(t=this.next_position(t.size_x,t.size_y),t.el=e,e.attr({"data-col":t.col,"data-row"
:t.row,"data-sizex":t.size_x,"data-sizey":t.size_y})),e.data("coords",e.coords()),e.data("coords").grid=t,this.add_to_gridmap(t,e),this},o.update_widget_position=function(e,t){return this.for_each_cell_occupied(e,function(e,n){if(!this.gridmap[e])return this;this.gridmap[e][n]=t}),this},o.remove_from_gridmap=function(e){return this.update_widget_position(e,!1)},o.add_to_gridmap=function(t,n){this.update_widget_position(t,n||t.el);if(t.el){var r=this.widgets_below(t.el);r.each(e.proxy(function(t,n){this.move_widget_up(e(n))},this))}},o.draggable=function(){var t=this,n=e.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],start:function(n,r){t.$widgets.filter(".player-revert").removeClass("player-revert"),t.$player=e(this),t.$helper=t.options.draggable.helper==="clone"?e(r.helper):t.$player,t.helper=!t.$helper.is(t.$player),t.on_start_drag.call(t,n,r),t.$el.trigger("gridster:dragstart")},stop:function(e,n){t.on_stop_drag.call(t,e,n),t.$el.trigger("gridster:dragstop"
)},drag:throttle(function(e,n){t.on_drag.call(t,e,n),t.$el.trigger("gridster:drag")},60)});return this.drag_api=this.$el.drag(n).data("drag"),this},o.on_start_drag=function(t,n){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=e.extend({},this.player_grid_data),this.$el.css("height",this.$el.height()+this.player_grid_data.size_y*this.min_widget_height);var r=this.faux_grid,i=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(r,this.options.collision),this.$preview_holder=e("<li />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:i.width,height:i.height}}).appendTo(this
.$el),this.options.draggable.start&&this.options.draggable.start.call(this,t,n)},o.on_drag=function(e,t){if(this.$player===null)return!1;var n={left:t.position.left+this.baseX,top:t.position.top+this.baseY};this.colliders_data=this.collision_api.get_closest_colliders(n),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:t.position.left,top:t.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,e,t)},o.on_stop_drag=function(e,t){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging"),t.position.left=t.position.left+this.baseX,t.position.top=t.position.top+this.baseY,this.colliders_data=this.collision_api.get_closest_colliders(t.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change
(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$player.addClass("player-revert").removeClass("player").attr({"data-col":this.placeholder_grid_data.col,"data-row":this.placeholder_grid_data.row}).css({left:"",top:""}),this.$changed=this.$changed.add(this.$player),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data),this.set_cells_player_occupies(this.placeholder_grid_data.col,this.placeholder_grid_data.row),this.$player.coords().grid.row=this.placeholder_grid_data.row,this.$player.coords().grid.col=this.placeholder_grid_data.col,this.options.draggable.stop&&this.options.draggable.stop.call(this,e,t),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.set_dom_grid_height()},o.on_overlapped_column_change=function(t,n){if(!this.colliders_data.length)return;var r=this.get_targeted_columns(this.colliders_data
[0].el.data.col),i=this.last_cols.length,s=r.length,o;for(o=0;o<s;o++)e.inArray(r[o],this.last_cols)===-1&&(t||e.noop).call(this,r[o]);for(o=0;o<i;o++)e.inArray(this.last_cols[o],r)===-1&&(n||e.noop).call(this,this.last_cols[o]);return this.last_cols=r,this},o.on_overlapped_row_change=function(t,n){if(!this.colliders_data.length)return;var r=this.get_targeted_rows(this.colliders_data[0].el.data.row),i=this.last_rows.length,s=r.length,o;for(o=0;o<s;o++)e.inArray(r[o],this.last_rows)===-1&&(t||e.noop).call(this,r[o]);for(o=0;o<i;o++)e.inArray(this.last_rows[o],r)===-1&&(n||e.noop).call(this,this.last_rows[o]);this.last_rows=r},o.set_player=function(e,t,n){var r=this;n||this.empty_cells_player_occupies();var i=n?{col:e}:r.colliders_data[0].el.data,s=i.col,o=t||i.row;this.player_grid_data={col:s,row:o,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);var u=this.get_widgets_overlapped(this.player_grid_data
),a=this.widgets_constraints(u);this.manage_movements(a.can_go_up,s,o),this.manage_movements(a.can_not_go_up,s,o);if(!u.length){var f=this.can_go_player_up(this.player_grid_data);f!==!1&&(o=f),this.set_placeholder(s,o)}return{col:s,row:o}},o.widgets_constraints=function(t){var n=e([]),r,i=[],s=[];return t.each(e.proxy(function(t,r){var o=e(r),u=o.coords().grid;this.can_go_widget_up(u)?(n=n.add(o),i.push(u)):s.push(u)},this)),r=t.not(n),{can_go_up:this.sort_by_row_asc(i),can_not_go_up:this.sort_by_row_desc(s)}},o.sort_by_row_asc=function(t){return t=t.sort(function(t,n){return t.row||(t=e(t).coords().grid,n=e(n).coords().grid),t.row>n.row?1:-1}),t},o.sort_by_row_and_col_asc=function(e){return e=e.sort(function(e,t){return e.row>t.row||e.row===t.row&&e.col>t.col?1:-1}),e},o.sort_by_col_asc=function(e){return e=e.sort(function(e,t){return e.col>t.col?1:-1}),e},o.sort_by_row_desc=function(e){return e=e.sort(function(e,t){return e.row+e.size_y<t.row+t.size_y?1:-1}),e},o.manage_movements=function(
t,n,r){return e.each(t,e.proxy(function(e,t){var i=t,s=i.el,o=this.can_go_widget_up(i);if(o)this.move_widget_to(s,o),this.set_placeholder(n,o+i.size_y);else{var u=this.can_go_player_up(this.player_grid_data);if(!u){var a=r+this.player_grid_data.size_y-i.row;this.move_widget_down(s,a),this.set_placeholder(n,r)}}},this)),this},o.is_player=function(e,t){if(t&&!this.gridmap[e])return!1;var n=t?this.gridmap[e][t]:e;return n&&(n.is(this.$player)||n.is(this.$helper))},o.is_player_in=function(t,n){var r=this.cells_occupied_by_player||{};return e.inArray(t,r.cols)>=0&&e.inArray(n,r.rows)>=0},o.is_placeholder_in=function(t,n){var r=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(t)&&e.inArray(n,r.rows)>=0},o.is_placeholder_in_col=function(t){var n=this.cells_occupied_by_placeholder||[];return e.inArray(t,n.cols)>=0},o.is_empty=function(e,t){return typeof this.gridmap[e]!="undefined"&&typeof this.gridmap[e][t]!="undefined"&&this.gridmap[e][t]===!1?!0:!1},o.is_occupied=function(
e,t){return this.gridmap[e]?this.gridmap[e][t]?!0:!1:!1},o.is_widget=function(e,t){var n=this.gridmap[e];return n?(n=n[t],n?n:!1):!1},o.is_widget_under_player=function(e,t){return this.is_widget(e,t)?this.is_player_in(e,t):!1},o.get_widgets_under_player=function(t){t||(t=this.cells_occupied_by_player||{cols:[],rows:[]});var n=e([]);return e.each(t.cols,e.proxy(function(r,i){e.each(t.rows,e.proxy(function(e,t){this.is_widget(i,t)&&(n=n.add(this.gridmap[i][t]))},this))},this)),n},o.set_placeholder=function(t,n){var r=e.extend({},this.placeholder_grid_data),i=this.widgets_below({col:r.col,row:r.row,size_y:r.size_y,size_x:r.size_x}),s=t+r.size_x-1;s>this.cols&&(t-=s-t);var o=this.placeholder_grid_data.row<n,u=this.placeholder_grid_data.col!==t;this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=n,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":n,"data-col":t}),(o||u)&&i.each(e.proxy(function(n,i){this.move_widget_up
(e(i),this.placeholder_grid_data.col-t+r.size_y)},this));var a=this.get_widgets_under_player(this.cells_occupied_by_placeholder);a.length&&a.each(e.proxy(function(t,i){var s=e(i);this.move_widget_down(s,n+r.size_y-s.data("coords").grid.row)},this))},o.can_go_player_up=function(e){var t=e.row+e.size_y-1,n=!0,r=[],i=1e4,s=this.get_widgets_under_player();return this.for_each_column_occupied(e,function(e){var o=this.gridmap[e],u=t+1;r[e]=[];while(--u>0){if(!(this.is_empty(e,u)||this.is_player(e,u)||this.is_widget(e,u)&&o[u].is(s)))break;r[e].push(u),i=u<i?u:i}if(r[e].length===0)return n=!1,!0;r[e].sort()}),n?this.get_valid_rows(e,r,i):!1},o.can_go_widget_up=function(e){var t=e.row+e.size_y-1,n=!0,r=[],i=1e4;return this.for_each_column_occupied(e,function(s){var o=this.gridmap[s];r[s]=[];var u=t+1;while(--u>0){if(this.is_widget(s,u)&&!this.is_player_in(s,u)&&!o[u].is(e.el))break;!this.is_player(s,u)&&!this.is_placeholder_in(s,u)&&!this.is_player_in(s,u)&&r[s].push(u),u<i&&(i=u)}if(r[s].length===0
)return n=!1,!0;r[s].sort()}),n?this.get_valid_rows(e,r,i):!1},o.get_valid_rows=function(t,n,r){var i=t.row,s=t.row+t.size_y-1,o=t.size_y,u=r-1,a=[];while(++u<=s){var f=!0;e.each(n,function(t,n){e.isArray(n)&&e.inArray(u,n)===-1&&(f=!1)});if(f===!0){a.push(u);if(a.length===o)break}}var l=!1;return o===1?a[0]!==i&&(l=a[0]||!1):a[0]!==i&&(l=this.get_consecutive_numbers_index(a,o)),l},o.get_consecutive_numbers_index=function(e,t){var n=e.length,r=[],i=!0,s=-1;for(var o=0;o<n;o++){if(i||e[o]===s+1){r.push(o);if(r.length===t)break;i=!1}else r=[],i=!0;s=e[o]}return r.length>=t?e[r[0]]:!1},o.get_widgets_overlapped=function(){var t,n=e([]),r=[],i=this.cells_occupied_by_player.rows.slice(0);return i.reverse(),e.each(this.cells_occupied_by_player.cols,e.proxy(function(t,s){e.each(i,e.proxy(function(t,i){if(!this.gridmap[s])return!0;var o=this.gridmap[s][i];this.is_occupied(s,i)&&!this.is_player(o)&&e.inArray(o,r)===-1&&(n=n.add(o),r.push(o))},this))},this)),n},o.on_start_overlapping_column=function(
e){this.set_player(e,!1)},o.on_start_overlapping_row=function(e){this.set_player(!1,e)},o.on_stop_overlapping_column=function(e){this.set_player(e,!1);var t=this;this.for_each_widget_below(e,this.cells_occupied_by_player.rows[0],function(e,n){t.move_widget_up(this,t.player_grid_data.size_y)})},o.on_stop_overlapping_row=function(e){this.set_player(!1,e);var t=this,n=this.cells_occupied_by_player.cols;for(var r=0,i=n.length;r<i;r++)this.for_each_widget_below(n[r],e,function(e,n){t.move_widget_up(this,t.player_grid_data.size_y)})},o.move_widget_to=function(t,n){var r=this,i=t.coords().grid,s=n-i.row,o=this.widgets_below(t),u=this.can_move_to(i,i.col,n,t);return u===!1?!1:(this.remove_from_gridmap(i),i.row=n,this.add_to_gridmap(i),t.attr("data-row",n),this.$changed=this.$changed.add(t),o.each(function(t,n){var i=e(n),s=i.coords().grid,o=r.can_go_widget_up(s);o&&o!==s.row&&r.move_widget_to(i,o)}),this)},o.move_widget_up=function(t,n){var r=t.coords().grid,i=r.row,s=[],o=!0;n||(n=1);if(!this.
can_go_up(t))return!1;this.for_each_column_occupied(r,function(r){if(e.inArray(t,s)===-1){var o=t.coords().grid,u=i-n;u=this.can_go_up_to_row(o,r,u);if(!u)return!0;var a=this.widgets_below(t);this.remove_from_gridmap(o),o.row=u,this.add_to_gridmap(o),t.attr("data-row",o.row),this.$changed=this.$changed.add(t),s.push(t),a.each(e.proxy(function(t,r){this.move_widget_up(e(r),n)},this))}})},o.move_widget_down=function(t,n){var r=t.coords().grid,i=r.row,s=[],o=n;if(!t)return!1;if(e.inArray(t,s)===-1){var u=t.coords().grid,a=i+n,f=this.widgets_below(t);this.remove_from_gridmap(u),f.each(e.proxy(function(t,n){var r=e(n),i=r.coords().grid,s=this.displacement_diff(i,u,o);s>0&&this.move_widget_down(r,s)},this)),u.row=a,this.update_widget_position(u,t),t.attr("data-row",u.row),this.$changed=this.$changed.add(t),s.push(t)}},o.can_go_up_to_row=function(t,n,r){var i=this.gridmap,s=!0,o=[],u=t.row,a;this.for_each_column_occupied(t,function(e){var t=i[e];o[e]=[],a=u;while(a--){if(!this.is_empty(e,a)||!!
this.is_placeholder_in(e,a))break;o[e].push(a)}if(!o[e].length)return s=!1,!0});if(!s)return!1;a=r;for(a=1;a<u;a++){var f=!0;for(var l=0,c=o.length;l<c;l++)o[l]&&e.inArray(a,o[l])===-1&&(f=!1);if(f===!0){s=a;break}}return s},o.displacement_diff=function(e,t,n){var r=e.row,i=[],s=t.row+t.size_y;this.for_each_column_occupied(e,function(e){var t=0;for(var n=s;n<r;n++)this.is_empty(e,n)&&(t+=1);i.push(t)});var o=Math.max.apply(Math,i);return n-=o,n>0?n:0},o.widgets_below=function(t){var n=e.isPlainObject(t)?t:t.coords().grid,r=this,i=this.gridmap,s=n.row+n.size_y-1,o=e([]);return this.for_each_column_occupied(n,function(t){r.for_each_widget_below(t,s,function(t,n){if(!r.is_player(this)&&e.inArray(this,o)===-1)return o=o.add(this),!0})}),this.sort_by_row_asc(o)},o.set_cells_player_occupies=function(e,t){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=e,this.placeholder_grid_data.row=t,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this
},o.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},o.can_go_up=function(e){var t=e.coords().grid,n=t.row,r=n-1,i=this.gridmap,s=[],o=!0;return n===1?!1:(this.for_each_column_occupied(t,function(e){var t=this.is_widget(e,r);if(this.is_occupied(e,r)||this.is_player(e,r)||this.is_placeholder_in(e,r)||this.is_player_in(e,r))return o=!1,!0}),o)},o.can_move_to=function(e,t,n,r){var i=this.gridmap,s=e.el,o={size_y:e.size_y,size_x:e.size_x,col:t,row:n},u=!0,a=t+e.size_x-1;return a>this.cols?!1:r&&r<n+e.size_y-1?!1:(this.for_each_cell_occupied(o,function(t,n){var r=this.is_widget(t,n);r&&(!e.el||r.is(s))&&(u=!1)}),u)},o.get_targeted_columns=function(e){var t=(e||this.player_grid_data.col)+(this.player_grid_data.size_x-1),n=[];for(var r=e;r<=t;r++)n.push(r);return n},o.get_targeted_rows=function(e){var t=(e||this.player_grid_data.row)+(this.player_grid_data.size_y-1),n=[];for(var r=e;r<=t;r++)n.push(r);return n},o.get_cells_occupied=function(
e){var t={cols:[],rows:[]},n;arguments[1]instanceof jQuery&&(e=arguments[1].coords().grid);for(n=0;n<e.size_x;n++){var r=e.col+n;t.cols.push(r)}for(n=0;n<e.size_y;n++){var i=e.row+n;t.rows.push(i)}return t},o.for_each_cell_occupied=function(e,t){return this.for_each_column_occupied(e,function(n){this.for_each_row_occupied(e,function(e){t.call(this,n,e)})}),this},o.for_each_column_occupied=function(e,t){for(var n=0;n<e.size_x;n++){var r=e.col+n;t.call(this,r,e)}},o.for_each_row_occupied=function(e,t){for(var n=0;n<e.size_y;n++){var r=e.row+n;t.call(this,r,e)}},o._traversing_widgets=function(t,n,r,i,s){var o=this.gridmap;if(!o[r])return;var u,a,f=t+"/"+n;if(arguments[2]instanceof jQuery){var l=arguments[2].coords().grid;r=l.col,i=l.row,s=arguments[3]}var c=[],h=i,p={"for_each/above":function(){while(h--)if(h>0&&this.is_widget(r,h)&&e.inArray(o[r][h],c)===-1){u=s.call(o[r][h],r,h),c.push(o[r][h]);if(u)break}},"for_each/below":function(){for(h=i+1,a=o[r].length;h<a;h++)if(this.is_widget(r,h
)&&e.inArray(o[r][h],c)===-1){u=s.call(o[r][h],r,h),c.push(o[r][h]);if(u)break}}};p[f]&&p[f].call(this)},o.for_each_widget_above=function(e,t,n){return this._traversing_widgets("for_each","above",e,t,n),this},o.for_each_widget_below=function(e,t,n){return this._traversing_widgets("for_each","below",e,t,n),this},o.get_highest_occupied_cell=function(){var e,t=this.gridmap,n=[],r=[];for(var i=t.length-1;i>=1;i--)for(e=t[i].length-1;e>=1;e--)if(this.is_widget(i,e)){n.push(e),r[e]=i;break}var s=Math.max.apply(Math,n);return this.highest_occupied_cell={col:r[s],row:s},this.highest_occupied_cell},o.get_widgets_from=function(t,n){var r=this.gridmap,i=e();return t&&(i=i.add(this.$widgets.filter(function(){var n=e(this).attr("data-col");return n===t||n>t}))),n&&(i=i.add(this.$widgets.filter(function(){var t=e(this).attr("data-row");return t===n||t>n}))),i},o.set_dom_grid_height=function(){var e=this.get_highest_occupied_cell().row;return this.$el.css("height",e*this.min_widget_height),this},o.generate_stylesheet=
function(t){var n="",r=this.options.max_size_x,s=0,o=0,u,a;t||(t={}),t.cols||(t.cols=this.cols),t.rows||(t.rows=this.rows),t.namespace||(t.namespace=this.options.namespace),t.widget_base_dimensions||(t.widget_base_dimensions=this.options.widget_base_dimensions),t.widget_margins||(t.widget_margins=this.options.widget_margins),t.min_widget_width=t.widget_margins[0]*2+t.widget_base_dimensions[0],t.min_widget_height=t.widget_margins[1]*2+t.widget_base_dimensions[1];var f=e.param(t);if(e.inArray(f,i.generated_stylesheets)>=0)return!1;i.generated_stylesheets.push(f);for(u=t.cols;u>=0;u--)n+=t.namespace+' [data-col="'+(u+1)+'"] { left:'+(u*t.widget_base_dimensions[0]+u*t.widget_margins[0]+(u+1)*t.widget_margins[0])+"px;} ";for(u=t.rows;u>=0;u--)n+=t.namespace+' [data-row="'+(u+1)+'"] { top:'+(u*t.widget_base_dimensions[1]+u*t.widget_margins[1]+(u+1)*t.widget_margins[1])+"px;} ";for(var l=1;l<=t.rows;l++)n+=t.namespace+' [data-sizey="'+l+'"] { height:'+(l*t.widget_base_dimensions[1]+(l-1)*t.widget_margins
[1]*2)+"px;}";for(var c=1;c<=r;c++)n+=t.namespace+' [data-sizex="'+c+'"] { width:'+(c*t.widget_base_dimensions[0]+(c-1)*t.widget_margins[0]*2)+"px;}";return this.add_style_tag(n)},o.add_style_tag=function(e){var t=n,r=t.createElement("style");return t.getElementsByTagName("head")[0].appendChild(r),r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(n.createTextNode(e)),this},o.generate_faux_grid=function(e,t){this.faux_grid=[],this.gridmap=[];var n,r;for(n=t;n>0;n--){this.gridmap[n]=[];for(r=e;r>0;r--)this.add_faux_cell(r,n)}return this},o.add_faux_cell=function(t,n){var r=e({left:this.baseX+(n-1)*this.min_widget_width,top:this.baseY+(t-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:n,row:t,original_col:n,original_row:t}).coords();return e.isArray(this.gridmap[n])||(this.gridmap[n]=[]),this.gridmap[n][t]=!1,this.faux_grid.push(r),this},o.add_faux_rows=function(e){var t=this.rows,n=t+(e||1);for(var r=n;r>t;r--)for(var i=
this.cols;i>=1;i--)this.add_faux_cell(r,i);return this.rows=n,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},o.add_faux_cols=function(e){var t=this.cols,n=t+(e||1);for(var r=t;r<n;r++)for(var i=this.rows;i>=1;i--)this.add_faux_cell(i,r);return this.cols=n,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},o.recalculate_faux_grid=function(){var n=this.$wrapper.width();return this.baseX=(e(t).width()-n)/2,this.baseY=this.$wrapper.offset().top,e.each(this.faux_grid,e.proxy(function(e,t){this.faux_grid[e]=t.update({left:this.baseX+(t.data.col-1)*this.min_widget_width,top:this.baseY+(t.data.row-1)*this.min_widget_height})},this)),this},o.get_widgets_from_DOM=function(){return this.$widgets.each(e.proxy(function(t,n){this.register_widget(e(n))},this)),this},o.generate_grid_and_stylesheet=function(){var n=this.$wrapper.width(),r=this.$wrapper.height(),i=Math.floor(n/this.min_widget_width)+this.options.extra_cols,s=this.$widgets.map(function(){return e
(this).attr("data-col")});s=Array.prototype.slice.call(s,0),s.length||(s=[0]);var o=Math.max.apply(Math,s),u=this.options.extra_rows;return this.$widgets.each(function(t,n){u+=+e(n).attr("data-sizey")}),this.cols=Math.max(o,i,this.options.min_cols),this.rows=Math.max(u,this.options.min_rows),this.baseX=(e(t).width()-n)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},e.fn.gridster=function(t){return this.each(function(){e(this).data("gridster")||e(this).data("gridster",new i(this,t))})},e.Gridster=o}(jQuery,window,document),define("jquery.gridster",function(){}),define("hbs!templates/users/dashboard/space_record",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){return'\n      <div class="emblem public" rel="tooltip" title="This is a public space, everyone can browse it"></div>\n    '}function d(e,t){return'\n      <div class="emblem private" rel="tooltip" title="This is a private space, guests can not browse it"></div>\n    '
}function v(e,t){return'\n      <div class="emblem owner" rel="tooltip" title="You own this space"></div>\n    '}function m(e,t){return'\n      <div class="emblem accessible" rel="tooltip" title="You have access to this space"></div>\n    '}function g(e,t){var n;return l((n=(n=e.media,n==null||n===!1?n:n.href),typeof n===f?n.apply(e):n))}function y(e,t){var n;return l((n=(n=(n=e.media,n==null||n===!1?n:n.actions),n==null||n===!1?n:n.edit),typeof n===f?n.apply(e):n))}function b(e,t){var n="";return n}function w(e,t){var r;return(r=n.brief)?r=r.call(e,{hash:{}}):(r=e.brief,r=typeof r===f?r.apply(e):r),r||r===0?r:""}function E(e,t){return'<em class="small">No description available.</em>'}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<li>\n  <div class="emblems">\n    ',o=n["if"].call(t,t.is_public,{hash:{},inverse:c.program(3,d,i),fn:c.program(1,p,i)});if(o||o===0)s+=o;s+="\n\n    ",o=n["if"].call(t,t.is_owner
,{hash:{},inverse:c.noop,fn:c.program(5,v,i)});if(o||o===0)s+=o;s+="\n\n    ",o=n["if"].call(t,t.is_member,{hash:{},inverse:c.noop,fn:c.program(7,m,i)});if(o||o===0)s+=o;s+='\n\n  </div>\n\n  <div class="meta">\n    <h3 class="blocky-heading">\n      <a href="',o=n["if"].call(t,t.is_guest,{hash:{},inverse:c.program(11,y,i),fn:c.program(9,g,i)});if(o||o===0)s+=o;s+='"><strong>',u=(o=(o=t.creator,o==null||o===!1?o:o.nickname),typeof o===f?o.apply(t):o);if(u||u===0)s+=u;s+=" / ",(u=n.title)?u=u.call(t,{hash:{}}):(u=t.title,u=typeof u===f?u.apply(t):u);if(u||u===0)s+=u;s+='</strong></a>\n      <div class="stats hint small">\n        <span>',a={hash:{},inverse:c.noop,fn:c.program(13,b,i)},u=(o=n.pluralize,o?o.call(t,"page",t.nr_pages,a):h.call(t,"pluralize","page",t.nr_pages,a));if(u||u===0)s+=u;s+="</span>\n        <!-- <span>",a={hash:{},inverse:c.noop,fn:c.program(13,b,i)},u=(o=n.pluralize,o?o.call(t,"folder",t.nr_folders,a):h.call(t,"pluralize","folder",t.nr_folders,a));if(u||u===0)s+=u;
s+="</span> -->\n        <span>, ",a={hash:{},inverse:c.noop,fn:c.program(13,b,i)},u=(o=n.pluralize,o?o.call(t,"member",t.nr_members,a):h.call(t,"pluralize","member",t.nr_members,a));if(u||u===0)s+=u;s+='</span>\n      </div>\n    </h3>\n    <p class="hint">',u=n["if"].call(t,t.brief,{hash:{},inverse:c.program(17,E,i),fn:c.program(15,w,i)});if(u||u===0)s+=u;return s+="</p>\n  </div>\n</li>",s});return t.registerPartial("templates_users_dashboard_space_record",n),n}),define("views/users/dashboard/director",["backbone","jquery","models/user","jquery.gridster","hbs!templates/users/dashboard/space_record","pagehub"],function(e,t,n,r,i,s){return e.View.extend({el:t("#dashboard"),initialize:function(e){this.state=e,this.user=e.user;var t=0;this.user.spaces.every(function(e){return t+=parseInt(e.get("nr_pages")),!0}),this.nr_pages=t,this.space_listing=this.$el.find("#user_space_listing"),this.empty_listing_marker=this.$el.find("#no_spaces_marker"),this.render(),this.state.trigger("bootstrapped"
)},render:function(){this.empty_listing_marker.toggle(this.user.spaces.models.length==0),this.user.spaces.every(function(e){var t=e.toJSON();return e.get("role")=="creator"?t.is_owner=!0:e.get("role")!=null?t.is_member=!0:t.is_guest=!0,t.brief.length==0&&(t.brief=null),this.space_listing.append(i(t)),!0},this)},weigh:function(e){var t=parseInt(e.get("nr_pages")),n=t/this.nr_pages*100,r=Math.ceil(n/this.user.spaces.length/2);return{x:r,y:Math.ceil(r)}}})}),define("views/users/settings/router",["backbone"],function(e){$(document).on("click",".settings nav a:not([data-bypass]), a[data-routeme]",function(t){var n={prop:$(this).prop("href"),attr:$(this).attr("href")};t.preventDefault(),e.history.navigate(n.attr,!0)});var t=e.Router.extend({routes:{"":"initial_section",":section":"section"},initialize:function(e,t){this.view=e,this.initial_section=t},initial_section:function(){return this.navigate(this.initial_section,{trigger:!0,replace:!0})},section:function(e){return this.view.trigger("section_changed"
,e)}});return t}),define("hbs!templates/users/settings/profile_gravatar",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){function p(e,t){var n="";return n}this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers;var s="",o,u,a,f="function",l=this.escapeExpression,c=this,h=n.helperMissing;s+='<img alt="',(o=n.nickname)?o=o.call(t,{hash:{}}):(o=t.nickname,o=typeof o===f?o.apply(t):o),s+=l(o)+' avatar" class="gravatar gravatar-icon" height="96" style="vertical-align: middle;" src="https://gravatar.com/avatar/',a={hash:{},inverse:c.noop,fn:c.program(1,p,i)},u=(o=n.gravatar_hash,o?o.call(t,t.gravatar_email,a):h.call(t,"gravatar_hash",t.gravatar_email,a));if(u||u===0)s+=u;return s+='.png?s=96" width="96">',s});return t.registerPartial("templates_users_settings_profile_gravatar",n),n}),define("views/users/settings/profile",["views/shared/settings/setting_view","jquery","pagehub","hbs!templates/users/settings/profile_gravatar"],function(e,t,n,r){return e.extend({el:t("#user_profile_settings"
),templates:{avatar:r},events:{"click [data-role=save]":"propagate_sync"},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.elements={avatar:this.$el.find("#avatar")},this.model.on("change",this.render_avatar,this),this.render_avatar()},render_avatar:function(){var e=this.model.toJSON();return e.gravatar_email||(e.gravatar_email=e.email),this.elements.avatar.html(this.templates.avatar(e)),this},serialize:function(){return this.$el.serializeObject()}})}),define("hbs!templates/users/settings/dialog_nickname_change_warning",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div title="Destructive action">\n  <p>Changing your nickname will break all the links you\'ve shared with people.</p>\n  <p>Are you sure you want to do this?</p>\n</div>'});return t.registerPartial("templates_users_settings_dialog_nickname_change_warning",n),n}),define("views/users/settings/account",["views/shared/settings/setting_view"
,"jquery","hbs!templates/users/settings/dialog_nickname_change_warning"],function(e,t,n){return e.extend({el:t("#user_account_settings"),templates:{nickname_change_warning:n},events:{"click #change_nickname":"show_nickname_change_warning","click #change_password":"propagate_sync","click #check_availability":"check_availability","keyup input[name=nickname]":"queue_availability_check"},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.check_timer=null,this.check_pulse=250,this.elements={nickname:this.$el.find("input[name=nickname]"),availability_checker:this.$el.find("#check_availability"),nickname_availability:this.$el.find("#check_availability i"),current_password:this.$el.find("input[name=current_password]"),passwords:this.$el.find("input[name^=password]"),password:this.$el.find("input[name=password]"),password_confirm:this.$el.find("input[name=password_confirmation]")},this.director.before_sync(this,this.show_nickname_change_warning),this.user.on("change:nickname"
,this.update_public_href_example,this),this.elements.current_password.on("keyup",this,this.unlock_password_form),this.reset()},serialize:function(){var e=this.$el.serializeObject();return e.current_password.length==0&&(delete e.password,delete e.password_confirmation,delete e.current_password),e},reset:function(){return e.prototype.reset.apply(this),this.elements.current_password.val("").trigger("keyup"),this.elements.passwords.val(""),this},update_public_href_example:function(){return this.$el.find("#user_public_href_example_nickname").html(this.user.get("nickname")),this},unlock_password_form:function(e){var n=e.data,r=t(e.target);return n.elements.passwords.attr("disabled",r.val().length<7),!0},show_nickname_change_warning:function(){var e=this;return this.user.get("nickname")==this.elements.nickname.val()?!0:(t(e.templates.nickname_change_warning()).dialog({dialogClass:"alert-dialog",buttons:{Cancel:function(){t(this).dialog("close")},Confirm:function(){t(this).dialog("close"),e.propagate_sync
(!0)}}}),this.director.abort_sync=!0,!1)},queue_availability_check:function(){this.check_timer&&(clearTimeout(this.check_timer),this.check_timer=null);var e=this;return this.check_timer=setTimeout(function(){return e.check_availability()},this.check_pulse),!1},check_availability:function(){var e=this.elements.availability_checker,n=this.elements.nickname.val(),r=this;return n.length==0?(e.addClass("btn-danger").removeClass("btn-success").find("i").addClass("icon-remove"),!1):n.trim()==this.model.get("nickname")?(this.mark_destructive_action(!1),!1):(t.ajax({url:r.model.get("media").name_availability_url,type:"POST",data:JSON.stringify({name:n}),success:function(t){t.available?(e.removeClass("btn-danger").addClass("btn-success").find("i").removeClass("icon-remove"),r.mark_destructive_action(!0)):(e.removeClass("btn-success").addClass("btn-danger").find("i").addClass("icon-remove"),r.mark_destructive_action(!1))}}),!1)}})}),define("views/users/settings/editing",["views/shared/settings/setting_view"
,"views/spaces/editor","jquery"],function(e,t,n){return e.extend({el:n("#user_editing_settings"),templates:{},events:{"change input[type=radio], input[type=checkbox]":"propagate_sync"},initialize:function(r){e.prototype.initialize.apply(this,arguments),this.elements={autosave:this.$el.find("input[name=autosave]"),font_face_list:this.$el.find("#editor_font_face_list"),font_size:this.$el.find("[name=font_size]"),line_height:this.$el.find("[name=line_height]"),letter_spacing:this.$el.find("[name=letter_spacing]")},this.director.on("postfetch",function(e,t){this.elements.autosave.prop("checked",t.get("preferences.editing.autosave")),this.elements.font_face_list.find("[checked], :checked").prop("checked",!1).end().find('[value="'+t.get("preferences.editing.font_face")+'"]').prop("checked",!0),this.elements.font_size.val(t.get("preferences.editing.font_size")),this.elements.line_height.val(t.get("preferences.editing.line_height")),this.elements.letter_spacing.val(t.get("preferences.editing.letter_spacing"
)),this.preview()},this),this.editor=new t({config:{el:n("#preview_editor"),no_resize:!0}}),this.preview()},preview:function(){return n(this.editor.editor.getWrapperElement()).css({"font-family":this.model.get("preferences.editing.font_face"),"font-size":this.model.get("preferences.editing.font_size")+"px","line-height":this.model.get("preferences.editing.line_height")+"px","letter-spacing":this.model.get("preferences.editing.letter_spacing")+"px"}),this.editor.editor.refresh(),this},serialize:function(){var e=this.$el.serializeObject();return e.autosave=e.autosave=="true"?!0:!1,_.each(["font_size","line_height","letter_spacing"],function(t){e[t]=parseInt(e[t])}),{preferences:{editing:e}}}})}),define("hbs!templates/users/settings/dialog_leave_space_warning",["hbs","Handlebars"],function(e,t){var n=t.template(function(e,t,n,r,i){return this.compilerInfo=[2,">= 1.0.0-rc.3"],n=n||e.helpers,'<div title="Leaving a space">\n  <p>Leaving the space will remove all the pages you\'ve written in it from that space space and will return them to you.\n  </p>\n  <p>Are you sure you want to do this?</p>\n</div>'
});return t.registerPartial("templates_users_settings_dialog_leave_space_warning",n),n}),define("views/users/settings/spaces",["views/shared/settings/setting_view","jquery","pagehub","hbs!templates/users/settings/dialog_leave_space_warning"],function(e,t,n,r){return e.extend({el:t("#user_spaces_settings"),templates:{leave_space_warning:r},events:{"click button[data-role=leave_space]":"confirm_space_leaving"},initialize:function(t){e.prototype.initialize.apply(this,arguments),this.elements={},this.unserializable=!0},confirm_space_leaving:function(e){var n=t(e.target),r=this,i=n.parents("[data-space]:first").attr("data-space");t(this.templates.leave_space_warning()).dialog({dialogClass:"alert-dialog",buttons:{Cancel:function(){t(this).dialog("close")},Confirm:function(){t(this).dialog("close"),r.leave_space(i)}}})},leave_space:function(e){var t=this,r=this.model.spaces.get(e);return r?(r.modify_membership(this.user.get("id"),null,{success:function(){n.status.show("You are no longer a member of "+
r.get("title")+".","good"),t.$el.find("[data-space="+r.get("id")+"]").remove()}}),this):(console.log("really bad, no such space"),this)},serialize:function(){return{}}})}),define("views/users/settings/index",["views/shared/settings/director","jquery","pagehub","shortcut","views/users/settings/router","views/users/settings/profile","views/users/settings/account","views/users/settings/editing","views/users/settings/spaces"],function(e,t,n,r,i,s,o,u,a){var f={"true":"Saving...","false":"Save"},l=e.extend({initialize:function(n){e.prototype.initialize.call(this,n.current_user,n);var f=this;this.label="settings",this.nav=t(".settings nav"),this.save_button=this.nav.find("button[data-role=save]"),this.set_router(i,"profile").add_alias("user").register(s,"profile").register(o,"account").register(u,"editing").register(a,"spaces"),r.add("ctrl+alt+s",function(){n.current_director.save()}),this.save_button.on("click",function(e){return n.current_director.save()}),this.ctx.save_button=this.save_button
,this.state.on("change:syncing",this.control_save_button,this),_.each(this.views,function(e){return e.$el.hide(),!0}),this.go("/edit"),n.trigger("bootstrapped",n)},hide:function(){return this.current_view=null,this},control_save_button:function(){return this.save_button.html(f[this.state.get("syncing")]).prop("disabled",this.state.get("syncing")),this}});return l}),define("views/welcome/landing_page",["backbone","jquery"],function(e,t){return e.View.extend({el:t("#landing_page"),events:{},initialize:function(e){this.render()},render:function(){return this}})}),requirejs.config({baseUrl:"/assets/javascripts",paths:{jquery:"vendor/jquery-1.9.1.min","jquery.ui":"vendor/jquery-ui/jquery-ui-1.10.1.custom.min","jquery.tinysort":"vendor/jquery.tinysort.min",underscore:"vendor/underscore-min","underscore.inflection":"vendor/underscore/underscore.inflection",backbone:"vendor/backbone-min","backbone.nested":"vendor/backbone/deep-model.min",Handlebars:"vendor/handlebars",hbs:"vendor/hbs/hbs","hbs/i18nprecompile"
:"vendor/hbs/i18nprecompile",modernizr:"vendor/modernizr",shortcut:"vendor/shortcut",bootstrap:"vendor/bootstrap/bootstrap",pagehub:"lib/pagehub","pagehub.config":"config","pagehub.state":"state","jquery.gridster":"vendor/jquery/jquery.gridster.min",inflection:"vendor/inflection",md5:"vendor/md5",timed_operation:"lib/timed_operation",animable_view:"views/shared/animable_view","canvas-loader":"vendor/heartcode-canvasloader-min",cm:"vendor/codemirror-4.5"},shim:{jquery:{exports:"$"},"jquery.ui":["jquery"],"jquery.gridster":["jquery"],"jquery.tinysort":["jquery"],"canvas-loader":{exports:"canvas-loader"},timed_operation:{deps:["underscore","backbone"],exports:"timed_operation"},underscore:{exports:"_"},"underscore.inflection":["underscore"],shortcut:{exports:"shortcut"},inflection:[],md5:[],bootstrap:{deps:["jquery"]},backbone:{deps:["underscore","jquery"],exports:"Backbone"},"backbone.nested":["backbone"],Handlebars:{exports:"Handlebars"}},hbs:{templateExtension:"",disableI18n:!0,disableHelpers
:!0}}),require(["pagehub.state","pagehub","pagehub.config","underscore","jquery","jquery.ui","jquery.tinysort","Handlebars","inflection","md5","shortcut","models/folder","models/page","models/space","models/user","collections/folders","collections/pages","collections/spaces","helpers/handlebars","helpers/underscore","helpers/jquery","views/flash","views/header","views/shared/animable_view","views/shared/settings/director","views/shared/settings/nav","views/shared/settings/setting_view","views/spaces/show","views/spaces/new","views/spaces/settings/index","views/users/dashboard/director","views/users/settings/index","views/welcome/landing_page"],function(e){var t=new e({});try{pagehub_hooks}catch(n){pagehub_hooks=[]}console.log("PageHub dependencies loaded. Running "+pagehub_hooks.length+" hooks."),_.each(pagehub_hooks,function(e){return e(t),!0}),delete pagehub_hooks}),define("main",function(){});